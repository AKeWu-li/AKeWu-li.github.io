---
title: 操作系统学习笔记（二）
date: 2021-09-26 19:03:04
tags: ["OS"]
---

## 开始

### 并发执行

“程序”是指令的有序集合，由它规定计算机完成某一任务时所需要做的各种操作及操作顺序。

#### 单道程序的顺序执行

```language
单道程序系统：每一次只允许一道程序运行，在这个程序运行时，它将独占一切系统资源（处理器、主存、辅存、外设、软件），而且系统按照程序的步骤顺序地执行（顺序执行）。
```


##### 特点

```language
(1)程序执行的顺序性
(2)程序运行时对资源的独占性
(3)程序结果的可再现性
(4)程序结果的封闭性
```

```language
优点：系统管理简单
缺点：系统资源得不到充分的利用（尤其在对外部设备的操作时间内，系统处理器大部分时间都处在等待状态）
```

为增强系统处理能力和提高系统资源的利用率，计算机硬件中引入中断和通道技术，形成多道程序系统

#### 多道程序的并发执行

```language
多道程序系统：在内存中放入多道程序，他们在操作系统的控制下交替地在CPU上运行（仅要求部分操作有序），当一道程序不用某一系统资源时，另一道程序就可以马上利用（并发执行）。
```

##### 特点

```language
(1)程序执行时的资源共享性
(2)程序失去了封闭性和可再现性
(3)并发程序之间的相互制约性
```

<!-- more -->

### 进程

#### 定义

```language
(1)进程是可以和其他计算并行的一个计算
(2)进程是一个程序与其数据一道通过处理机的执行所发生的活动
(3)进程是由一个程序以及与他相关的状态信息（包括寄存器内容、存储区域和链接表）所组成的
(4)进程就是一个程序在给定活动空间和初始环境下，在一个处理机上的执行过程
(5)进程是指一个具有一定独立功能的程序关于某个数据集合的一次运行活动
综合以上，进程是能和其他程序并行执行的程序段在某数据集合上的一次运行过程，它是系统资源分配和调度的一个独立单位。
```

注意进程与程序的区别

#### 特征

```language
(1)动态性
(2)并发性
(3)独立性
(4)异步性
(5)结构性
```

#### 组成

```language
(1)程序
(2)数据集合
(3)进程控制块（PCB）
```

##### PCB

内容组成

```language
(1)进程名
(2)当前状态
(3)进程优先级
(4)现场信息保护区
(5)程序和数据的地址
(6)资源清单
(7)队列指针
(8)进程的“家族”关系
```

组织方式

```language
(1)线性方式
(2)链接方式
(3)索引方式
```



#### 状态

三种基本状态

```language
(1)就绪状态
(2)执行状态
(3)阻塞状态（等待状态）
UNIX划分为六种状态：运行状态（包括就绪状态和执行状态）、高优先级睡眠状态、低优先级睡眠状态（相当于阻塞状态）、创建进程状态、等待终止处理状态、暂停状态
```

#### 控制

```language
进程控制的主要任务，是对系统中所有进程从创建到消亡的全过程实行有效的管理和控制
```

##### 内核

```language
通过执行各种原语操作实现对进程进行控制，具有创建进程、撤销进程以及其他管理功能
```

##### 原语

```language
由若干条机器指令构成的程序模块，它是用于完成特定功能的一段程序（在执行期间不可分割）
```

```language
(1)创建原语
(2)撤销原语
(3)阻塞原语
(4)唤醒原语
```

### 线程(子进程)

```language
为了减少程序并发执行时所付出的时空开销，使操作系统具有更好的并发性，引入了线程这一比进程更小的能独立运行的基本单位的概念。
线程是指进程内的一个执行单元，也是进程内的可调度实体。在多线程操作系统中，通常在一个进程中包括多个线程，每个线程都作为利用CPU的基本单位，是具有最小开销的实体。
```

#### 属性

```language
由(1)一个唯一的标识符；(2)描述处理器状态的一组状态寄存器及其内容；(3)两个栈；(4)一个私用存储器四部分组成。因此，线程的实体基本上不拥有系统资源，但它可与同属于一个进程的其他线程共享进程所拥有的全部资源。
线程是进程中的一个实体，是被系统独立调度和分派的基本单位，其切换非常迅速而且开销少。
一个线程可以创建和撤销另一个线程；同一个进程中的多个线程可以并发执行，不同进程中的线程也能并发执行。
```

#### 状态

#### 控制

```language
(1)创建
(2)撤销
(3)等待
(4)让权
```

#### 实现

```language
(1)内核支持线程：内核中保留了一个线程控制块，内核根据该控制块感知线程的存在并对其进行控制。
(2)用户级线程：仅存在于用户级中，与内核无关，这种线程的创建、撤销和切换，都不利用系统调用实现。所有用户级线程具有相同的结构，都运行在一个中间系统上面。
当前有两种方式实现中间系统，即运行时系统（实质上是用于管理和控制线程的函数的集合）和内核控制线程（轻型进程LWP）。
```

#### 线程与进程比较

```language
(1)调度
(2)并发性
(3)拥有资源
(4)系统开销
```

### 多核、多线程与超线程

```language
并行计算有两大分支：分布式计算和狭义的并行计算
分布式计算基于松耦合的多计算机系统，计算机之间使用网络互连，每个计算机大多时候独立运行；分布式计算技术利用特殊的软件将多计算机系统上的空闲计算资源充分地利用起来，以完成任务。
狭义的并行计算大多是紧耦合的多处理器系统，如较早的对称多处理器（SMP）系统。
```

#### 多处理器结构

```language
在一条总线上挂载多个处理器。
```

CPU的执行单元并没有被充分使用

```language
如果CPU不能正常读取数据（总线/内存的瓶颈），其执行单元利用率会明显下降。
目前大多数执行线程缺乏多种指令同时执行(ILP)的支持。
```

##### 对称多处理器(SMP)结构

```language
多个CPU的角色功能平等，没有主从之分。
```

##### 非对称多处理器(AMP)结构

#### 超线程结构

```language
超线程技术是在一个CPU上同时执行的多个程序共同分享该CPU内的资源，理论像两个CPU在同一时间执行两个线程。可在同一时间里，让应用程序使用芯片的不同部分。（需要在处理器上多加入一个逻辑处理单元指针）
```

#### 多核结构

```language
多核结构就是在一个CPU里面布置两个执行核，即两套执行单元。
```

#### 多核超线程结构



## 结束
