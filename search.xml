<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GaussianUpdate</title>
      <link href="/2026/01/29/GaussianUpdate/"/>
      <url>/2026/01/29/GaussianUpdate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>一、 全局外观更新<br>全局外观模型：为了对光照引起的全局表观变化进行建模，使用一个4D哈希网格H和一个微小的MLP F作为全局表观模型来推断高斯图元上不同时刻的增量缩放和球谐性质<br>在Layout - Invariant区域进行外观更新：一般来说，全局光照主导了布局不变区域(即没有任何几何变化的静态区域)的外观变化。在第一阶段，我们的方法专注于通过单独优化4D哈希网格来更新这些变化。为了避免场景中可能出现的新物体或移除物体带来的影响，我们设计了一种鲁棒的方法来确定布局不变区域。具体来说，假设It f是新捕获的图像，我们可以用It f的相机姿态和先前的神经模型来渲染It - 1 f。那么对于这对对应的框架{ It f，It - 1f }，我们可以从一个基础模型SAM中得到它们的实例分割掩码{ St f，St - 1f }。 进一步，我们可以从{ St f，St-1 f }中计算相应实例之间的交并比( Intersection over Union，IoU )得分。在t和t - 1两个时间步Io U得分都较高的布局不变区域将被掩膜成{ Mtf，Mt-1f }。在当前时间步t，一个最终的布局不变量掩模Mf来自Mtf和Mt - 1f的交集，将用于指导后续的外观模型优化。结合该掩码Mf和光度损失，哈希编码外观模型可以在布局不变区域进行精确优化。通过排除所有可能的动态对象或部件，我们可以更好地学习全局外观模型，这进一步有利于后续的几何布局更新。<br>二、 几何布局更新<br>在几何布局发生变化的区域，需要优先生长和剪枝高斯基元，以拟合正确的几何形状，避免非预期的过拟合。对于新出现的物体，从COLMAP中产生新的高斯基元Gadd，并将其添加到现有的高斯场中。对于丢失的物体，我们设置可学习的移除因子m，它由一个函数ψ激活。值得注意的是，ψ ( m )仅乘以先前高斯函数Gp的不透明度。在此阶段，对Gadd的去除因子m和性质进行优化，如式( 1 )所示。11，同时保持上一阶段学习到的全局外观模型固定。<br>最终，我们设定阈值τ = 0。01识别候选高斯基元Gc ( ψ ( m ) &lt; τ )予以移除。此外，我们进一步使用DBSCAN算法过滤掉Gc中远离缺失物体表面的稀疏离群点，并将剩余的高斯聚类成一个边界框，其中任何高斯从Gp中剪枝。与隐式神经场不同，我们的显式连续学习方法允许将剪枝后的高斯存储在可见性池中，用于可视化变化和回忆先前的场景模型。<br>三、 联合细化<br>在剪枝高斯基元后，渲染伪影不可避免地出现在被移除的物体周围。因此，在第三阶段，我们按照公式中的光度损失进行联合求精，共同优化Gadd的外观模型和性质。<br>重要度修枝：受[ 23 ]的启发，我们期望提取有价值的高斯来减少内存消耗。通过遍历当前时间步的所有训练视图，我们可以如下计算第i个高斯的重要性分数vi。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="输入现有模型"><a href="#输入现有模型" class="headerlink" title="输入现有模型"></a>输入现有模型</h3><p>包含三个核心组件：</p><ol><li>3D Gaussians: 场景的几何表示（点云）</li><li>Visibility Mask (可见性掩码): 一个记录表，用于追踪每个高斯点在不同时间是否可见 。这是实现“记忆”功能的关键，使得模型可以随时回溯历史场景</li><li>4D Hash (外观模型): 由特征哈希表 (Feature Hash Table) 和微型多层感知机 (Tiny MLP) 组成。它负责处理场景随时间发生的全局外观变化（如光照变化），而不改变几何结构</li></ol><p>注1：Visibility Mask 本质上是一个二维的查找表，记录了每一个高斯球在每一个时刻是否处于激活状态。系统维护一个巨大的全局高斯池，这个池子包含了从 $T=0$ 到当前时刻 $T=N$ 所有出现过的高斯球的并集。即使会有两个高斯球在空间上的位置相同也没关系，反正一个时刻一个位置只会有一个高斯球处于激活状态。另外，对于布局不变只是光照变化的区域，并不会增加高斯点（而是利用4D Hash来处理）；在第三阶段的更新（即联合微调阶段），会计算每个高斯球对最终画面的贡献度（根据不透明度和累积透光率），如果太小，会进行删除。<br>注2：4D Hash的功能：输入为xyz坐标和t时间，然后将输入转换为切割的4D空间格点，得到整数（因为计算机无法处理无限精度的浮点数坐标），然后把这个整数通过哈希函数映射到特征哈希表格中(利用哈希函数)，也就是确定了放入表格中哪个位置，然后查找该位置周围角点的特征记录，经过线性插值后得到当前点的特征向量，将其输入到MLP中，得到输出：$\Delta s$ (大小的变化量) + $\Delta Y$ (颜色的变化量)。在三阶段更新中第一阶段全局外观更新中，会反向优化特征哈希表格中记录的特征向量。<br>注3：论文中提到的可见性感知持续学习指的就是全局高斯池和生成式回放机制</p><h3 id="渲染过程（可渲染任一之前时刻的图像）"><a href="#渲染过程（可渲染任一之前时刻的图像）" class="headerlink" title="渲染过程（可渲染任一之前时刻的图像）"></a>渲染过程（可渲染任一之前时刻的图像）</h3><p>根据时间 $T$ 从 Visibility Mask 中筛选出当前时刻可见的 3D 高斯点，得到其基础属性（位置、旋转等）；根据时间T结合高斯点的3D坐标利用哈希函数计算其在哈希表中的位置，查询得到特征向量，输入到MLP中，计算得到颜色/光照 ($\Delta Y$) 和 缩放 ($\Delta S$) 的增量（这一步公式如下），叠加到基础属性中，然后通过光栅化渲染出图像。</p><p>$${ \Delta s, \Delta Y } = \text{MLP}( \text{Hash}(\mu, t) )$$</p><p>注：这里的相机位姿是使用的COLMAP计算的或者数据集给出的，因为此任务不是本论文主要解决的问题，故未提及</p><h3 id="变化检测与掩码生成"><a href="#变化检测与掩码生成" class="headerlink" title="变化检测与掩码生成"></a>变化检测与掩码生成</h3><p>利用 SAM 模型分别对当前时刻的真实图像 ($T=N+1$) 和上一时刻的渲染图像 ($T=N$) 进行语义分割，然后分别通过($T=N$)计算($T=N+1$)IoU、通过($T=N+1$)计算($T=N$)IoU，（双向验证，这里是因为SAM进行语义分割的结果可能会有误差），并取交集，也就是标记出重叠区域，生成一个掩码，标记出那些物体依然存在、只是光照发生了变化的区域。这用于指导第一阶段的训练，防止在静态区域错误地修改几何结构。</p><h3 id="三阶段更新"><a href="#三阶段更新" class="headerlink" title="三阶段更新"></a>三阶段更新</h3><h4 id="全局外观更新"><a href="#全局外观更新" class="headerlink" title="全局外观更新"></a>全局外观更新</h4><ul><li>这个阶段会冻结 3D Gaussians，仅优化 4D Hash</li><li>使用 Masked Loss（即利用上面生成的 Unchanged Mask），只在布局未变的区域计算损失，避免受物体移动的干扰</li></ul><h4 id="几何布局更新"><a href="#几何布局更新" class="headerlink" title="几何布局更新"></a>几何布局更新</h4><ul><li>这个阶段会冻结 4D Hash，仅优化 3D Gaussians</li><li>对于新出现的物体，利用 COLMAP 生成稀疏点云并添加到高斯场中</li><li>对于消失的物体，通过学习“移除因子”来修剪高斯点</li></ul><p>注1：SplaTAM通常依赖 RGB-D 相机（深度图）。它知道那个地方是空的（深度突变），所以可以直接在那里生成点，或者基于渲染误差，在误差大的地方分裂点，但是如果深度图有噪声（比如黑色物体吸光、透明玻璃），或者在室外阳光下深度相机失效，SplaTAM 就会崩溃；如果没有深度图的话就可以像本论文一样借用COLMAP对新图像生成点云放进模型中，但实时性不强。<br>注2：系统不直接删除点，而是给每一个旧的高斯球 ($G_p$) 增加了一个可学习的参数 $m$，称为移除因子，如果某个高斯球挡住了现在的背景（比如车挡住了路），为了降低 Loss，网络会自动把这个球的 $m$ 值压低，让它变透明。另外，为了防止 $m$ 值卡在中间（半透明），引入了一个正则化项 $\mathcal{L}_{reg}$，强迫 $m$ 要么趋向 0（完全消失），要么趋向 1（完全保留），不许模棱两可。（这部分公式如下）当训练进行到一定程度，系统会找到所有 $\psi(m) &lt; 0.01$（几乎全透明）的高斯球，标记为“候选删除点” ($G_c$)，然后使用 DBSCAN 聚类算法 检查这些候选点，只有当这些点聚集成一个“团簇”（Cluster）时，系统才认定这是一个“消失的物体”，并将其对应的区域画一个边界框，最后边界框内的旧高斯球会被正式从当前时刻的渲染列表中剔除（即在 Visibility Mask 中标记为 0），并存入可见性池。</p><p>$$\psi(m) = \frac{1}{1 + e^{-1000m}}$$</p><ul><li>$m$：每个高斯球可学习的“移除参数”</li><li>$\psi(m)$：最终作用在不透明度上的乘数（0 到 1 之间）</li><li>标准的 Sigmoid 函数比较平滑，但这个系数1000让曲线变得极度陡峭，接近于一个阶跃函数。也就是系统不希望物体处于“半透明”状态。这个函数强迫高斯球的状态迅速两极分化：要么 $m$ 稍微大一点，$\psi(m)$ 就变成 1（完全保留）；要么 $m$ 稍微小一点，$\psi(m)$ 就变成 0（完全消失）</li></ul><p>$$\mathcal{L}<em>{nd} = (1-\lambda_1)\mathcal{L}</em>{1} + \lambda_1\mathcal{L}<em>{D-SSIM} + \mathcal{L}</em>{reg}$$</p><ul><li>$\mathcal{L}_{1}$：L1 损失（像素颜色的绝对差值）</li><li>$\mathcal{L}_{D-SSIM}$：结构相似性损失（D-SSIM）</li><li>$\mathcal{M}_{f}$：布局不变掩码 (Layout-invariant Mask)（这里没有，这个是第一阶段用的）</li><li>$\mathcal{L}_{reg}$：正则化项</li></ul><p>$$\mathcal{L}_{reg} = \lambda_2 (1-\psi(m))\psi(m) + \lambda_3 \text{BCE}(\psi(m), 1)$$</p><ul><li>第一项 $(1-\psi(m))\psi(m)$：当 $\psi(m)$ 为 0 或 1 时，该项为 0；当 $\psi(m)$ 为 0.5 时，该项最大</li><li>第二项 $\text{BCE}$：二元交叉熵</li><li>为了逼迫参数 $m$ 做出选择，惩罚那些“犹豫不决”的值（比如 0.5）</li></ul><h4 id="联合微调"><a href="#联合微调" class="headerlink" title="联合微调"></a>联合微调</h4><ul><li>4D Hash 和 Updated GS (更新后的高斯点) 同时进行优化</li></ul><p>注：这部分都是<strong>利用可微渲染，对比当前时刻的真实图像和K时刻的渲染图像（即利用生成式回放策略防止遗忘）反向优化</strong></p><h3 id="输出更新后的模型"><a href="#输出更新后的模型" class="headerlink" title="输出更新后的模型"></a>输出更新后的模型</h3><p>依然是三个核心组件</p>]]></content>
      
      
      <categories>
          
          <category> 3D Reconstruction </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3DGS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SplaTAM</title>
      <link href="/2026/01/29/SplaTAM/"/>
      <url>/2026/01/29/SplaTAM/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><h3 id="简化3DGS"><a href="#简化3DGS" class="headerlink" title="简化3DGS"></a>简化3DGS</h3><p>只使用了视图无关性颜色，并强制高斯是各向同性的。这意味着每个高斯仅由8个值参数化：3个为其RGB颜色，3个为其中心位置，1个为其半径，1个为其不透明度</p><h3 id="可微渲染"><a href="#可微渲染" class="headerlink" title="可微渲染"></a>可微渲染</h3><p>给定一组3D高斯和相机位姿，首先将所有高斯从前到后排序。 然后，通过将每个高斯的二维投影按顺序在像素空间进行alpha组合，可以有效地渲染RGB图像</p><h3 id="SLAM系统"><a href="#SLAM系统" class="headerlink" title="SLAM系统"></a>SLAM系统</h3><ul><li><p>初始化</p><ul><li>对于第一帧，对于每个像素，我们添加一个新的高斯，其颜色为该像素的颜色，中心在该像素深度的未投影位置，不透明度为0.5，投影到二维图像上的半径等于一像素半径，用深度除以焦距得到</li></ul></li><li><p>相机追踪</p><ul><li>相机参数初始化 $$ Et+1 = Et + (Et - Et-1) $$</li><li>基于梯度的优化迭代更新相机位姿，通过差分渲染RGB，深度和剪影图，并更新相机参数，以最小化以下损失，同时保持高斯参数固定</li><li>只使用我们渲染的可见性剪影来应用从地图的优化部分渲染的像素的损失，该剪影捕捉了地图的认知不确定性。这对于跟踪新的相机姿态非常重要，因为通常新的帧包含新的信息，而这些信息在我们的地图中尚未被捕获或很好地优化。如果一个像素没有真值深度，L1损失也为0</li></ul></li><li><p>致密化</p><ul><li>在跟踪之后，我们对这一帧的相机位姿有一个准确的估计，并且通过一幅深度图像，我们对场景中的高斯应该在哪里有一个很好的估计。但是，我们不希望在当前高斯已经精确表示场景几何的情况下添加高斯。因此，我们创建了一个致密化掩膜来确定哪些像素应该被致密化</li></ul></li><li><p>高斯地图更新</p><ul><li>这一步是在已知估计的在线相机姿态集合的情况下，更新3D高斯映射的参数。这又是通过可微渲染和基于梯度的优化来完成的，然而与跟踪不同的是，在这种设置中，相机的姿态是固定的，并且高斯的参数是更新的</li><li>这相当于将辐射场拟合到已知姿态的图像的”经典”问题。然而，我们做了两个重要的修改。而不是从头开始，我们从最近构建的地图中热启动优化。我们也没有对所有以前的(关键)帧进行优化，而是选择可能影响新添加的高斯的帧。我们将每第n帧保存为一个关键帧，并选择k个关键帧进行优化，包括当前帧、最近关键帧以及与当前帧重叠度最高的前k-2个关键帧。重叠度通过取当前帧深度图的点云，并确定每个关键帧视锥体内部的点数来确定</li><li>这个阶段优化了与跟踪过程中类似的损失，除了我们没有使用轮廓掩模，因为我们想在所有像素上优化。此外，我们在RGB渲染中添加了SSIM损失，并删除了无用的高斯，这些高斯具有接近0的不透明度或太大</li></ul></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>首先对3DGS的参数进行简化，每个高斯仅8个参数（3个为其RGB颜色，3个为其中心位置，1个为其半径，1个为其不透明度），对第一帧的每个像素添加一个高斯；<br>接下来就是一个循环的过程：<br>1.输入是上一时刻建好的高斯模型和相机渲染出的照片，以及此刻相机拍出的图片（彩色图+深度图）<br>2.相机追踪<br>先对相机参数进行初始化（通过上一时刻与上上时刻相机位姿的关系和上一时刻的位姿得出这一时刻的相机参数），然后通过计算出来的位姿渲染出照片。<br>将这个模型和输入的相机拍出来的图片进行遮罩操作，splatam只在已知区域（即黑色区域）进行计算（因为它知道白色区域是新东西，如果强行对比会导致定位跑偏）。<strong>（Gemini认为白色是已知区域，黑色是未知区域，因为S(p)=1表示白色，而S(p)=0表示黑色）</strong><br>注：这里的$Sil$是可见度（专业术语是Silhouette，轮廓/不透明度累积图。这是高斯球的一个参数，如果某个像素位置上有很多高斯球，$Sil \approx 1$；如果某个像素位置是空的，$Sil \approx 0$），$\lambda$是阈值（论文中设置为0.99），因此，$(Sil &gt; \lambda)$就是只有那些地图里非常确信存在的、实实在在的区域，才算数（为1）；半透明的、没探索过的区域，统统不算（为0）。故$(Sil &gt; \lambda)$乘以 $F_t$ 和 Render就相当于遮罩操作。<br>然后调整相机位置 $E’$，让渲染出来的图和真实照片 $F_t$ 在已知区域进行对比，反向优化相机的位姿，最终得到精确的位姿。这里的公式为（这里的深度（几何信息）对于定位比颜色更重要权值更高（颜色容易受光照影响））：$$E_t = \text{argmin} | (Sil &gt; \lambda) * (\text{Render}(G_{t-1}, E’) - F_t) |_1$$</p><p>3.高斯致密化<br>先根据上一步得到的精确位姿对上一时刻渲染出的高斯模型上渲染出一个图片，然后做一个密集化掩码，标记出“需要添加新点”的区域。这里密集化掩码的公式为：$$M(p) = (S(p) &lt; 0.5) + (D_{GT}(p) &lt; D(p))(L_1(D(p)) &gt; \lambda \text{MDE})$$<br>注：<br>1）$M(p)$ 是 Densification Mask（致密化掩膜），如果某个像素 $p$ 计算结果为 1 ，系统就会在这里生成新的高斯球。<br>2）$S(p)$表示不透明度。如果 $S(p) \approx 1$：说明这里有很厚实的墙或物体。如果 $S(p) \approx 0$：说明这里是空气，或者还没建过图。<br>3）$D_{GT}(p)$：真实深度（Ground Truth）。无人机刚拍到的深度图。$D(p)$：渲染深度（Rendered Depth）。比如真实地图测得前方 1 米处有东西，旧地图认为前方 3 米处才是墙，1米 &lt; 3米，说明真实世界里，有个未知的东西在前方1米处（而且不是墙）。<br>4）$L_1(D(p))$：深度误差，即 $|D_{GT} - D_{Render}|$。$\text{MDE}$：中位数深度误差 (Median Depth Error)，这是当前这一帧画面的平均误差水平。$\lambda$：敏感度系数。论文中设为 50 。因此这里公式的意思是只有当这个点的深度误差，比全图中位数误差还要大 50 倍时，我才承认它是真的“新物体”，而不是传感器抖动，防止因为传感器的一点点误差就疯狂加点。</p><p>然后添加高斯点（即红色区域）。论文中公式如下：$$G_t^d = \text{Densify}(G_{t-1}, F_t, E_t, Sil)$$<br>注：在函数 Densify 内部，首先利用上一公式筛选像素，遍历 $F_t$ 的每一个像素，如果是空的或有新物体则选中该像素；然后利用相机内参 $K$ 和位姿 $E_t$ 计算 3D 坐标 $\mu$（从相机位置 $E_t$ 出发，沿着像素 $(u,v)$ 的方向，射出一道光，飞行 $D_{GT}$（真实深度）这么远，那个落点就是新高斯球的球心）；然后初始化高斯球的属性，颜色 ($c$)直接取像素的 RGB 颜色，大小 ($r$)就根据深度估算（离得越远，像素代表的物理范围越大，球半径 $r = \frac{D_{GT}}{f}$（深度除以焦距）），透明度 ($o$)会初始化为一个中间值（例如 0.5），表示“我不确定我是不是实体，先放这里，等下一步优化来决定去留”。<br>4.地图更新<br>先根据精确位姿对上一步得到的粗略高斯模型渲染出新图片，<br>然后利用可微渲染，同时调整新点和旧点的参数（颜色、位置、大小、透明度），让它们渲染出来的图像与真实图像无缝衔接（也就是通过图片的对比反向优化各高斯元参数），这里公式如下：$$G_t = \text{argmin} \sum | \text{Render}(G’, E_k) - F_k |_1$$<br>注：这里不仅使用当前帧，还会选取 $k$ 个关键帧 (Keyframes) 一起参与优化，包括当前帧 + 最近的一个关键帧 + $k-2$ 个视锥重叠度最高的历史关键帧。<br>最终得到新的高斯模型，用作下一时刻的输入。</p><hr><h3 id="公式-1：3D-高斯球的定义-The-Atom"><a href="#公式-1：3D-高斯球的定义-The-Atom" class="headerlink" title="公式 1：3D 高斯球的定义 (The Atom)"></a><strong>公式 1：3D 高斯球的定义 (The Atom)</strong></h3><p>$$f(x) = o \cdot \exp\left(-\frac{||x - \mu||^2}{2r^2}\right)$$</p><p><strong>含义</strong>：这是 SplaTAM 中<strong>最基本的单元</strong>。</p><p><strong>简化版高斯</strong>：注意，标准 3DGS 使用各向异性（椭球）的高斯函数，但这篇论文为了 SLAM 的速度和稳定性，将其简化为 <strong>各向同性（Isotropic）</strong>，也就是正球体 。</p><p><strong>参数</strong>：</p><ul><li><p>(Mu)：球心的 3D 位置 。</p></li><li><p>(Radius)：球的半径（控制它的大小）。</p></li><li><p>(Opacity)：不透明度（0~1），控制它有多“实”。</p></li></ul><p><strong>物理意义</strong>：这个公式计算的是空间中任意一点  受到的该高斯球的<strong>影响值（密度/贡献度）</strong>。离球心$\mu$ 越近，值越大；越远，值按指数衰减。</p><hr><h3 id="公式-2：可微渲染-颜色-The-Painter"><a href="#公式-2：可微渲染-颜色-The-Painter" class="headerlink" title="公式 2：可微渲染 - 颜色 (The Painter)"></a><strong>公式 2：可微渲染 - 颜色 (The Painter)</strong></h3><p>$$C(p) = \sum_{i=1}^{n} c_i f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$</p><p><strong>含义</strong>：这是经典的<strong>体积渲染公式（Volumetric Rendering）</strong>，也就是 alpha-blending（透明度混合）。</p><p><strong>如何计算一个像素  的颜色？</strong></p><ol><li>从相机发射一条光线穿过该像素。</li><li>光线会穿过一串高斯球（排好序：$1, 2, …, n$）。</li><li>$c_i f_i(p)$：第 $i$ 个球的颜色 $c_i$ 乘以它在该位置的密度 $f_i$。</li><li>$\prod (1 - f_j(p))$：这是透射率（Transmittance）。意思是你虽然有颜色，但你的可见度要取决于挡在你前面的球有多透明。如果前面的球完全不透明（$f=1$），后面这一项就变成 0，你就看不见了。</li></ol><p><strong>作用</strong>：生成 RGB 图像，用于和真实照片对比算 Loss。</p><hr><h3 id="公式-3：3D-到-2D-的投影-The-Lens"><a href="#公式-3：3D-到-2D-的投影-The-Lens" class="headerlink" title="公式 3：3D 到 2D 的投影 (The Lens)"></a><strong>公式 3：3D 到 2D 的投影 (The Lens)</strong></h3><p>$$\mu^{2D} = K \frac{E_t \mu}{d}, \quad r^{2D} = \frac{f r}{d}$$</p><p><strong>含义</strong>：把 3D 世界里的球，拍扁到 2D 屏幕上。</p><p><strong>$\mu^{2D}$ (屏幕位置)：</strong></p><ul><li>$E_t \mu$：先把世界坐标转为相机坐标。</li><li>除以 $d$（深度）：近大远小。</li><li>乘 $K$（内参）：映射到像素坐标系。</li></ul><p><strong>$r^{2D}$ (屏幕半径)：</strong></p><ul><li>这是高斯球在屏幕上的<strong>投影半径</strong>。</li><li>$f$ 是焦距，$r$ 是物理半径，$d$ 是深度。</li><li><strong>物理规律</strong>：物体离相机越远（ 越大），在屏幕上看起来就越小。</li></ul><hr><h3 id="公式-4：可微渲染-深度-The-Ruler"><a href="#公式-4：可微渲染-深度-The-Ruler" class="headerlink" title="公式 4：可微渲染 - 深度 (The Ruler)"></a><strong>公式 4：可微渲染 - 深度 (The Ruler)</strong></h3><p>$$D(p) = \sum_{i=1}^{n} d_i f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$</p><p><strong>含义</strong>：这跟公式 2 的结构一模一样，只不过把累积的对象从“颜色 $c_i$”换成了“深度 $d_i$”。<br><strong>深度渲染</strong>：它计算的是这光线碰到的所有物体的<strong>加权平均深度</strong>。<br><strong>作用</strong>：生成<strong>渲染深度图</strong>。这是 SplaTAM 的核心优势，它能直接针对深度误差进行优化（Geometric Loss），而不仅仅是颜色误差。</p><hr><h3 id="公式-5：轮廓掩膜-可见度-The-Scout"><a href="#公式-5：轮廓掩膜-可见度-The-Scout" class="headerlink" title="公式 5：轮廓掩膜 / 可见度 (The Scout)"></a><strong>公式 5：轮廓掩膜 / 可见度 (The Scout)</strong></h3><p>$$S(p) = \sum_{i=1}^{n} f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$</p><p><strong>含义</strong>：这就是你要的 <strong>Silhouette Mask</strong>。<br><strong>结构</strong>：依然是体积渲染公式，但去掉了颜色项和深度项，只累积<strong>不透明度（Opacity/Density）</strong>。<br><strong>结果解读</strong>：</p><ul><li>$S(p) \approx 1$：光线最终撞上了厚实的东西（墙壁）。$\rightarrow$ 已知区域。</li><li>$S(p) \approx 0$：光线穿透了所有东西也没遇到阻碍（看向虚空）。$\rightarrow$ 未知区域。</li></ul><p><strong>作用</strong>：区分“有地图的地方”和“没地图的地方”，用于过滤 Loss。</p><hr><h3 id="公式-6：初始化半径-The-Seed"><a href="#公式-6：初始化半径-The-Seed" class="headerlink" title="公式 6：初始化半径 (The Seed)"></a><strong>公式 6：初始化半径 (The Seed)</strong></h3><p>$$r = \frac{D_{GT}}{f}$$</p><p><strong>含义</strong>：当我们要在某个位置新生成一个高斯球时，它应该多大？<br><strong>逻辑</strong>：根据公式 3，我们希望新生成的球投影到屏幕上时，<strong>半径刚好对应 1 个像素</strong>。</p><ul><li>令公式 3 中的 $r^{2D} = 1$。</li><li>推导出 $1 = \frac{f \cdot r}{d}$。</li><li>得到 $r = \frac{d}{f}$（这里用 $D_{GT}$ 代表深度）。</li></ul><p><strong>作用</strong>：防止新加的点太大（导致模糊）或太小（导致空洞/Aliasing）。</p><hr><h3 id="公式-8：相机追踪损失函数-The-Judge"><a href="#公式-8：相机追踪损失函数-The-Judge" class="headerlink" title="公式 8：相机追踪损失函数 (The Judge)"></a><strong>公式 8：相机追踪损失函数 (The Judge)</strong></h3><p>$$L_t = \sum_{p} (S(p) &gt; 0.99) \cdot (L_1(D(p)) + 0.5 L_1(C(p)))$$</p><p><strong>含义</strong>：这是 Step 1 (Camera Tracking) 用来优化相机位姿的 <strong>Loss Function</strong>。<br><strong>组成部分拆解</strong>：</p><ul><li>$L_1(D(p))$：深度误差。渲染深度 vs 真实深度。这是定位最主要的依据。</li><li>$L_1(C(p))$：颜色误差。渲染颜色 vs 真实照片。</li><li>$0.5$：权重。作者经验发现颜色误差不如深度误差可靠（容易受光照影响），所以打个五折。</li><li>$(S(p) &gt; 0.99)$：核心掩膜。只有在轮廓图显示“这里非常实 ($&gt;0.99$)”的像素，才计算误差。如果 $S(p) &lt; 0.99$，说明这里可能是边界或者未探索区域，渲染结果不可信，直接忽略，不计入 Loss。</li></ul><hr><p>这一套公式环环相扣：用 <strong>Eq 1</strong> 定义球，用 <strong>Eq 2/4/5</strong> 渲染出图像，用 <strong>Eq 8</strong> 对比图像算出位置，最后用 <strong>Eq 6</strong> 初始化新球来修补误差。这构成了 SplaTAM 的数学闭环。</p><hr><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="scripts-splatam-py"><a href="#scripts-splatam-py" class="headerlink" title="scripts/splatam.py"></a>scripts/splatam.py</h3><h4 id="get-loss"><a href="#get-loss" class="headerlink" title="get_loss()"></a>get_loss()</h4><p>它有三个步骤：投影（Projection）、光栅化（Rasterization） 和 评分（Loss Calculation）</p><p>一、投影</p><ul><li>输入是世界坐标系下的几十万个高斯球，输出是相机平面上的 2D 椭圆（因为splatam里面的高斯球是各向同性，在 3D 空间它是正球体，投影到 2D 平面它永远是一个圆，因此这里其实时园）</li><li>如果一个球跑到了相机屁股后面（Z &lt; 0），或者跑出了屏幕边缘，直接扔掉，不参与计算</li></ul><p>首先利用当前的相机位姿 (curr_data[‘cam’])，把所有高斯球的中心点 means3D 从世界坐标搬到相机坐标系下；<br>然后通过一个雅可比矩阵（Jacobian），把3D 高斯球（ 3x3 的协方差矩阵）投影到 2D 图像平面上，变成一个 2x2 的 2D 协方差矩阵</p><p>二、光栅化</p><p>首先把所有在屏幕内的高斯球，按照深度（Depth）从远到近排序，然后遍历每个像素，从近到远（或从远到近）累加颜色的贡献，然后进行渲染，渲染出深度图和颜色图</p><p>三、评分</p><p>和真实数据计算误差</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 颜色误差 (L1 Loss)</span></span><br><span class="line"><span class="comment"># 看看画出来的图和照片差多少</span></span><br><span class="line">loss_im = torch.<span class="built_in">abs</span>(gt_im - render_im).mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 深度误差 (L1 Depth Loss)</span></span><br><span class="line"><span class="comment"># SplaTAM 的核心：不仅要看着像，几何位置也得对！</span></span><br><span class="line">loss_depth = torch.<span class="built_in">abs</span>(gt_depth - render_depth).mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 总分</span></span><br><span class="line">loss = w_im * loss_im + w_depth * loss_depth</span><br></pre></td></tr></table></figure><h5 id="transform-to-frame"><a href="#transform-to-frame" class="headerlink" title="transform_to_frame()"></a>transform_to_frame()</h5><p>作用：1）梯度控制开关，如gaussians_grad=False, camera_grad=True就是当反向传播的时候，只有相机的位置会更新，这样就可以再追踪阶段计算相机的精确位姿；2）时间切片与位姿提取：transform_to_frame 根据传入的 iter_time_idx（时间戳），从巨大的轨迹数组中提取出当前这一帧对应的旋转（Rotation）和平移（Translation），还会把存储的四元数（Quaternion）转换为渲染器需要的旋转矩阵，其中params 字典里存储的是所有帧的相机轨迹。函数的输出为打包好的 transformed_gaussians，里面包含：当前时刻的相机位姿（带梯度或不带）、当前所有的高斯球（带梯度或不带），这个包会直接喂给 Renderer 去生成图像。</p><p><strong>第一帧时打印：</strong></p><hr><p>🔍 DEBUG: params (总仓库)</p><p>  [Key] means3D              [Shape] [255190, 3]</p><p>  [Key] rgb_colors           [Shape] [255190, 3]</p><p>  [Key] unnorm_rotations     [Shape] [255190, 4]</p><p>  [Key] logit_opacities      [Shape] [255190, 1]</p><p>  [Key] log_scales           [Shape] [255190, 1]</p><p>  [Key] cam_unnorm_rots      [Shape] [1, 4, 592]</p><p>  [Key] cam_trans            [Shape] [1, 3, 592]</p><p>🔍 DEBUG: transformed_gaussians (当前帧数据包)</p><p>  [Key] means3D              [Shape] [255190, 3]</p><p>  [Key] unnorm_rotations     [Shape] [255190, 4]</p><hr><p><strong>各参数解释：</strong><br>255,190：地图里目前总共有 255,190 个高斯球。系统把第 0 帧图片里每一个有有效深度的像素，都变成了一个 3D 高斯球。图片分辨率是 640x480 = 307,200 像素，其中大约有 5万个像素可能是无效深度（太远或太近），剩下的 255,190 个像素被成功转换成了第一批高斯球。<br>592：TUM 数据集序列（freiburg1_desk）总共有 592 帧。</p><ul><li>means3D: [255190, 3]<ul><li>位置，即x、y、z坐标</li></ul></li><li>rgb_colors: [255190, 3]<ul><li>颜色，即R、G、B参数</li></ul></li><li>unnorm_rotations: [255190, 4]<ul><li>姿态，旋转四元数(w, x, y, z)</li><li>注：未归一化</li></ul></li><li>logit_opacities：[255190, 1]<ul><li>不透明度，值大 $\to$ 实心墙壁，值小 $\to$ 稀薄的烟雾（或者噪声）</li><li>$o = \text{Sigmoid}(\text{logit_opacities})$。我们在 params 里存 logit 值（可以是 $-\infty$ 到 $+\infty$），算的时候过一下 Sigmoid 函数就变成了 $0 \sim 1$</li></ul></li><li>log_scales: [255190, 1]<ul><li>半径，论文里为了快，把球简化成了正球体，只有一个半径参数 $r$</li><li>注：这里存储的是半径的对数。因为优化器调整参数时可能会把数字减成负数，故存 log(r)，取出来用的时候做 exp(log(r))，就能保证半径永远是正数</li></ul></li><li>cam_unnorm_rots：[1, 4, 592]<ul><li>存的是每一帧相机的 旋转（四元数）</li></ul></li><li>cam_trans: [1, 3, 592]<ul><li>Batch Size，这里永远是 1</li><li>相机的 (x, y, z) 坐标</li><li>数据集序列共592帧</li><li>存的是每一帧相机在世界坐标系下的 平移 $(x, y, z)$</li></ul></li></ul><p>具体例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;means3D&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[-<span class="number">0.9017</span>, -<span class="number">0.7259</span>,  <span class="number">1.4686</span>],</span><br><span class="line">        [-<span class="number">0.8988</span>, -<span class="number">0.7259</span>,  <span class="number">1.4686</span>],</span><br><span class="line">        [-<span class="number">0.5105</span>, -<span class="number">0.3596</span>,  <span class="number">0.8394</span>],</span><br><span class="line">        ...,</span><br><span class="line">        [ <span class="number">0.7847</span>,  <span class="number">0.6526</span>,  <span class="number">1.5068</span>],</span><br><span class="line">        [ <span class="number">0.7876</span>,  <span class="number">0.6526</span>,  <span class="number">1.5068</span>],</span><br><span class="line">        [ <span class="number">0.7905</span>,  <span class="number">0.6526</span>,  <span class="number">1.5068</span>]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;rgb_colors&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[<span class="number">0.2353</span>, <span class="number">0.1176</span>, <span class="number">0.1608</span>],</span><br><span class="line">        [<span class="number">0.2353</span>, <span class="number">0.1176</span>, <span class="number">0.1176</span>],</span><br><span class="line">        [<span class="number">0.4824</span>, <span class="number">0.4118</span>, <span class="number">0.5137</span>],</span><br><span class="line">        ...,</span><br><span class="line">        [<span class="number">0.0510</span>, <span class="number">0.0157</span>, <span class="number">0.0078</span>],</span><br><span class="line">        [<span class="number">0.0627</span>, <span class="number">0.0196</span>, <span class="number">0.0078</span>],</span><br><span class="line">        [<span class="number">0.0549</span>, <span class="number">0.0118</span>, <span class="number">0.0118</span>]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;unnorm_rotations&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        ...,</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;logit_opacities&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[<span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>],</span><br><span class="line">        ...,</span><br><span class="line">        [<span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;log_scales&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[-<span class="number">5.8635</span>],</span><br><span class="line">        [-<span class="number">5.8635</span>],</span><br><span class="line">        [-<span class="number">6.4229</span>],</span><br><span class="line">        ...,</span><br><span class="line">        [-<span class="number">5.8379</span>],</span><br><span class="line">        [-<span class="number">5.8379</span>],</span><br><span class="line">        [-<span class="number">5.8379</span>]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;cam_unnorm_rots&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">         [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">         [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">         [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>), <span class="string">&#x27;cam_trans&#x27;</span>: Parameter containing:</span><br><span class="line">tensor([[[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">         [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">         [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]]], device=<span class="string">&#x27;cuda:0&#x27;</span>, requires_grad=<span class="literal">True</span>)&#125;</span><br></pre></td></tr></table></figure><p><strong>疑问：</strong><br>1）为什么 transformed_gaussians 要存 25万个球？<br>答：transform_to_frame 只是把数据从仓库里拿出来，准备喂给 GPU。<br>Python 把 25万个球全部扔给 CUDA 渲染器（Renderer）。渲染器内部 会自动判断哪些球在相机视野里，哪些在背后。<br>在 Python 层面手动算“哪个球在视野里”太慢了，不如直接全部扔给 GPU 算。所以 transformed_gaussians 里依然保留了所有球。<br>2）为何它只存了“位置”和“姿态”，把“颜色”和“半径”弄丢了<br>答：因为这只是个“中转包”，只有 位置 (means3D) 和 旋转 (rotations) 会受到相机移动的影响，所以需要重点处理，而后面会进行组装，从 params (总仓库) 里直接拿颜色、半径、不透明度（因为这些属性不管相机怎么动，它们本身是不变的，不需要变换坐标系）</p><h3 id="恒速运动模型-initialize-camera-pose-函数"><a href="#恒速运动模型-initialize-camera-pose-函数" class="headerlink" title="恒速运动模型(initialize_camera_pose 函数)"></a>恒速运动模型(initialize_camera_pose 函数)</h3><p>追踪部分，根据过去两帧的运动趋势，计算出相机的初始位姿，对应公式：<br>$$Pose_{t} = Pose_{t-1} + (Pose_{t-1} - Pose_{t-2})$$</p><h4 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">prev_tran1 = params[<span class="string">&#x27;cam_trans&#x27;</span>][..., curr_time_idx-<span class="number">1</span>].detach() <span class="comment"># 位置 P_&#123;t-1&#125;</span></span><br><span class="line">prev_tran2 = params[<span class="string">&#x27;cam_trans&#x27;</span>][..., curr_time_idx-<span class="number">2</span>].detach() <span class="comment"># 位置 P_&#123;t-2&#125;</span></span><br><span class="line"><span class="comment"># 预测当前位置 P_t</span></span><br><span class="line">new_tran = prev_tran1 + (prev_tran1 - prev_tran2)</span><br></pre></td></tr></table></figure><p>解释：params[‘cam_trans’] 的形状是 [1, 3, 592]，因此[…, curr_time_idx-1]的意思是保持前面所有维度（Batch 和 xyz）不变，只取最后一个维度（时间轴）上的第 curr_time_idx-1 帧的数据。.detach()的意思是<strong>切断梯度流</strong>，因为不需要做反向传播。</p><h4 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取出并归一化四元数</span></span><br><span class="line">prev_rot1 = F.normalize(params[<span class="string">&#x27;cam_unnorm_rots&#x27;</span>][..., curr_time_idx-<span class="number">1</span>].detach()) <span class="comment"># Q_&#123;t-1&#125;</span></span><br><span class="line">prev_rot2 = F.normalize(params[<span class="string">&#x27;cam_unnorm_rots&#x27;</span>][..., curr_time_idx-<span class="number">2</span>].detach()) <span class="comment"># Q_&#123;t-2&#125;</span></span><br><span class="line"><span class="comment"># 线性外推并重新归一化</span></span><br><span class="line">new_rot = F.normalize(prev_rot1 + (prev_rot1 - prev_rot2))</span><br></pre></td></tr></table></figure><h3 id="slam-external-py-prune-gaussians"><a href="#slam-external-py-prune-gaussians" class="headerlink" title="slam_external.py/prune_gaussians()"></a>slam_external.py/prune_gaussians()</h3><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>在建图（Mapping）优化的过程中，定期把那些没用的或者错误的高斯球清理掉，以保持地图的干净和显存的高效。其主要是定时剪枝、按条件筛选、重置透明度。</p><h4 id="定时剪枝"><a href="#定时剪枝" class="headerlink" title="定时剪枝"></a>定时剪枝</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">iter</span> &lt;= prune_dict[<span class="string">&#x27;stop_after&#x27;</span>]:</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">iter</span> &gt;= prune_dict[<span class="string">&#x27;start_after&#x27;</span>]) <span class="keyword">and</span> (<span class="built_in">iter</span> % prune_dict[<span class="string">&#x27;prune_every&#x27;</span>] == <span class="number">0</span>):</span><br></pre></td></tr></table></figure><ul><li><p>它只在迭代次数处于 start_after 和 stop_after 之间进行。</p></li><li><p>每隔 prune_every (20) 次迭代才执行一次，避免频繁操作拖慢速度。</p></li></ul><h4 id="按条件筛选"><a href="#按条件筛选" class="headerlink" title="按条件筛选"></a>按条件筛选</h4><p>条件一:透明度太低</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">iter</span> == prune_dict[<span class="string">&#x27;stop_after&#x27;</span>]:</span><br><span class="line">    remove_threshold = prune_dict[<span class="string">&#x27;final_removal_opacity_threshold&#x27;</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    remove_threshold = prune_dict[<span class="string">&#x27;removal_opacity_threshold&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算真实透明度并判断</span></span><br><span class="line">to_remove = (torch.sigmoid(params[<span class="string">&#x27;logit_opacities&#x27;</span>]) &lt; remove_threshold).squeeze()</span><br></pre></td></tr></table></figure><p>解释：logit_opacities 是存储的参数，通过 sigmoid 变成 0~1 的真实透明度 ， remove_threshold 是设置的阈值 0.005</p><p>条件二：太大了（遮挡视线）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">iter</span> &gt;= prune_dict[<span class="string">&#x27;remove_big_after&#x27;</span>]:</span><br><span class="line">    <span class="comment"># 计算真实半径，判断是否超过场景半径的 10%</span></span><br><span class="line">    big_points_ws = torch.exp(params[<span class="string">&#x27;log_scales&#x27;</span>]).<span class="built_in">max</span>(dim=<span class="number">1</span>).values &gt; <span class="number">0.1</span> * variables[<span class="string">&#x27;scene_radius&#x27;</span>]</span><br><span class="line">    to_remove = torch.logical_or(to_remove, big_points_ws)</span><br></pre></td></tr></table></figure><p>解释：exp(log_scales) 还原出真实半径，如果一个球膨胀得巨大（超过整个场景半径的 10%），通常是因为优化失败产生的伪影（Artifact），就像贴在镜头前的一个大光斑。这种球会严重干扰后续建图</p><p>最后执行删除操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">params, variables = remove_points(to_remove, params, variables, optimizer)</span><br></pre></td></tr></table></figure><h4 id="重置透明度"><a href="#重置透明度" class="headerlink" title="重置透明度"></a>重置透明度</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">iter</span> &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">iter</span> % prune_dict[<span class="string">&#x27;reset_opacities_every&#x27;</span>] == <span class="number">0</span> <span class="keyword">and</span> prune_dict[<span class="string">&#x27;reset_opacities&#x27;</span>]:</span><br><span class="line">    new_params = &#123;<span class="string">&#x27;logit_opacities&#x27;</span>: inverse_sigmoid(torch.ones_like(params[<span class="string">&#x27;logit_opacities&#x27;</span>]) * <span class="number">0.01</span>)&#125;</span><br><span class="line">    params = update_params_and_optimizer(new_params, params, optimizer)</span><br></pre></td></tr></table></figure><p>解释：每隔一段时间，强制把所有高斯球的透明度都设为极低的值（0.01），其目的是</p><ul><li><p>如果一个球是真的墙壁或物体，在接下来的几次迭代中，为了减小 Loss，梯度会迅速把它重新“拉黑”（变不透明）。</p></li><li><p>如果一个球是早期的噪声或误判，重置后它就再也“站不起来”了（一直保持透明），然后在下一次剪枝中被彻底删掉。</p></li><li><p>这能有效防止陷入局部最优，去掉那些“僵尸”高斯球。</p></li></ul><h3 id="slam-external-py-keyframe-selection-overlap"><a href="#slam-external-py-keyframe-selection-overlap" class="headerlink" title="slam_external.py/keyframe_selection_overlap"></a>slam_external.py/keyframe_selection_overlap</h3><h4 id="用处"><a href="#用处" class="headerlink" title="用处"></a>用处</h4><p>在地图更新时使用挑选的关键帧的图像与渲染出的图像对比，进行反向优化，这个函数正是为了挑选关键帧</p><h4 id="首先从当前帧里随机挑了一些“探针”点"><a href="#首先从当前帧里随机挑了一些“探针”点" class="headerlink" title="首先从当前帧里随机挑了一些“探针”点"></a>首先从当前帧里随机挑了一些“探针”点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 找到所有有有效深度（&gt;0）的像素坐标</span></span><br><span class="line">valid_depth_indices = torch.where(gt_depth[<span class="number">0</span>] &gt; <span class="number">0</span>)</span><br><span class="line">valid_depth_indices = torch.stack(valid_depth_indices, dim=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 随机抽取 pixels (默认1600) 个点作为代表</span></span><br><span class="line">indices = torch.randint(valid_depth_indices.shape[<span class="number">0</span>], (pixels,))</span><br><span class="line">sampled_indices = valid_depth_indices[indices]</span><br></pre></td></tr></table></figure><h4 id="把这些选出来的-2D-像素点，变成-3D-世界坐标点"><a href="#把这些选出来的-2D-像素点，变成-3D-世界坐标点" class="headerlink" title="把这些选出来的 2D 像素点，变成 3D 世界坐标点"></a>把这些选出来的 2D 像素点，变成 3D 世界坐标点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把 2D 像素 + 深度 -&gt; 3D 世界坐标点 (pts)</span></span><br><span class="line">pts = get_pointcloud(gt_depth, intrinsics, w2c, sampled_indices)</span><br></pre></td></tr></table></figure><h4 id="拿着这些-3D-世界点，去试探每一个历史关键帧，看看历史帧的相机能看到多少点"><a href="#拿着这些-3D-世界点，去试探每一个历史关键帧，看看历史帧的相机能看到多少点" class="headerlink" title="拿着这些 3D 世界点，去试探每一个历史关键帧，看看历史帧的相机能看到多少点"></a>拿着这些 3D 世界点，去试探每一个历史关键帧，看看历史帧的相机能看到多少点</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> keyframeid, keyframe <span class="keyword">in</span> <span class="built_in">enumerate</span>(keyframe_list):</span><br><span class="line">    <span class="comment"># 1. 取出历史帧的位姿 (World-to-Camera)</span></span><br><span class="line">    est_w2c = keyframe[<span class="string">&#x27;est_w2c&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. 把世界点转到历史帧的相机坐标系下</span></span><br><span class="line">    pts4 = torch.cat([pts, torch.ones_like(pts[:, :<span class="number">1</span>])], dim=<span class="number">1</span>) <span class="comment"># 变成齐次坐标</span></span><br><span class="line">    transformed_pts = (est_w2c @ pts4.T).T[:, :<span class="number">3</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 3. 再投影到历史帧的 2D 图像平面</span></span><br><span class="line">    points_2d = torch.matmul(intrinsics, transformed_pts.transpose(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">    <span class="comment"># ... (透视除法 /z) ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 4. 检查点是否在图像范围内 (在屏幕内且在相机前方)</span></span><br><span class="line">    edge = <span class="number">20</span> <span class="comment"># 边缘留一点余量</span></span><br><span class="line">    mask = (projected_pts[:, <span class="number">0</span>] &lt; width-edge) * ... <span class="comment"># x, y 均在图像范围内</span></span><br><span class="line">    mask = mask &amp; (points_z[:, <span class="number">0</span>] &gt; <span class="number">0</span>) <span class="comment"># 深度必须大于0（在相机前面，不能在脑后）</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 5. 计算重叠率：有多少点落在了这帧历史图像里？</span></span><br><span class="line">    percent_inside = mask.<span class="built_in">sum</span>()/projected_pts.shape[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>注：这里的历史关键帧是每隔5帧选取一个，另外历史关键帧小于5个时不会触发这里关键帧的选择<br>在script/splatam.py中的Mapping阶段：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add frame to keyframe list</span></span><br><span class="line"><span class="comment"># 这里的 time_idx 是 4</span></span><br><span class="line"><span class="comment"># config[&#x27;keyframe_every&#x27;] 是 5</span></span><br><span class="line"><span class="keyword">if</span> ((time_idx == <span class="number">0</span>) <span class="keyword">or</span> ((time_idx+<span class="number">1</span>) % config[<span class="string">&#x27;keyframe_every&#x27;</span>] == <span class="number">0</span>) ...):</span><br><span class="line">    <span class="comment"># (4 + 1) % 5 == 0，条件成立！</span></span><br><span class="line">    keyframe_list.append(curr_keyframe)  &lt;-- Frame <span class="number">4</span> 在这里被永久存入了历史库</span><br></pre></td></tr></table></figure><h4 id="筛选与随机选择"><a href="#筛选与随机选择" class="headerlink" title="筛选与随机选择"></a>筛选与随机选择</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 先按重叠度从高到低排序 (虽然这一步在后面被随机打乱削弱了，但在逻辑上是先找最好的)</span></span><br><span class="line">list_keyframe = <span class="built_in">sorted</span>(list_keyframe, key=<span class="keyword">lambda</span> i: i[<span class="string">&#x27;percent_inside&#x27;</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 剔除那些完全没重叠的 (percent &gt; 0)</span></span><br><span class="line">selected_keyframe_list = [ ... <span class="keyword">if</span> keyframe_dict[<span class="string">&#x27;percent_inside&#x27;</span>] &gt; <span class="number">0.0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 【关键】随机打乱并取前 k 个</span></span><br><span class="line">selected_keyframe_list = <span class="built_in">list</span>(np.random.permutation(np.array(selected_keyframe_list))[:k])</span><br></pre></td></tr></table></figure><p>注：这里为什么要随机打乱再取？按理说应该选 重叠度最高的 k 帧，但如果只选最高的，往往选出来的都是最近的那几帧（因为刚才走过，重叠度肯定最高），而随机打乱并从所有有重叠的帧里选，可以让系统有机会选中很久以前的帧（只要它和当前有重叠）。这对于<strong>回环检测（Loop Closure）</strong>非常重要——即使是 5 分钟前路过的地方，也有机会被选进来一起优化，从而消除累积误差。</p><h3 id="splatam-py-add-new-gaussians"><a href="#splatam-py-add-new-gaussians" class="headerlink" title="splatam.py/add_new_gaussians()"></a>splatam.py/add_new_gaussians()</h3><h4 id="在当前画面中，寻找哪些地方是“空的”或者“画错了的”"><a href="#在当前画面中，寻找哪些地方是“空的”或者“画错了的”" class="headerlink" title="在当前画面中，寻找哪些地方是“空的”或者“画错了的”"></a>在当前画面中，寻找哪些地方是“空的”或者“画错了的”</h4><ol><li>不透明度检查 (Silhouette Check)</li><li>深度检查 (Depth Check)</li></ol><h4 id="反投影"><a href="#反投影" class="headerlink" title="反投影"></a>反投影</h4><p>确定了位置后，把这些 2D 像素变回 3D 点</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_pt_cld, mean3_sq_dist = get_pointcloud(..., mask=non_presence_mask, ...)</span><br></pre></td></tr></table></figure><p>一、 输入</p><ul><li><p>curr_data[‘im’]：当前帧颜色（给新球上色）。</p></li><li><p>curr_data[‘depth’]：当前帧深度（决定新球在 3D 空间的 Z 轴位置）。</p></li><li><p>curr_w2c：当前相机位姿（把点从相机坐标系转回世界坐标系）。</p></li></ul><p>二、 动作</p><p>利用相机内参和深度值，把 Mask 为 True 的像素反向投射回 3D 空间</p><p>三、 输出</p><p>new_pt_cld: 一批全新的 3D 坐标点 $(x, y, z)$</p><h4 id="分配高斯球的属性，然后合并到总地图中"><a href="#分配高斯球的属性，然后合并到总地图中" class="headerlink" title="分配高斯球的属性，然后合并到总地图中"></a>分配高斯球的属性，然后合并到总地图中</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 初始化参数 (给新点分配颜色、大小、旋转)</span></span><br><span class="line">new_params = initialize_new_params(new_pt_cld, ...)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 合并到总参数 (Cat)</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> new_params.items():</span><br><span class="line">    <span class="comment"># 把新参数拼接到老参数后面</span></span><br><span class="line">    params[k] = torch.nn.Parameter(torch.cat((params[k], v), dim=<span class="number">0</span>).requires_grad_(<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 初始化优化器状态 (给新兵发装备)</span></span><br><span class="line">variables[<span class="string">&#x27;means2D_gradient_accum&#x27;</span>] = torch.zeros(...) <span class="comment"># 梯度累计清零</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure><h2 id="评估指标"><a href="#评估指标" class="headerlink" title="评估指标"></a>评估指标</h2><h3 id="Final-Average-ATE-RMSE"><a href="#Final-Average-ATE-RMSE" class="headerlink" title="Final Average ATE RMSE"></a>Final Average ATE RMSE</h3><p>全称：Absolute Trajectory Error (绝对轨迹误差) - Root Mean Square Error (均方根误差)<br>含义：衡量“电脑算出来的相机位置”和“真实相机位置”平均差了多远</p><h3 id="以下三个为一组（评价建出来的图，渲染成照片后，跟真实照片像不像的参数）"><a href="#以下三个为一组（评价建出来的图，渲染成照片后，跟真实照片像不像的参数）" class="headerlink" title="以下三个为一组（评价建出来的图，渲染成照片后，跟真实照片像不像的参数）"></a>以下三个为一组（评价建出来的图，渲染成照片后，跟真实照片像不像的参数）</h3><h4 id="Average-PSNR"><a href="#Average-PSNR" class="headerlink" title="Average PSNR"></a>Average PSNR</h4><p>全称：Peak Signal-to-Noise Ratio (峰值信噪比)<br>含义：像素级别的相似度。数值越大越好</p><h4 id="Average-MS-SSIM"><a href="#Average-MS-SSIM" class="headerlink" title="Average MS-SSIM"></a>Average MS-SSIM</h4><p>全称：Multi-Scale Structural Similarity Index (多尺度结构相似性)<br>含义：它比 PSNR 更聪明，它看重“结构”和“纹理”是否清晰。范围是 0~1，越接近 1 越好</p><h4 id="Average-LPIPS"><a href="#Average-LPIPS" class="headerlink" title="Average LPIPS"></a>Average LPIPS</h4><p>全称：Learned Perceptual Image Patch Similarity (学习感知图像块相似度)<br>含义：这是一个 AI 打分器（模仿人类视觉），数值越低越好（0 表示一模一样）</p><h3 id="Average-Depth-RMSE"><a href="#Average-Depth-RMSE" class="headerlink" title="Average Depth RMSE"></a>Average Depth RMSE</h3><p>含义：衡量建出来的 3D 模型表面，距离相机的深浅对不对。越小越好</p>]]></content>
      
      
      <categories>
          
          <category> 3D Reconstruction </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3DGS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpatiaLLM</title>
      <link href="/2026/01/29/SpatiaLLM/"/>
      <url>/2026/01/29/SpatiaLLM/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="vscode文件夹"><a href="#vscode文件夹" class="headerlink" title=".vscode文件夹"></a>.vscode文件夹</h2><p>虽然 launch.json 文件位于 .vscode 文件夹里，但 VS Code 调试器默认的工作目录 (Current Working Directory, CWD)是你的项目根目录（也就是你用 VS Code 打开的那个最外层文件夹），而不是 .vscode 文件夹</p><h2 id="Step-Over、Step-Into、Step-Out"><a href="#Step-Over、Step-Into、Step-Out" class="headerlink" title="Step Over、Step Into、Step Out"></a>Step Over、Step Into、Step Out</h2><p>Step Over (单步跳过):调试主函数时，调试器不会带你进入中间调用的函数内部,当你确信被调用函数是没问题的时候用<br><strong>Step Into (单步调试 / 进入)：</strong> 遇到被调用函数会进入函数内部<br>Step Out (单步跳出)：点击后，它会立即执行完当前被调用函数剩余的所有代码，然后直接跳回到主函数中调用它的地方的下一行</p><h2 id="Prompt-长什么样"><a href="#Prompt-长什么样" class="headerlink" title="Prompt 长什么样"></a>Prompt 长什么样</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prompt = <span class="string">&#x27;&lt;|point_start|&gt;&lt;|point_pad|&gt;&lt;|point_end|&gt;Detect walls, doors, windows, boxes. The reference code is as followed: @dataclass\nclass Wall:\n    ax: int\n    ay: int\n    az: int\n    bx: int\n    by: int\n    bz: int\n    height: int\n    thickness: int\n\n@dataclass\nclass Door:\n    wall_id: str\n    position_x: int\n    position_y: int\n    position_z: int\n    width: int\n    height: int\n\n@dataclass\nclass Window:\n    wall_id: str\n    position_x: int\n    position_y: int\n    position_z: int\n    width: int\n    height: int\n\n@dataclass\nclass Bbox:\n    class: str\n    position_x: int\n    position_y: int\n    position_z: int\n    angle_z: int\n    scale_x: int\n    scale_y: int\n    scale_z: int&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>视觉感知层 (&lt;|point_start|&gt;…)：</strong> 之前的 preprocess_point_cloud 生成的那个 Tensor（点云特征）会通过 Cross-Attention 或者 Embedding 注入到这里。模型读到这里时，它“看”到了房间的 3D 结构<br><strong>任务指令层 (Detect walls…)：</strong> 这是一个标准的 NLP 指令，告诉模型现在的任务是“检测”，而不是“描述房间风格”或者“数椅子”<br><strong>语法约束层（The reference code is as followed）：</strong> 利用了 LLM 强大的代码补全能力。Input: class Wall: … (定义)；Output: wall_1 = Wall(ax=10, ay=20…) (实例化/调用)</p><h2 id="关于generate-layout的输出"><a href="#关于generate-layout的输出" class="headerlink" title="关于generate_layout的输出"></a>关于generate_layout的输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">layout_str = <span class="string">&#x27;wall_0=Wall(2,2,2,132,2,2,136,0)\nwall_1=Wall(2,2,2,2,200,2,136,0)\nwall_2=Wall(132,2,2,132,170,2,136,0)\nwall_3=Wall(78,170,2,132,170,2,136,0)\nwall_4=Wall(78,170,2,78,200,2,136,0)\nwall_5=Wall(2,200,2,78,200,2,136,0)\ndoor_0=Door(wall_5,44,200,44,39,104)\nwindow_0=Window(wall_0,67,2,68,116,83)\nbbox_0=Bbox(curtain,67,6,68,639,207,12,133)\nbbox_1=Bbox(dressing_table,113,29,25,480,85,60,73)\nbbox_2=Bbox(bed,89,88,19,480,121,138,53)\nbbox_3=Bbox(painting,132,91,59,480,83,6,50)\nbbox_4=Bbox(nightstand,124,136,12,480,30,27,30)\nbbox_5=Bbox(wardrobe,105,159,51,320,87,35,155)&#x27;</span></span><br></pre></td></tr></table></figure><p>最后的输出layout（其实就是layout_str的转换）里面包含doors、windows、bboxes类</p><h3 id="具体的例子"><a href="#具体的例子" class="headerlink" title="具体的例子"></a>具体的例子</h3><p>Wall(id=5, ax=0.05, ay=5.0, az=0.05, bx=1.95, by=5.0, bz=0.05, height=2.72, thickness=0.0, entity_label=’wall’)<br>Door(id=0, wall_id=5, position_x=1.1, position_y=5.0, position_z=1.1, width=0.78, height=2.08, entity_label=’door’)</p><h4 id="Wall"><a href="#Wall" class="headerlink" title="Wall"></a>Wall</h4><p>ax,ay,az为起点，bx,by,bz为终点，可以看到连成的一条线是平行与x轴的一条直线。然后平行于Z轴延申height（即2.72米），垂直与这个墙面向左向右延申共thickness（这里是0米），这样就准确描述好了这个墙</p><h4 id="Door"><a href="#Door" class="headerlink" title="Door"></a>Door</h4><p>wall_id表示与门属于哪个墙<br>position_x,y,z表示其中心点位置<br>根据width向左右延申，height向上下延申，类似嵌入到墙里面，因此可以确定方向，厚度也与wall一致</p><h4 id="如下图所示"><a href="#如下图所示" class="headerlink" title="如下图所示"></a>如下图所示</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Z (高度)</span><br><span class="line">^</span><br><span class="line">|       ---------------------  &lt;- 墙顶 (2.77)</span><br><span class="line">|       |                   |</span><br><span class="line">|       |                   |</span><br><span class="line">|       |      _______      |  &lt;- 门顶 (2.14)</span><br><span class="line">|       |     |       |     |</span><br><span class="line">|       |     |       |     |</span><br><span class="line">|       |     |  Door |     |</span><br><span class="line">|       |     |_______|     |  &lt;- 门底 (0.06)</span><br><span class="line">|       -------=======-------  &lt;- 地板 (0.05)</span><br><span class="line">-------------------------------------&gt; X (水平位置)</span><br><span class="line">      0.05   0.71     1.49   1.95</span><br><span class="line">      (墙始)  (门始)   (门终) (墙终)</span><br></pre></td></tr></table></figure><h2 id="项目架构"><a href="#项目架构" class="headerlink" title="项目架构"></a>项目架构</h2><h3 id="感知层（Sonata编码器）"><a href="#感知层（Sonata编码器）" class="headerlink" title="感知层（Sonata编码器）"></a>感知层（Sonata编码器）</h3><h4 id="对应-spatiallm-model-spatiallm-qwen-py-60行附近"><a href="#对应-spatiallm-model-spatiallm-qwen-py-60行附近" class="headerlink" title="对应 spatiallm/model/spatiallm_qwen.py 60行附近"></a>对应 spatiallm/model/spatiallm_qwen.py 60行附近</h4><p>为了让 LLM 看懂 3D 点云，必须先用一个 Encoder 把 N 个点的点云变成 K 个特征向量<br>注：inference.py 里的 preprocess_point_cloud 把点云变成了 Grid（网格）格式，这正是为了喂给这个 Encoder</p><h3 id="翻译层（MLP）"><a href="#翻译层（MLP）" class="headerlink" title="翻译层（MLP）"></a>翻译层（MLP）</h3><h4 id="对应-spatiallm-model-spatiallm-qwen-py-83行附近"><a href="#对应-spatiallm-model-spatiallm-qwen-py-83行附近" class="headerlink" title="对应 spatiallm/model/spatiallm_qwen.py 83行附近"></a>对应 spatiallm/model/spatiallm_qwen.py 83行附近</h4><p>把 3D 特征向量“翻译”成 LLM 能理解的 Token Embeddings</p><h3 id="大脑层（LLM）"><a href="#大脑层（LLM）" class="headerlink" title="大脑层（LLM）"></a>大脑层（LLM）</h3><p>使用了通用的开源 LLM（如 Qwen2.5 或 Llama），看到特定的 3D 特征后，输出特定的 Python 代码格式</p><p>注：spatiallm/model/spatiallm_qwen.py 248行附近有一个拼接的操作，把文本里原本用来占位的无效向量（Padding）剪掉， 把 Sonata 算出来的 3D 特征向量粘贴进去</p><table><thead><tr><th align="left">阶段</th><th align="left">数据形态</th><th align="left">执行者 (Component)</th><th align="left">核心动作 (Action)</th></tr></thead><tbody><tr><td align="left"><strong>1. 采集 (Input)</strong></td><td align="left"><code>.ply</code> 文件 <br> <em>(原始 3D 点云)</em></td><td align="left">Python (Open3D)</td><td align="left"><strong>读取与预处理</strong>   <br> 将点云量化并网格化 (Voxelization)</td></tr><tr><td align="left"><strong>2. 编码 (Encode)</strong></td><td align="left"><strong>Tensor 向量序列</strong> <br> <em>(Visual Embeddings)</em></td><td align="left"><strong>Sonata Encoder</strong></td><td align="left"><strong>特征提取</strong> <br> 将几十万个离散点压缩成几百个高维特征向量</td></tr><tr><td align="left"><strong>3. 提示 (Prompt)</strong></td><td align="left">文本向量序列 <br> <em>(Text Embeddings)</em></td><td align="left">Tokenizer</td><td align="left"><strong>指令注入</strong> <br> 将 “Detect walls…” 文本转为向量</td></tr><tr><td align="left"><strong>4. 融合 (Fusion)</strong></td><td align="left"><strong>混合多模态向量</strong> <br> <em>(Input Embeddings)</em></td><td align="left"><code>spatiallm_qwen.py</code></td><td align="left"><strong>移花接木 (Concatenation)</strong> <br> 剪掉 Prompt 中的占位符，填入 3D 特征向量</td></tr><tr><td align="left"><strong>5. 思考 (Reasoning)</strong></td><td align="left">Logits (概率分布)</td><td align="left"><strong>LLM (Qwen)</strong></td><td align="left"><strong>自回归预测 (Next Token Prediction)</strong> <br> 结合视觉特征与先验知识，逐个预测字符</td></tr><tr><td align="left"><strong>6. 输出 (Decode)</strong></td><td align="left"><strong>文本字符串</strong> <br> <em>(<code>wall_0=Wall(...)</code>)</em></td><td align="left">Tokenizer</td><td align="left"><strong>解码</strong> <br> 将预测的 Token ID 变回人类可读的字符串</td></tr><tr><td align="left"><strong>7. 还原 (Deserialize)</strong></td><td align="left"><strong>Python 对象</strong> <br> <em>(<code>Wall</code> Instance)</em></td><td align="left"><code>layout.py</code></td><td align="left"><strong>反序列化 (Parsing)</strong> <br> 解析字符串，实例化为内存中的 3D 对象</td></tr></tbody></table><p>注：Encoder负责把 3D 世界 压缩 成 LLM 能理解的数学特征，而LLM负责把这些数学特征 翻译 成符合 Python 语法的、有逻辑的布局代码，还会预测看不见的地方</p><h2 id="Loss-计算"><a href="#Loss-计算" class="headerlink" title="Loss 计算"></a>Loss 计算</h2><h3 id="对应-spatiallm-tuner-trainer-py-44行附近"><a href="#对应-spatiallm-tuner-trainer-py-44行附近" class="headerlink" title="对应 spatiallm/tuner/trainer.py 44行附近"></a>对应 spatiallm/tuner/trainer.py 44行附近</h3><p>直接使用了父类（以及模型内部 spatiallm_qwen.py）的标准 Loss 计算逻辑：Cross Entropy Loss (交叉熵损失)</p><h2 id="数据流水线（那些杂乱的-ply-文件和-txt-标注，到底经历了什么，才变成了模型能吃的-Tensor？）"><a href="#数据流水线（那些杂乱的-ply-文件和-txt-标注，到底经历了什么，才变成了模型能吃的-Tensor？）" class="headerlink" title="数据流水线（那些杂乱的 .ply 文件和 .txt 标注，到底经历了什么，才变成了模型能吃的 Tensor？）"></a>数据流水线（那些杂乱的 .ply 文件和 .txt 标注，到底经历了什么，才变成了模型能吃的 Tensor？）</h2><h3 id="mm-plugin-py的三大核心职能"><a href="#mm-plugin-py的三大核心职能" class="headerlink" title="mm_plugin.py的三大核心职能"></a>mm_plugin.py的三大核心职能</h3><h3 id="数据增强"><a href="#数据增强" class="headerlink" title="数据增强"></a>数据增强</h3><h4 id="对应42行附近"><a href="#对应42行附近" class="headerlink" title="对应42行附近"></a>对应42行附近</h4><p>颜色干扰： ChromaticJitter (改颜色), RandomColorGrayScale (变黑白)<br>几何干扰： RandomJitter, ElasticDistortion。给点云加噪声、扭曲它。模拟现实中传感器扫描不准的情况<br>随机旋转： self.random_rotation</p><h3 id="格式化：体素化"><a href="#格式化：体素化" class="headerlink" title="格式化：体素化"></a>格式化：体素化</h3><h4 id="对应67行附近"><a href="#对应67行附近" class="headerlink" title="对应67行附近"></a>对应67行附近</h4><p>模型吃不下无限精度的浮点数坐标 (x=1.23456…)。它需要把空间切成格子<br>输出返回 grid_coord (整数索引) 和 coord (原始偏移量)。Sonata Encoder 主要是对这些整数格子进行卷积处理</p><h3 id="文本与点云的“同步旋转”"><a href="#文本与点云的“同步旋转”" class="headerlink" title="文本与点云的“同步旋转”"></a>文本与点云的“同步旋转”</h3><h4 id="对应227行附近"><a href="#对应227行附近" class="headerlink" title="对应227行附近"></a>对应227行附近</h4><p>同步变换：点云怎么转和缩放，Layout 对象就怎么转和缩放</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>输入的是ply文件，也就是原始的3D点云，在mm_plugin.py文件中进行处理，比如数据增强（训练时增加了干扰）、体素化（把空间分成一个个格子，把点云的信息变成格子的信息）；随后在spatiallm_qwen.py文件中，使用Sonata进行编码，把点云变成特征向量；然后把对模型的指令和输出的模板也变成特征向量，并把点云信息转换的特征向量和这些拼接起来（用的字符串分割），形成完整的prompt，输入到LLM中。<br>LLM对看到的信息进行处理（理解），对看不到的信息做出预测，生成python代码（即inference中的layout），生成scene0000_00.txt文件，内容比如：<br>Wall(id=5, ax=0.05, ay=5.0, az=0.05, bx=1.95, by=5.0, bz=0.05, height=2.72, thickness=0.0, entity_label=’wall’)<br>Door(id=0, wall_id=5, position_x=1.1, position_y=5.0, position_z=1.1, width=0.78, height=2.08, entity_label=’door’)<br>最后进行对LLM的输出进行后处理，进行可视化：加载点云ply文件，然后把LLM的输出layout转化成Rerun能理解的格式，可以在Rerun上渲染出来</p>]]></content>
      
      
      <categories>
          
          <category> 3D Reconstruction </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3DGS </tag>
            
            <tag> LLM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VS Code Remote SSH + SSH ProxyJump 实现内网穿透</title>
      <link href="/2026/01/14/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%95%99%E7%A8%8B/"/>
      <url>/2026/01/14/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>最近闲着没事干，刚好实验室给我们配了一个新电脑，实验室也有一台服务器，但是只有连上实验室的网络才能连上服务器，我们实验室又不在学校这边，因此连服务器很不方便。听同学说可以内网穿透什么的，遂尝试下。<br>需要什么：云服务器、实验室电脑、实验室服务器、宿舍电脑<br>效果如何：让宿舍电脑通过实验室电脑连上实验室的服务器，在宿舍也能使用上实验室的服务器</p><p>首先是github搜索下载frp，实验室电脑和云服务器都要下载，一个作为客户端一个作为服务端</p><h2 id="云服务器配置：建立中转站，打通外部流量入口"><a href="#云服务器配置：建立中转站，打通外部流量入口" class="headerlink" title="云服务器配置：建立中转站，打通外部流量入口"></a>云服务器配置：建立中转站，打通外部流量入口</h2><h3 id="添加防火墙规则"><a href="#添加防火墙规则" class="headerlink" title="添加防火墙规则"></a>添加防火墙规则</h3><p>以aliyun为例，在网络与安全组中的防火墙规则，添加入方向规则，访问来源填0.0.0.0/0，端口填2222</p><p>注1：有的端口不一定行，我之前开的端口是7000就不行，可能是被实验室的防火墙给拦截了，最好用常用些的端口，不过也不能用已经被占用的<br>注2：开放端口后试一下：可以在自己电脑的PowerShell中输入：Test-NetConnection 云服务器公网IP地址 -Port 2222<br>注3：可以在云服务器中运行firewall-cmd –list-ports看看有没有成功配置防火墙规则</p><h3 id="配置frps-toml（frps是服务端软件，而frpc是客户端的，这里不用管）"><a href="#配置frps-toml（frps是服务端软件，而frpc是客户端的，这里不用管）" class="headerlink" title="配置frps.toml（frps是服务端软件，而frpc是客户端的，这里不用管）"></a>配置frps.toml（frps是服务端软件，而frpc是客户端的，这里不用管）</h3><p>文件内写入：<br>bindAddr = “0.0.0.0”<br>bindPort = 2222  # 这里改成了 2222</p><p>注1：在某些云服务器镜像中，如果程序只绑定了 IPv6，IPv4 的流量是进不来的</p><h3 id="后台运行frp"><a href="#后台运行frp" class="headerlink" title="后台运行frp"></a>后台运行frp</h3><p>命令行输入：nohup ./frps -c frps.toml &gt; frps.log 2&gt;&amp;1 &amp;</p><h2 id="实验室电脑（windows）配置：把内网大门打开，并具备转发能力"><a href="#实验室电脑（windows）配置：把内网大门打开，并具备转发能力" class="headerlink" title="实验室电脑（windows）配置：把内网大门打开，并具备转发能力"></a>实验室电脑（windows）配置：把内网大门打开，并具备转发能力</h2><h3 id="配置-frpc-toml"><a href="#配置-frpc-toml" class="headerlink" title="配置 frpc.toml"></a>配置 frpc.toml</h3><p>文件中写入：<br>serverAddr = “47.98.x.x” # 你的 VPS 公网 IP<br>serverPort = 2222        # 对应服务端端口</p><p>[[proxies]]<br>name = “ssh-lab”<br>type = “tcp”<br>localIP = “127.0.0.1”<br>localPort = 22<br>remotePort = 6000        # 宿舍电脑连接的端口</p><h3 id="安装必要组件"><a href="#安装必要组件" class="headerlink" title="安装必要组件"></a>安装必要组件</h3><p>以下三条命令在PowerShell中输入</p><p>OpenSSH Server (用于接收宿舍的连接)：Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0<br>OpenSSH Client (用于发起对服务器的连接)：Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0<br>重启服务：Start-Service sshd</p><h3 id="使用-NSSM-将-FRP-注册为系统服务"><a href="#使用-NSSM-将-FRP-注册为系统服务" class="headerlink" title="使用 NSSM 将 FRP 注册为系统服务"></a>使用 NSSM 将 FRP 注册为系统服务</h3><p>下载解压 NSSM ，把 nssm.exe 复制到你存放 frpc.exe 的那个文件夹里，在文件夹的PowerShell中输入：.\nssm.exe install frpc<br>然后会弹出窗口配置 nssm ，其中 path 选择你的 frpc.exe ，参数填-c frpc.toml，然后点安装服务。最后在PowerShell中输入：Start-Service frpc</p><p>注1：最好设置开机自启NSSM</p><h2 id="宿舍电脑配置：一键直连，免密登录，像操作本地文件一样操作服务器"><a href="#宿舍电脑配置：一键直连，免密登录，像操作本地文件一样操作服务器" class="headerlink" title="宿舍电脑配置：一键直连，免密登录，像操作本地文件一样操作服务器"></a>宿舍电脑配置：一键直连，免密登录，像操作本地文件一样操作服务器</h2><p>注1：以下操作均在C:\Users\用户.ssh文件下</p><h3 id="准备密钥"><a href="#准备密钥" class="headerlink" title="准备密钥"></a>准备密钥</h3><p>从实验室电脑取回私钥文件 (id_rsa_lab)，保存到宿舍电脑 C:\Users\用户.ssh\id_rsa_lab</p><h3 id="VsCode配置（-ssh-config）"><a href="#VsCode配置（-ssh-config）" class="headerlink" title="VsCode配置（.ssh/config）"></a>VsCode配置（.ssh/config）</h3><p> === 第一跳：连接实验室电脑 (通过 VPS) ===<br>Host lab-pc-relay<br>    HostName 47.98.x.x<br>    User &lt;实验室电脑Windows用户名&gt;<br>    Port 6000</p><p> === 第二跳：最终连接 GPU 服务器 ===<br>Host lab-server-gpu<br>    HostName &lt;服务器内网IP&gt;<br>    User &lt;服务器Linux用户名&gt;<br>    IdentityFile “C:\Users\你的用户.ssh\id_rsa_lab”<br>    ProxyCommand C:\Windows\System32\OpenSSH\ssh.exe -q -W %h:%p lab-pc-relay</p><p>注1：需要把宿舍电脑的 公钥 (Public Key) 放到实验室电脑里，也就是.ssh/id_rsa.pub的内容复制到实验室电脑.ssh/authorized_keys中<br>注2：这部分最好要知道VsCode如何远程连接服务器<br>注3：不懂的可以问AI</p>]]></content>
      
      
      <categories>
          
          <category> Base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux命令</title>
      <link href="/2022/04/22/linux%E5%91%BD%E4%BB%A4/"/>
      <url>/2022/04/22/linux%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://blog.csdn.net/weixin_44191814/article/details/120091363?spm=1001.2101.3001.6650.4&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4.pc_relevant_paycolumn_v3&utm_relevant_index=7">参考文章</a></p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="Linux文件目录结构"><a href="#Linux文件目录结构" class="headerlink" title="Linux文件目录结构"></a>Linux文件目录结构</h3><p><img src="/2022/04/22/linux%E5%91%BD%E4%BB%A4/linux_file_structure.jpg" alt="linux文件目录结构"></p><h3 id="简单系统命令"><a href="#简单系统命令" class="headerlink" title="简单系统命令"></a>简单系统命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.查看ip地址</span><br><span class="line">ip a</span><br><span class="line">2.ping网络(测试网络连通)</span><br><span class="line">ip 目标机器的ip</span><br><span class="line">3.查看系统时间</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line">4.注销</span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line">5.关机</span><br><span class="line">shutdown now</span><br><span class="line">6.重启</span><br><span class="line">reboot</span><br><span class="line">7.清屏</span><br><span class="line">clear</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="文件相关命令"><a href="#文件相关命令" class="headerlink" title="文件相关命令"></a>文件相关命令</h3><h4 id="文件管理命令"><a href="#文件管理命令" class="headerlink" title="文件管理命令"></a>文件管理命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1.查看文件列表</span><br><span class="line">ls [-参数1参数2] [目标文件夹]</span><br><span class="line">-l 查看详细信息，元数据信息(用户、组、大小、创建时间、权限信息、文件类型)</span><br><span class="line">-a 查看隐藏文件</span><br><span class="line">2.切换目录</span><br><span class="line">cd 目标文件夹</span><br><span class="line">3.查看当前命令所在的目录</span><br><span class="line">pwd</span><br><span class="line">~ 当前用户的home目录</span><br><span class="line">. 当前目录</span><br><span class="line">.. 上一级目录</span><br><span class="line">4.新建文件夹及文件</span><br><span class="line">在当前位置新建文件夹</span><br><span class="line">mkdir 文件夹名</span><br><span class="line">在指定目录位置，创建文件夹，并创建父文件夹</span><br><span class="line">mkdir -p /a/b/文件夹名</span><br><span class="line">在当前目录下新建文件</span><br><span class="line">touch 文件名</span><br><span class="line">5.删除文件</span><br><span class="line">rm [-参数1参数2] 文件名</span><br><span class="line">-r 删除文件夹</span><br><span class="line">-rf 强制删除不询问</span><br><span class="line">6.拷贝文件</span><br><span class="line">cp 原文件  新文件</span><br><span class="line">-r 拷贝文件夹</span><br><span class="line">7.移动文件或修改文件名</span><br><span class="line">mv 文件  文件夹</span><br></pre></td></tr></table></figure><h4 id="文本内容查看命令"><a href="#文本内容查看命令" class="headerlink" title="文本内容查看命令"></a>文本内容查看命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.cat</span><br><span class="line">查看文件中的全部信息(适合查看小文档)</span><br><span class="line">2.less</span><br><span class="line">以分页的方式浏览文件信息(适合查看大文档)，进入浏览模式</span><br><span class="line">浏览模式快捷键</span><br><span class="line">↑ 上一行</span><br><span class="line">↓ 下一行</span><br><span class="line">G 第一页</span><br><span class="line">g 最后一页</span><br><span class="line">空格 下一页</span><br><span class="line">/关键词 搜索关键词</span><br><span class="line">q 退出</span><br><span class="line">3.tail</span><br><span class="line">实时滚动显示文件的最后10行信息(默认10行)</span><br><span class="line">tail -f 文件名</span><br><span class="line">显示文件的最后20行信息</span><br><span class="line">tail -n 20 文件名</span><br><span class="line">tail -n -20 文件名</span><br><span class="line">显示文件信息从第20行至文件末尾</span><br><span class="line">tail -n +20 文件名</span><br></pre></td></tr></table></figure><h4 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.查找文件名</span><br><span class="line">find 搜索路径 -name &quot;文件名关键词&quot;</span><br><span class="line">2.查找文件内容</span><br><span class="line">grep -参数 要查找的目录范围</span><br><span class="line">-n 显示查找结果所在行号</span><br><span class="line">-R 递归查找目录下的所有文件</span><br></pre></td></tr></table></figure><h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">将命令1的执行结果，输出到后面的文件中</span><br><span class="line">1.覆盖写入</span><br><span class="line">命令1 &gt; 文件</span><br><span class="line">2.追加写入</span><br><span class="line">命令1 &gt;&gt; 文件</span><br></pre></td></tr></table></figure><h3 id="进程相关命令"><a href="#进程相关命令" class="headerlink" title="进程相关命令"></a>进程相关命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.ps -aux</span><br><span class="line">静态查看系统进程</span><br><span class="line">2.top</span><br><span class="line">实时查看系统进程</span><br><span class="line">↑ 下翻</span><br><span class="line">↓ 上翻</span><br><span class="line">q 退出</span><br><span class="line">3.kill 进程id</span><br><span class="line">关闭进程</span><br></pre></td></tr></table></figure><h3 id="权限相关命令"><a href="#权限相关命令" class="headerlink" title="权限相关命令"></a>权限相关命令</h3><p><img src="/2022/04/22/linux%E5%91%BD%E4%BB%A4/user_permission_illustrate.jpg" alt="用户权限说明"></p><h4 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 创建组</span><br><span class="line">groupadd 组名</span><br><span class="line">2. 删除组</span><br><span class="line">groupdel 组名</span><br><span class="line">3. 查找系统中的组</span><br><span class="line">cat /etc/group | grep -n “组名”</span><br><span class="line">说明：系统每个组信息都会被存放在/etc/group的文件中</span><br></pre></td></tr></table></figure><h4 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.创建用户</span><br><span class="line">useradd -g 组名 用户名</span><br><span class="line">2.设置密码</span><br><span class="line">passwd 用户名</span><br><span class="line">3.切换用户</span><br><span class="line">su 用户名</span><br><span class="line">4.删除用户</span><br><span class="line">userdel -r 用户名</span><br><span class="line">系统每个用户信息保存在/etc/passwd文件中</span><br></pre></td></tr></table></figure><h4 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.设置文件所有者</span><br><span class="line">语法：chown [-R] user名:group名 文件名</span><br><span class="line">参数：-R 如果是文件夹，需要使用这个参数，可以将文件夹及其内部所有文件的所有者和组全部修改</span><br><span class="line">注意：命令权限需要root</span><br><span class="line">修改文件所有者</span><br><span class="line">chown 用户名 文件名</span><br><span class="line">修改文件所属组</span><br><span class="line">chown :组名 文件名</span><br><span class="line">修改文件所有者和所属组</span><br><span class="line">chown 用户名:组名 文件名</span><br><span class="line">修改文件夹的所有者和所属组</span><br><span class="line">chown [-R] 用户名:组名 文件夹</span><br><span class="line">2.权限设置</span><br><span class="line">语法：chmod u±rwx,g±rwx,o±rwx 文件名</span><br><span class="line">运算符：</span><br><span class="line">- 删除权限</span><br><span class="line">+ 添加权限</span><br><span class="line">= 赋值权限</span><br><span class="line">给文件的所有者添加执行权限</span><br><span class="line">chmod u+x 文件名</span><br><span class="line">给文件的其他人删除所有权限</span><br><span class="line">chmod o-rwx 文件名</span><br><span class="line">给文件的所属组设置读写权限</span><br><span class="line">chmod g=wx 文件名</span><br></pre></td></tr></table></figure><h3 id="软件相关命令"><a href="#软件相关命令" class="headerlink" title="软件相关命令"></a>软件相关命令</h3><h4 id="压缩与解压"><a href="#压缩与解压" class="headerlink" title="压缩与解压"></a>压缩与解压</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.压缩</span><br><span class="line">tar -zcvf 压缩后文件名 被压缩文件</span><br><span class="line">2.解压缩</span><br><span class="line">tar -zxvf 压缩文件名 -C 解压后文件所在目录</span><br></pre></td></tr></table></figure><p><img src="/2022/04/22/linux%E5%91%BD%E4%BB%A4/compressed_parameter.jpg" alt="压缩与解压缩参数说明"></p><h4 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.安装rpm软件</span><br><span class="line">rpm -ivh xxx.rpm</span><br><span class="line">2.查看系统中是否已安装的过该rpm软件</span><br><span class="line">rpm -qa 软件名</span><br><span class="line">3.卸载rpm软件</span><br><span class="line">rpm -e 软件名</span><br></pre></td></tr></table></figure><h4 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum基于rpm实现的，提供了除了rpm的安装软件、卸载软件等功能以外还有，自动查找、下载软件并自动处理软件的彼此之间的依赖关系，下载并安装依赖包。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.列出所有可以安装的软件包</span><br><span class="line">yum list</span><br><span class="line">2.安装软件</span><br><span class="line">yum install -y 软件名</span><br><span class="line">3.卸载软件</span><br><span class="line">yum remove 软件名</span><br><span class="line">4.查找软件包</span><br><span class="line">yum search all 软件名</span><br></pre></td></tr></table></figure><h4 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.服务器管理命令</span><br><span class="line">systemctl status 服务名</span><br><span class="line">2.启动服务</span><br><span class="line">systemctl start 服务名</span><br><span class="line">3.重启服务</span><br><span class="line">systemctl restart 服务名</span><br><span class="line">4.停止服务</span><br><span class="line">systemctl stop 服务名</span><br><span class="line">5.禁止服务随linux启动。</span><br><span class="line">systemctl disable 服务名</span><br><span class="line">6.设置服务随linux启动。</span><br><span class="line">systemctl enable 服务名</span><br><span class="line">如防火墙的服务名为firewalld</span><br></pre></td></tr></table></figure><h4 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh [-p port] user@remote</span><br><span class="line">user 是在远程机器上的用户名，如果不指定的话默认为当前用户</span><br><span class="line">remote 是远程机器的地址，可以是IP/域名，或者是别名</span><br><span class="line">port 是SSH Server监听的端口，如果不指定，就为默认值22</span><br></pre></td></tr></table></figure><h4 id="SCP"><a href="#SCP" class="headerlink" title="SCP"></a>SCP</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp [可选参数] file_source file_target</span><br><span class="line">-r 复制目录</span><br><span class="line">如本地文件复制到远程：scp local_file remote_username@remote_ip:remote_folder </span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot+SpringMVC+Mybatis实现网上书城系统</title>
      <link href="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="功能说明"><a href="#功能说明" class="headerlink" title="功能说明"></a>功能说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.用户注册、登录登出以及修改个人资料</span><br><span class="line">2.书籍分类显示、热销书籍及新品展示</span><br><span class="line">3.将书籍放入购物车或直接购买</span><br><span class="line">4.权限拦截</span><br><span class="line">5.推荐书籍</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p><img src="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/project_structure.jpg" alt="项目结构"></p><p><img src="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/project_structure_java.jpg" alt="项目结构-Java部分"></p><p><img src="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/project_structure_thymeleaf.jpg" alt="项目结构-Thymeleaf部分"></p><h3 id="数据表结构"><a href="#数据表结构" class="headerlink" title="数据表结构"></a>数据表结构</h3><h4 id="user"><a href="#user" class="headerlink" title="user"></a>user</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span>  `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;用户id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户电话&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户地址&#x27;</span>,</span><br><span class="line">  `avatar` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户头像地址&#x27;</span>,</span><br><span class="line">  `vip` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;VIP信息&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="book"><a href="#book" class="headerlink" title="book"></a>book</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span>  `book` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;书籍id&#x27;</span>,</span><br><span class="line">  `booknumber` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍编号&#x27;</span>,</span><br><span class="line">  `bookname` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍名称&#x27;</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;作者&#x27;</span>,</span><br><span class="line">  `category` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍类别&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍价格&#x27;</span>,</span><br><span class="line">  `number` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍数量&#x27;</span>,</span><br><span class="line">  `soldoutnumber` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍已购数量&#x27;</span>,</span><br><span class="line">  `description` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍描述&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;上架时间&#x27;</span>,</span><br><span class="line">  `picture` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍图片地址&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="trolley"><a href="#trolley" class="headerlink" title="trolley"></a>trolley</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span>  `trolley` (</span><br><span class="line">    `id` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;书籍id&#x27;</span>,</span><br><span class="line">  `booknumber` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍编号&#x27;</span>,</span><br><span class="line">  `bookname` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍名称&#x27;</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;作者&#x27;</span>,</span><br><span class="line">  `category` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍类别&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍价格&#x27;</span>,</span><br><span class="line">  `number` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍数量&#x27;</span>,</span><br><span class="line">  `soldoutnumber` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍已购数量&#x27;</span>,</span><br><span class="line">  `description` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍描述&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;上架时间&#x27;</span>,</span><br><span class="line">  `picture` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍图片地址&#x27;</span>,</span><br><span class="line">  `putintime` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;放入购物车时间&#x27;</span>,</span><br><span class="line">  `purchasenumber` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;购买数量&#x27;</span>,</span><br><span class="line">  `note` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;备注&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="order"><a href="#order" class="headerlink" title="order"></a>order</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span>  `<span class="keyword">order</span>` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;订单id&#x27;</span>,</span><br><span class="line">  `orderid` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;订单编号&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  `bookid` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;书籍id&#x27;</span>,</span><br><span class="line">  `booknumber` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍编号&#x27;</span>,</span><br><span class="line">  `bookname` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍名称&#x27;</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;作者&#x27;</span>,</span><br><span class="line">  `category` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍类别&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍价格&#x27;</span>,</span><br><span class="line">  `number` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍数量&#x27;</span>,</span><br><span class="line">  `soldoutnumber` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍已购数量&#x27;</span>,</span><br><span class="line">  `description` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍描述&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;上架时间&#x27;</span>,</span><br><span class="line">  `picture` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;书籍图片地址&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  `userid` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT NULL</span>  COMMENT <span class="string">&#x27;用户id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户电话&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户地址&#x27;</span>,</span><br><span class="line">  `avatar` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户头像地址&#x27;</span>,</span><br><span class="line">  `vip` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;VIP信息&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  `purchasetime` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;购买时间&#x27;</span>,</span><br><span class="line">  `purchasenumber` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;购买数量&#x27;</span>,</span><br><span class="line">  `note` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;备注&#x27;</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="后端实现"><a href="#后端实现" class="headerlink" title="后端实现"></a>后端实现</h3><h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a><a href="https://www.cnblogs.com/little-rain/p/11063967.html">环境搭建</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.左侧选择Spring Initializr时，右侧选择Default:https://start.spring.io/若是出现无法加载情况，可选择Custom:，然后输入https://start.aliyun.com/</span><br><span class="line">2.勾选依赖时可只选择Web下的Spring Web Starter</span><br></pre></td></tr></table></figure><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mysql驱动依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatis整合springboot框架的起步依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--thymeleaf 模板依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 生产图片验证码依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.penggle<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kaptcha<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--   Shiro   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--支付宝支付依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alipay.sdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alipay-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.8.10.ALL<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--邮件发送--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--自动编译--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis自动生成代码的插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置文件的位置（类路径下）--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>GeneratorConfig.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--手动指定某些文件夹为resource文件夹，使其下的某些文件也被编译--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--所有sql映射文件在该目录下--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Mybatis逆向工程"><a href="#Mybatis逆向工程" class="headerlink" title="Mybatis逆向工程"></a>Mybatis逆向工程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.pom.xml文件添加插件和指定resource文件夹（在上述步骤中已实现）</span><br><span class="line">2.数据库配置信息</span><br><span class="line">3.根目录下新建XML文件GeneratorConfig.xml</span><br><span class="line">4.双击运行插件</span><br></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置数据库连接信息</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/bookcity?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">bookcity</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">lz2001031910167</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定连接数据库的jdbc驱动jar包所在位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">&quot;D:\Java\mysql-connector-java-8.0.23\mysql-connector-java-8.0.23.jar&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置table信息体内容，指定采取mybatis3的版本--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;MyGenerator&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span> <span class="attr">defaultModelType</span>=<span class="string">&quot;flat&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--去掉自动生成的注释和时间戳--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressDate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置数据库连接信息--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/bookcity?</span></span></span><br><span class="line"><span class="string"><span class="tag">serverTimezone=GMT%2B8&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;bookcity&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;lz2001031910167&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--高版本mysql驱动连接低版本mysql数据库需要此属性为true，建议每次都加--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;nullCatalogMeansCurrent&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JAVA JDBC数据类型转换--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        三大生成器</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--javaBean(实体类)生成器，targetPackage指定实体类的包名，targetProject指定输出在哪个文件夹</span></span><br><span class="line"><span class="comment">        下--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--直接在targetPackage包下生成sql映射文件，而不生成scheme名称的子包--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--把char类型数据中未填写的位裁剪掉--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--sql映射文件生成器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.ujs.bookcitydemo.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--DAO接口生成器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.ujs.bookcitydemo.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        进行逆向映射的表，tableName为数据库中表名，domainObjectName为要生成的实体类的名称</span></span><br><span class="line"><span class="comment">        有几个表加几个table标签</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;table tableName=&quot;user&quot; domainObjectName=&quot;User&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableCountByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableUpdateByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableDeleteByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableSelectByExample=&quot;false&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               selectByExampleQueryId=&quot;false&quot; /&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;book&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Book&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;trolley&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Trolley&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;order&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Order&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/mybatis-generator-plugin.jpg" alt="运行Mybatis插件"></p><h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><h5 id="IndexController"><a href="#IndexController" class="headerlink" title="IndexController"></a>IndexController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.Apriori;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.ListUtil;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.BookService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.OrderService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/404&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterError</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error/404&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(Model model, HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);<span class="comment">//创建session对象</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;USER_INFO&quot;</span>,user);<span class="comment">//把用户数据保存到session对象中</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取前十个新品数据和热销数据并保存到session中</span></span><br><span class="line">        List&lt;Book&gt; newBookListsLimitTen=bookService.getBookListsLimitTen(<span class="string">&quot;新品&quot;</span>);</span><br><span class="line">        List&lt;Book&gt; hotBookListsLimitTen=bookService.getBookListsLimitTen(<span class="string">&quot;热销&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;NEWBOOK_LIST&quot;</span>,newBookListsLimitTen);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;HOTBOOK_LIST&quot;</span>,hotBookListsLimitTen);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取所有用户信息</span></span><br><span class="line">        List&lt;User&gt; userLists=userService.getAllUser();</span><br><span class="line">        <span class="comment">//获取所有用户的所有订单信息</span></span><br><span class="line">        ArrayList&lt;List&lt;Order&gt;&gt; orderLists=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;List&lt;Order&gt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (User u: userLists) &#123;</span><br><span class="line">            orderLists.add(orderService.getAllOrder(u.getId()+<span class="string">&quot;_order&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据Apriori算法获取推荐数据</span></span><br><span class="line">        Apriori apriori=<span class="keyword">new</span> <span class="title class_">Apriori</span>();</span><br><span class="line">        HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; recommendData=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt;();</span><br><span class="line">        recommendData=apriori.getResult(userLists,orderLists);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//获取用户所有订单信息</span></span><br><span class="line">            List&lt;Order&gt; orderList= orderService.getAllOrder();</span><br><span class="line">            <span class="comment">//存放应该推荐的书籍id</span></span><br><span class="line">            ArrayList&lt;Object&gt; recommendBookIdListObject = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            List&lt;String&gt; recommendBookIdList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">            Set&lt;Map.Entry&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt;&gt; entrySet = recommendData.entrySet();</span><br><span class="line">            Iterator&lt;Map.Entry&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt;&gt; it = entrySet.iterator();</span><br><span class="line">            Map.Entry&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; entry;</span><br><span class="line">            <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">                entry = it.next();</span><br><span class="line">                <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">                <span class="comment">//若用户购买的书籍数大于规则条件，则进行比较</span></span><br><span class="line">                <span class="keyword">if</span>(orderList.size()&gt;entry.getKey().size())&#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; orderList.size(); i++) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (String key: entry.getKey()) &#123;</span><br><span class="line">                            <span class="keyword">if</span>(key.equals(orderList.get(i).getBookid()))&#123;</span><br><span class="line">                                count++;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//若满足规则的条件，则将条件得出的结论放入recommendBookIdListObject中</span></span><br><span class="line">                    <span class="keyword">if</span>(count==entry.getKey().size())&#123;</span><br><span class="line">                        recommendBookIdListObject.add(entry.getValue());</span><br><span class="line">                        recommendBookIdList.addAll(entry.getValue());</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"><span class="comment">//                System.out.println(entry.getKey()+&quot;:&quot;+entry.getValue());</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//除去重复书籍id</span></span><br><span class="line">            ListUtil listUtil=<span class="keyword">new</span> <span class="title class_">ListUtil</span>();</span><br><span class="line">            recommendBookIdList=listUtil.removeDuplicate(recommendBookIdList);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//由书籍ID获取数据</span></span><br><span class="line">            List&lt;Book&gt; recommendBookList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">            <span class="keyword">for</span> (String s:recommendBookIdList) &#123;</span><br><span class="line">                recommendBookList.add(bookService.selectByPrimaryKey(s));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//如果推荐书籍数不足3</span></span><br><span class="line">            <span class="keyword">switch</span> (recommendBookIdList.size())&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: recommendBookList=hotBookListsLimitTen;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>: recommendBookList.add(hotBookListsLimitTen.get(<span class="number">0</span>));recommendBookList.add(hotBookListsLimitTen.get(<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: recommendBookList.add(hotBookListsLimitTen.get(<span class="number">0</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//将推荐书籍放入session中</span></span><br><span class="line">            session.setAttribute(<span class="string">&quot;RECOMMENDBOOK_LIST&quot;</span>,recommendBookList);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index/index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="UserController"><a href="#UserController" class="headerlink" title="UserController"></a>UserController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.impl.DefaultKaptcha;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.MyResponse;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.EmailService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> jdk.nashorn.internal.parser.Token;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.ujs.bookcitydemo.Util.CodeGenerateUtil.generateVerCode;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DefaultKaptcha captchaProducer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmailService emailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/showList&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">showList</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        List&lt;User&gt; users = userService.getAllUser();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/enterLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/enterRegister&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterRegister</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/register&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*用户登录*/</span></span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">login</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        String result;</span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(user.getUsername(), user.getPassword());</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            subject.login(token);</span><br><span class="line">            result = <span class="string">&quot;登陆成功&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            result = <span class="string">&quot;用户名不存在&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            result = <span class="string">&quot;密码错误&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/login&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*注册表单提交*/</span></span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">register</span><span class="params">(User user,</span></span><br><span class="line"><span class="params">                           HttpServletRequest httpServletRequest,</span></span><br><span class="line"><span class="params">                           HttpServletResponse httpServletResponse)</span> &#123;</span><br><span class="line">        <span class="type">MyResponse</span> <span class="variable">myResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyResponse</span>();</span><br><span class="line">        <span class="comment">//验证码验证</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">captchaId</span> <span class="operator">=</span> (String) httpServletRequest.getSession().getAttribute(<span class="string">&quot;verifyCode&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">parameter</span> <span class="operator">=</span> httpServletRequest.getParameter(<span class="string">&quot;verifyCode&quot;</span>);</span><br><span class="line">        <span class="comment">//验证码错误返回注册页面</span></span><br><span class="line">        <span class="keyword">if</span>(!captchaId.equals(parameter))&#123;</span><br><span class="line">            myResponse.setStatus(<span class="number">0</span>);</span><br><span class="line">            myResponse.setMessage(<span class="string">&quot;验证码错误！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;user/register&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        HttpSession session=httpServletRequest.getSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//发送邮件验证码</span></span><br><span class="line">        String emailCode=generateVerCode();</span><br><span class="line">        emailService.sendEmailCode(user.getEmail(),emailCode);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;EMAILCODE&quot;</span>,emailCode);</span><br><span class="line">        <span class="comment">//将新用户的信息写入数据库</span></span><br><span class="line">        <span class="type">int</span> userTotalCount=userService.getAllUser().size();</span><br><span class="line">        String userId= String.valueOf(++userTotalCount);</span><br><span class="line">        user.setId(userId);</span><br><span class="line"><span class="comment">//        user.setAddress(&quot;&quot;);</span></span><br><span class="line"><span class="comment">//        user.setPhone(&quot;&quot;);</span></span><br><span class="line"><span class="comment">//        user.setAvatar(&quot;&quot;);</span></span><br><span class="line">        user.setVip(<span class="number">0</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;USER_REGISTER_INFO&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/emailCode&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*注册用户*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">//获取用户输入的邮箱验证码</span></span><br><span class="line">        String inputEmailCode=request.getParameter(<span class="string">&quot;inputEmailCode&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">MyResponse</span> <span class="variable">myResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyResponse</span>();</span><br><span class="line">        HttpSession session=request.getSession(<span class="literal">true</span>);</span><br><span class="line">        User user=(User)session.getAttribute(<span class="string">&quot;USER_REGISTER_INFO&quot;</span>);</span><br><span class="line">        String emailCode= String.valueOf(session.getAttribute(<span class="string">&quot;EMAILCODE&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (!emailCode.equals(inputEmailCode))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/user/enterRegister&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">createUserFlag</span> <span class="operator">=</span> userService.addUser(user);</span><br><span class="line">        <span class="comment">//判断添加用户是否成功</span></span><br><span class="line">        <span class="keyword">if</span> (createUserFlag == <span class="number">1</span> ) &#123;</span><br><span class="line">            myResponse.setStatus(<span class="number">1</span>);</span><br><span class="line">            myResponse.setMessage(<span class="string">&quot;添加成功！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;user/login&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            myResponse.setStatus(<span class="number">0</span>);</span><br><span class="line">            myResponse.setMessage(<span class="string">&quot;添加失败！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;user/register&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*用户中心，可进行修改账号资料操作*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/enterUserCenter&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterUserCenter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/userCenter&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*进入修改账号资料页面*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/enterAlterUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterAlterUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/alter&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*修改用户头像*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/alterUserAvatar&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">alterUserAvatar</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file,HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;E:\\Java Project\\book-city-demo\\src\\main\\resources\\static\\picture&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();<span class="comment">//获取文件名称</span></span><br><span class="line">        String suffixName=fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//获取文件后缀</span></span><br><span class="line">        fileName= UUID.randomUUID()+suffixName;<span class="comment">//重新生成文件名</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (!targetFile.exists()) &#123;</span><br><span class="line">            <span class="comment">// 判断文件夹是否存在</span></span><br><span class="line">            targetFile.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(targetFile, fileName);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//指定本地存入路径</span></span><br><span class="line">            file.transferTo(saveFile);</span><br><span class="line">            System.out.println(<span class="string">&quot;执行成功&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> path + fileName;</span><br><span class="line"></span><br><span class="line">            HttpSession session=request.getSession(<span class="literal">true</span>);</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) session.getAttribute(<span class="string">&quot;USER_INFO&quot;</span>);<span class="comment">//获取当前用户数据</span></span><br><span class="line">            user.setAvatar(fileName);</span><br><span class="line">            <span class="comment">//将新头像地址存入数据库和session</span></span><br><span class="line">            <span class="type">int</span> alterDBFlag=userService.alterUser(user);</span><br><span class="line"></span><br><span class="line">            session.removeAttribute(<span class="string">&quot;USER_INFO&quot;</span>);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;USER_INFO&quot;</span>,user);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;执行失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/user/enterUserCenter&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*修改账号资料*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/alterUserData&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">alterUserData</span><span class="params">(User user,HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">//将修改后的用户信息写入数据库</span></span><br><span class="line">        User beforeUserData=(User) SecurityUtils.getSubject().getPrincipal();</span><br><span class="line">        user.setId(beforeUserData.getId());</span><br><span class="line">        user.setUsername(beforeUserData.getUsername());</span><br><span class="line">        user.setVip(beforeUserData.getVip());</span><br><span class="line">        <span class="type">int</span> alterUserFlag= userService.alterUser(user);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;USER_INFO&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;USER_INFO&quot;</span>,user);<span class="comment">//把新的用户数据保存到session对象中</span></span><br><span class="line">        <span class="comment">//判断是否成功</span></span><br><span class="line">        <span class="keyword">if</span>(alterUserFlag==<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/user/enterUserCenter&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*退出登录*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/exitLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">exitLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        SecurityUtils.getSubject().logout();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*获取验证码*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/defaultKaptcha&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">defaultKaptcha</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span></span><br><span class="line">            <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">byte</span>[] captchaChallengeAsJpeg = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">jpegOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//生产验证码字符串并保存到session中</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">createText</span> <span class="operator">=</span> captchaProducer.createText();</span><br><span class="line">            httpServletRequest.getSession().setAttribute(<span class="string">&quot;verifyCode&quot;</span>, createText);</span><br><span class="line">            <span class="comment">//使用生产的验证码字符串返回一个BufferedImage对象并转为byte写入到byte数组中</span></span><br><span class="line">            <span class="type">BufferedImage</span> <span class="variable">challenge</span> <span class="operator">=</span> captchaProducer.createImage(createText);</span><br><span class="line">            ImageIO.write(challenge, <span class="string">&quot;jpg&quot;</span>, jpegOutputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            httpServletResponse.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义response输出类型为image/jpeg类型，使用response输出流输出图片的byte数组</span></span><br><span class="line">        captchaChallengeAsJpeg = jpegOutputStream.toByteArray();</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-store&quot;</span>);</span><br><span class="line">        httpServletResponse.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        httpServletResponse.setDateHeader(<span class="string">&quot;Expires&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        httpServletResponse.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">responseOutputStream</span> <span class="operator">=</span></span><br><span class="line">                httpServletResponse.getOutputStream();</span><br><span class="line">        responseOutputStream.write(captchaChallengeAsJpeg);</span><br><span class="line">        responseOutputStream.flush();</span><br><span class="line">        responseOutputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="BookController"><a href="#BookController" class="headerlink" title="BookController"></a>BookController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.DisplayByPages;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.BookService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line">    <span class="comment">/*显示书籍列表*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/enterBookList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterBookList</span><span class="params">(Model model, <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage,</span></span><br><span class="line"><span class="params">                       HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pageCount=<span class="number">1</span>;</span><br><span class="line">        List&lt;Book&gt; bookList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">        String fullStr=request.getParameter(<span class="string">&quot;requestPage&quot;</span>);</span><br><span class="line">        String str=fullStr.substring(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//接收用户点击的页码</span></span><br><span class="line">        <span class="keyword">if</span>(fullStr.contains(<span class="string">&quot;pageNo&quot;</span>))&#123;</span><br><span class="line">            String pageNo=fullStr.substring(fullStr.length()-<span class="number">1</span>);</span><br><span class="line">            currentPage= Integer.parseInt(pageNo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断请求的表格种类</span></span><br><span class="line">        <span class="keyword">if</span>(str.equals(<span class="string">&quot;新品&quot;</span>))&#123;</span><br><span class="line">            pageCount= bookService.queryByPage(currentPage,<span class="string">&quot;新品&quot;</span>).getTotalPage();</span><br><span class="line">            bookList= bookService.queryByPage(currentPage,<span class="string">&quot;新品&quot;</span>).getList();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;热销&quot;</span>))&#123;</span><br><span class="line">            pageCount= bookService.queryByPage(currentPage,<span class="string">&quot;热销&quot;</span>).getTotalPage();</span><br><span class="line">            bookList= bookService.queryByPage(currentPage,<span class="string">&quot;热销&quot;</span>).getList();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str!=<span class="literal">null</span>)&#123;</span><br><span class="line">            pageCount= bookService.queryByPage(currentPage,str).getTotalPage();</span><br><span class="line">            bookList= bookService.queryByPage(currentPage,str).getList();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        DisplayByPages displayByPages=<span class="keyword">new</span> <span class="title class_">DisplayByPages</span>();</span><br><span class="line">        model=displayByPages.pageModel(model,bookList,currentPage,pageCount,str);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index/bookList&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*显示书籍详情页*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/enterBookMessage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterBookMessage</span><span class="params">(Model model,HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">//获取点击的书籍名称</span></span><br><span class="line">        String str=request.getParameter(<span class="string">&quot;requestBook&quot;</span>);</span><br><span class="line">        Book book=<span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book=bookService.selectByPrimaryKey(str);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;bookMessage&quot;</span>,book);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;BOOK_INFO&quot;</span>,book);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index/bookMessage&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*搜索功能*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/queryBookList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">queryBookList</span><span class="params">(Model model,HttpServletRequest request,</span></span><br><span class="line"><span class="params">                                <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage)</span>&#123;</span><br><span class="line">        String inputBookMessage=request.getParameter(<span class="string">&quot;inputBookMessage&quot;</span>);</span><br><span class="line">        List&lt;Book&gt; bookList=bookService.selectByBookName(inputBookMessage);</span><br><span class="line">        <span class="comment">//此处需要修改</span></span><br><span class="line">        currentPage=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> pageCount= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        DisplayByPages displayByPages=<span class="keyword">new</span> <span class="title class_">DisplayByPages</span>();</span><br><span class="line">        model=displayByPages.pageModel(model,bookList,currentPage,pageCount,inputBookMessage);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index/bookList&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="TrolleyController"><a href="#TrolleyController" class="headerlink" title="TrolleyController"></a>TrolleyController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.DisplayByPages;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Trolley;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.BookService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.TrolleyService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;trolley&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrolleyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TrolleyService trolleyService;</span><br><span class="line">    <span class="comment">/*显示购物车列表*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/enterTrolleyList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterTrolleyList</span><span class="params">(Model model, <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage,</span></span><br><span class="line"><span class="params">                                   HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pageCount=<span class="number">1</span>;</span><br><span class="line">        List&lt;Trolley&gt; trolleyList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Trolley&gt;();</span><br><span class="line">        String fullStr=request.getParameter(<span class="string">&quot;pageNo&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(fullStr!=<span class="literal">null</span>)&#123;</span><br><span class="line">            currentPage=Integer.parseInt(fullStr);</span><br><span class="line">        &#125;</span><br><span class="line">        pageCount=trolleyService.queryByPage(currentPage).getTotalPage();</span><br><span class="line">        trolleyList=trolleyService.queryByPage(currentPage).getList();</span><br><span class="line">        model=pageModel(model,trolleyList,currentPage,pageCount);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;purchase/trolley&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Model <span class="title function_">pageModel</span><span class="params">(Model model, List&lt;Trolley&gt; list, <span class="type">int</span> currentPage, <span class="type">int</span> pageCount)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pagePrev=currentPage&gt;<span class="number">1</span>?currentPage-<span class="number">1</span>:<span class="number">1</span>;<span class="comment">//上一页</span></span><br><span class="line">        <span class="type">int</span> pageNext=currentPage&lt;pageCount?currentPage+<span class="number">1</span>:pageCount;<span class="comment">//下一页</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNo&quot;</span>, currentPage);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageCount&quot;</span>, pageCount);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pagePrev&quot;</span>, pagePrev);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNext&quot;</span>, pageNext);</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*书籍商品添加到购物车*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/addToTrolley&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addToTrolley</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">//获取当前时间</span></span><br><span class="line">        Date date=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">timeFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户输入的购买数量和备注信息</span></span><br><span class="line">        String purchaseNumber=request.getParameter(<span class="string">&quot;purchaseNumber&quot;</span>);</span><br><span class="line">        String note=request.getParameter(<span class="string">&quot;note&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(note==<span class="literal">null</span>)&#123;</span><br><span class="line">            note=<span class="string">&quot;无&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//从session中获取书籍信息</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);</span><br><span class="line">        Book book= (Book) session.getAttribute(<span class="string">&quot;BOOK_INFO&quot;</span>);</span><br><span class="line">        <span class="comment">//将信息注入到Trolley对象中</span></span><br><span class="line">        Trolley trolley=<span class="keyword">new</span> <span class="title class_">Trolley</span>();</span><br><span class="line">        trolley.setId(book.getId());</span><br><span class="line">        trolley.setBookname(book.getBookname());</span><br><span class="line">        trolley.setAuthor(book.getAuthor());</span><br><span class="line">        trolley.setBooknumber(book.getBooknumber());</span><br><span class="line">        trolley.setCategory(book.getCategory());</span><br><span class="line">        trolley.setPrice(book.getPrice());</span><br><span class="line">        trolley.setDescription(book.getDescription());</span><br><span class="line">        trolley.setSoldoutnumber(book.getSoldoutnumber());</span><br><span class="line">        trolley.setNumber(book.getNumber());</span><br><span class="line">        trolley.setTime(book.getTime());</span><br><span class="line">        trolley.setPicture(book.getPicture());</span><br><span class="line">        trolley.setPutintime(timeFormat.format(date));</span><br><span class="line">        trolley.setPurchasenumber(Integer.valueOf(purchaseNumber));</span><br><span class="line">        trolley.setNote(note);</span><br><span class="line">        <span class="type">int</span> flag=trolleyService.addToTrolley(trolley);</span><br><span class="line">        <span class="keyword">if</span>(flag==<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/book/enterBookMessage?requestBook=&quot;</span>+book.getId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="OrderController"><a href="#OrderController" class="headerlink" title="OrderController"></a>OrderController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Trolley;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.BookService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.OrderService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/order&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line">    <span class="comment">/*显示订单列表*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/enterOrderList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">enterOrderList</span><span class="params">(Model model, <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage,</span></span><br><span class="line"><span class="params">                                   HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pageCount=<span class="number">1</span>;</span><br><span class="line">        List&lt;Order&gt; orderList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Order&gt;();</span><br><span class="line">        String fullStr=request.getParameter(<span class="string">&quot;pageNo&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(fullStr!=<span class="literal">null</span>)&#123;</span><br><span class="line">            currentPage=Integer.parseInt(fullStr);</span><br><span class="line">        &#125;</span><br><span class="line">        pageCount=orderService.queryByPage(currentPage).getTotalPage();</span><br><span class="line">        orderList=orderService.queryByPage(currentPage).getList();</span><br><span class="line">        model=pageModel(model,orderList,currentPage,pageCount);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;purchase/order&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Model <span class="title function_">pageModel</span><span class="params">(Model model, List&lt;Order&gt; list, <span class="type">int</span> currentPage, <span class="type">int</span> pageCount)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pagePrev=currentPage&gt;<span class="number">1</span>?currentPage-<span class="number">1</span>:<span class="number">1</span>;<span class="comment">//上一页</span></span><br><span class="line">        <span class="type">int</span> pageNext=currentPage&lt;pageCount?currentPage+<span class="number">1</span>:pageCount;<span class="comment">//下一页</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNo&quot;</span>, currentPage);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageCount&quot;</span>, pageCount);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pagePrev&quot;</span>, pagePrev);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNext&quot;</span>, pageNext);</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*生成订单信息*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/createOrder&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">createOrder</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//获取当前登录用户</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span>(User) session.getAttribute(<span class="string">&quot;USER_INFO&quot;</span>);</span><br><span class="line"><span class="comment">//        if(user.getAddress()==null||user.getPhone()==null)&#123;</span></span><br><span class="line"><span class="comment">//            return &quot;redirect:/user/enterUserCenter&quot;;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//获取当前时间</span></span><br><span class="line">        Date date=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">timeFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取购物车中数据（书籍ID、购买数量和备注）</span></span><br><span class="line">        String trolleyData=request.getParameter(<span class="string">&quot;trolleyData&quot;</span>);</span><br><span class="line">        Book book=<span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        String purchaseNumber;</span><br><span class="line">        String note;</span><br><span class="line">        <span class="comment">//如果用户是从购物车中购买，则trolleyData有值，否则是从商品详情页购买</span></span><br><span class="line">        <span class="keyword">if</span>(trolleyData!=<span class="literal">null</span>)&#123;</span><br><span class="line">            String[] split = trolleyData.split(<span class="string">&quot;,&quot;</span>);<span class="comment">//以逗号分割</span></span><br><span class="line">            String bookId=split[<span class="number">0</span>];</span><br><span class="line">            purchaseNumber=split[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(split.length==<span class="number">3</span>)&#123;</span><br><span class="line">                note=split[<span class="number">2</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                note=<span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            book=bookService.selectByPrimaryKey(bookId);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//从session中获取书籍信息</span></span><br><span class="line">            book= (Book) session.getAttribute(<span class="string">&quot;BOOK_INFO&quot;</span>);</span><br><span class="line">            <span class="comment">//获取用户输入</span></span><br><span class="line">            purchaseNumber=request.getParameter(<span class="string">&quot;purchaseNumber&quot;</span>);</span><br><span class="line">            note=request.getParameter(<span class="string">&quot;note&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取当前所有订单数</span></span><br><span class="line">        String orderTotalCount= String.valueOf(orderService.getAllOrder().size());</span><br><span class="line"></span><br><span class="line">        Order order=<span class="keyword">new</span> <span class="title class_">Order</span>();</span><br><span class="line">        order.setId(orderTotalCount);</span><br><span class="line">        String regEx=<span class="string">&quot;[^0-9]&quot;</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regEx);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(timeFormat.format(date));</span><br><span class="line">        String orderId=m.replaceAll(<span class="string">&quot;&quot;</span>).trim()+user.getId()+book.getId()+orderTotalCount;</span><br><span class="line">        order.setOrderid(orderId);</span><br><span class="line"></span><br><span class="line">        order.setBookid(book.getId());</span><br><span class="line">        order.setBookname(book.getBookname());</span><br><span class="line">        order.setBooknumber(book.getBooknumber());</span><br><span class="line">        order.setAuthor(book.getAuthor());</span><br><span class="line">        order.setCategory(book.getCategory());</span><br><span class="line">        order.setDescription(book.getDescription());</span><br><span class="line">        order.setTime(book.getTime());</span><br><span class="line">        order.setPicture(book.getPicture());</span><br><span class="line">        order.setPrice(book.getPrice());</span><br><span class="line">        order.setNumber(book.getNumber());</span><br><span class="line">        order.setSoldoutnumber(book.getSoldoutnumber());</span><br><span class="line">        order.setUserid(user.getId());</span><br><span class="line">        order.setUsername(user.getUsername());</span><br><span class="line">        order.setPassword(user.getPassword());</span><br><span class="line">        order.setEmail(user.getEmail());</span><br><span class="line">        order.setPhone(user.getPhone());</span><br><span class="line">        order.setAddress(user.getAddress());</span><br><span class="line">        order.setAvatar(user.getAvatar());</span><br><span class="line">        order.setPurchasetime(timeFormat.format(date));</span><br><span class="line">        order.setVip(<span class="number">0</span>);</span><br><span class="line">        order.setPurchasenumber(Integer.valueOf(purchaseNumber));</span><br><span class="line">        order.setNote(note);</span><br><span class="line"></span><br><span class="line">        session.setAttribute(<span class="string">&quot;ORDER_MESSAGE&quot;</span>,order);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> flag= orderService.addToOrder(order);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;purchase/orderMessage&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*订单信息提交到数据库*/</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/addToOrder&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addToOrder</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        HttpSession session= request.getSession(<span class="literal">true</span>);</span><br><span class="line">        Order order=(Order) session.getAttribute(<span class="string">&quot;ORDER_MESSAGE&quot;</span>);</span><br><span class="line">        <span class="type">int</span> flag= orderService.addToOrder(order);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index/index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="AlipayController"><a href="#AlipayController" class="headerlink" title="AlipayController"></a>AlipayController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alipay.api.AlipayClient;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.DefaultAlipayClient;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.request.AlipayTradePagePayRequest;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.config.AlipayConfigInfo;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/alipay&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AlipayController</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: 前往支付宝第三方网关进行支付</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;goAlipay&quot;, produces = &quot;text/html; charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">goAlipay</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HttpSession session= request.getSession(<span class="literal">true</span>);</span><br><span class="line">        Order order=(Order) session.getAttribute(<span class="string">&quot;ORDER_MESSAGE&quot;</span>);</span><br><span class="line">        <span class="comment">//获得初始化的AlipayClient</span></span><br><span class="line">        <span class="type">AlipayClient</span> <span class="variable">alipayClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultAlipayClient</span>(AlipayConfigInfo.gatewayUrl, AlipayConfigInfo.app_id,</span><br><span class="line">                AlipayConfigInfo.merchant_private_key, <span class="string">&quot;json&quot;</span>, AlipayConfigInfo.charset,</span><br><span class="line">                AlipayConfigInfo.alipay_public_key, AlipayConfigInfo.sign_type);</span><br><span class="line">        <span class="comment">//设置请求参数</span></span><br><span class="line">        <span class="type">AlipayTradePagePayRequest</span> <span class="variable">alipayRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlipayTradePagePayRequest</span>();</span><br><span class="line">        alipayRequest.setReturnUrl(AlipayConfigInfo.return_url);</span><br><span class="line">        alipayRequest.setNotifyUrl(AlipayConfigInfo.notify_url);</span><br><span class="line">        <span class="comment">//商户订单号，商户网站订单系统中唯一订单号，必填</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">out_trade_no</span> <span class="operator">=</span> order.getOrderid();</span><br><span class="line">        <span class="comment">//付款金额，必填</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">total_amount</span> <span class="operator">=</span> String.valueOf(order.getPurchasenumber()*order.getPrice());</span><br><span class="line">        <span class="comment">//订单名称，必填</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">subject</span> <span class="operator">=</span> order.getOrderid();</span><br><span class="line">        <span class="comment">//商品描述，可空</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;用户订购商品个数：&quot;</span> + order.getPurchasenumber();</span><br><span class="line">        <span class="comment">// 该笔订单允许的最晚付款时间，逾期将关闭交易。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">timeout_express</span> <span class="operator">=</span> <span class="string">&quot;1c&quot;</span>;</span><br><span class="line">        alipayRequest.setBizContent(<span class="string">&quot;&#123;\&quot;out_trade_no\&quot;:\&quot;&quot;</span>+ out_trade_no +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;total_amount\&quot;:\&quot;&quot;</span>+ total_amount +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;subject\&quot;:\&quot;&quot;</span>+ subject +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;body\&quot;:\&quot;&quot;</span>+ body +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;timeout_express\&quot;:\&quot;&quot;</span>+ timeout_express +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;product_code\&quot;:\&quot;FAST_INSTANT_TRADE_PAY\&quot;&#125;&quot;</span>);</span><br><span class="line">        <span class="comment">//请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> alipayClient.pageExecute(alipayRequest).getBody();</span><br><span class="line">        AlipayConfigInfo.logResult(result);<span class="comment">// 记录支付日志</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><h5 id="UserService"><a href="#UserService" class="headerlink" title="UserService"></a>UserService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="comment">/*获取所有用户数据*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectAllUser();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*根据用户名获取用户数据*/</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserByName</span><span class="params">(String userName)</span>&#123;</span><br><span class="line">        User user=<span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user=userMapper.selectByUserName(userName);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*为新用户创建购物车数据表和订单数据表*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        String trolleyTableName= user.getId()+<span class="string">&quot;_trolley&quot;</span>;</span><br><span class="line">        String orderTableName= user.getId()+<span class="string">&quot;_order&quot;</span>;</span><br><span class="line">        <span class="type">int</span> result;</span><br><span class="line">        userMapper.createTrolleyTable(trolleyTableName);</span><br><span class="line">        userMapper.createOrderTable(orderTableName);</span><br><span class="line">        <span class="keyword">if</span> (userMapper.insertSelective(user)==<span class="number">1</span>)&#123;</span><br><span class="line">            result=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            result=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*修改用户数据*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">alterUser</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.updateByPrimaryKeySelective(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="BookService"><a href="#BookService" class="headerlink" title="BookService"></a>BookService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.BookSortBySoldOutNumber;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.BookSortByTime;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.DisplayByPages;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.mapper.BookMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*按页查询*/</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;Book&gt; <span class="title function_">queryByPage</span><span class="params">(<span class="type">int</span> currentPage,String str)</span> &#123;</span><br><span class="line">        <span class="type">PageInfo</span> <span class="variable">pageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageInfo</span>();</span><br><span class="line">        DisplayByPages displayByPages=<span class="keyword">new</span> <span class="title class_">DisplayByPages</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> size=DisplayByPages.getPageSize();</span><br><span class="line">        <span class="type">int</span> totalCount=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (currentPage - <span class="number">1</span>) * size;</span><br><span class="line">        List&lt;Book&gt; bookList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">        <span class="comment">//根据查询请求进行将所需数据放入bookList中</span></span><br><span class="line">        <span class="keyword">if</span>(str.equals(<span class="string">&quot;全部&quot;</span>))&#123;</span><br><span class="line">            bookList= bookMapper.selectAllLimit(start, size);</span><br><span class="line">            totalCount=bookMapper.selectAll().size();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;新品&quot;</span>))&#123;</span><br><span class="line">            List&lt;Book&gt; bookLists=sortByTime();</span><br><span class="line">            bookList=getCurrentPageList(start,bookLists);</span><br><span class="line">            totalCount=bookMapper.selectAll().size();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;热销&quot;</span>))&#123;</span><br><span class="line">            List&lt;Book&gt; bookLists= sortBySoldOutNumber();</span><br><span class="line">            bookList= getCurrentPageList(start,bookLists);</span><br><span class="line">            totalCount=bookMapper.selectAll().size();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str!=<span class="literal">null</span>)&#123;</span><br><span class="line">            List&lt;Book&gt; bookLists= bookMapper.selectByCategory(str);</span><br><span class="line">            bookList= getCurrentPageList(start,bookLists);</span><br><span class="line">            totalCount=bookList.size();</span><br><span class="line">            <span class="keyword">if</span>(totalCount==<span class="number">0</span>)&#123;</span><br><span class="line">                totalCount=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pageInfo= displayByPages.pageInfo(currentPage,bookList,totalCount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*将所有书籍按上架时间排序*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">sortByTime</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookLists=bookMapper.selectAll();</span><br><span class="line">        Comparator comparator=<span class="keyword">new</span> <span class="title class_">BookSortByTime</span>();</span><br><span class="line">        Collections.sort(bookLists,comparator);</span><br><span class="line">        <span class="keyword">return</span> bookLists;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*将所有书籍数据按售出数量（热度）排序*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">sortBySoldOutNumber</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookLists=bookMapper.selectAll();</span><br><span class="line">        Comparator comparator=<span class="keyword">new</span> <span class="title class_">BookSortBySoldOutNumber</span>();</span><br><span class="line">        Collections.sort(bookLists,comparator);</span><br><span class="line">        <span class="keyword">return</span> bookLists;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*获取当前页的数据*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getCurrentPageList</span><span class="params">(<span class="type">int</span> start, List&lt;Book&gt; bookLists)</span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Math.min(DisplayByPages.getPageSize(),bookLists.size()-start); i++) &#123;</span><br><span class="line">            bookList.add(bookLists.get(start+i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bookList;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*按书籍ID查询*/</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">selectByPrimaryKey</span><span class="params">(String id)</span>&#123;</span><br><span class="line">        Book book=bookMapper.selectByPrimaryKey(id);</span><br><span class="line">        <span class="keyword">return</span> book;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*按书籍名称查询*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">selectByBookName</span><span class="params">(String bookName)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.selectByBookName(bookName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*获取按时间或热度排序前十个Book对象数据（主页使用）*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getBookListsLimitTen</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookLists=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">        <span class="keyword">if</span>(str.equals(<span class="string">&quot;新品&quot;</span>))&#123;</span><br><span class="line">            bookLists=sortByTime();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.equals(<span class="string">&quot;热销&quot;</span>))&#123;</span><br><span class="line">            bookLists=sortBySoldOutNumber();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            bookLists=bookMapper.selectAll();</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Book&gt; bookList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Book&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            bookList.add(bookLists.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bookList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="TrolleyService"><a href="#TrolleyService" class="headerlink" title="TrolleyService"></a>TrolleyService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.DisplayByPages;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Trolley;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.mapper.TrolleyMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrolleyService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> TrolleyMapper trolleyMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*按页查询*/</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;Trolley&gt; <span class="title function_">queryByPage</span><span class="params">(<span class="type">int</span> currentPage)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        String tableName= user.getId()+<span class="string">&quot;_trolley&quot;</span>;</span><br><span class="line">        <span class="type">PageInfo</span> <span class="variable">pageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageInfo</span>();</span><br><span class="line">        DisplayByPages displayByPages=<span class="keyword">new</span> <span class="title class_">DisplayByPages</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> size=DisplayByPages.getPageSize();</span><br><span class="line">        <span class="type">int</span> totalCount=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (currentPage - <span class="number">1</span>) * size;</span><br><span class="line">        List&lt;Trolley&gt; trolleyList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Trolley&gt;();</span><br><span class="line">        trolleyList=trolleyMapper.selectAllLimit(tableName,start,size);</span><br><span class="line">        totalCount=trolleyMapper.selectAll(tableName).size();</span><br><span class="line">        <span class="keyword">if</span>(totalCount==<span class="number">0</span>)&#123;</span><br><span class="line">            totalCount=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pageInfo= displayByPages.pageInfo(currentPage,trolleyList,totalCount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*添加书籍商品到购物车*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addToTrolley</span><span class="params">(Trolley trolley)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        String tableName= user.getId()+<span class="string">&quot;_trolley&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> trolleyMapper.insertTrolley(tableName,trolley);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="OrderService"><a href="#OrderService" class="headerlink" title="OrderService"></a>OrderService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.DisplayByPages;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.mapper.OrderMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line">    <span class="comment">/*按页查询*/</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;Order&gt; <span class="title function_">queryByPage</span><span class="params">(<span class="type">int</span> currentPage)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        String tableName= user.getId()+<span class="string">&quot;_order&quot;</span>;</span><br><span class="line">        <span class="type">PageInfo</span> <span class="variable">pageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageInfo</span>();</span><br><span class="line">        DisplayByPages displayByPages=<span class="keyword">new</span> <span class="title class_">DisplayByPages</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> size=DisplayByPages.getPageSize();</span><br><span class="line">        <span class="type">int</span> totalCount=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (currentPage - <span class="number">1</span>) * size;</span><br><span class="line">        List&lt;Order&gt; orderList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Order&gt;();</span><br><span class="line">        orderList=orderMapper.selectAllLimit(tableName,start,size);</span><br><span class="line">        totalCount=orderMapper.selectAll(tableName).size();</span><br><span class="line">        <span class="keyword">if</span>(totalCount==<span class="number">0</span>)&#123;</span><br><span class="line">            totalCount=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pageInfo= displayByPages.pageInfo(currentPage,orderList,totalCount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*添加数据到订单表*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addToOrder</span><span class="params">(Order order)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        String tableName= user.getId()+<span class="string">&quot;_order&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> orderMapper.insertOrder(tableName,order);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*获取所有订单*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Order&gt; <span class="title function_">getAllOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) SecurityUtils.getSubject().getPrincipal(); <span class="comment">// 获取当前登录用户</span></span><br><span class="line">        String tableName= user.getId()+<span class="string">&quot;_order&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> orderMapper.selectAll(tableName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*获取指定用户的所有订单*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Order&gt; <span class="title function_">getAllOrder</span><span class="params">(String tableName)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> orderMapper.selectAll(tableName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="EmailService"><a href="#EmailService" class="headerlink" title="EmailService"></a>EmailService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.MailSendException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSenderImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从配置文件中获取发件人</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 邮件发送</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> receiver 收件人</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> verCode 验证码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> MailSendException 邮件发送错误</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmailCode</span><span class="params">(String receiver, String verCode)</span> <span class="keyword">throws</span> MailSendException &#123;</span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        message.setSubject(<span class="string">&quot;黑大帅商城&quot;</span>);<span class="comment">//设置邮件标题</span></span><br><span class="line">        message.setText(<span class="string">&quot;尊敬的用户,您好:\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;\n本次请求的邮件验证码为:&quot;</span> + verCode + <span class="string">&quot;,本验证码5分钟内有效，请及时输入。（请勿泄露此验证码）\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;\n如非本人操作，请忽略该邮件。&quot;</span>);<span class="comment">//设置邮件正文</span></span><br><span class="line">        message.setTo(receiver);<span class="comment">//设置收件人</span></span><br><span class="line">        message.setFrom(sender);<span class="comment">//设置发件人</span></span><br><span class="line">        mailSender.send(message);<span class="comment">//发送邮件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这一部分Mybatis插件自动生成</span><br></pre></td></tr></table></figure><h4 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h4><h5 id="UserMapper"><a href="#UserMapper" class="headerlink" title="UserMapper"></a>UserMapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(User record)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectAllUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">selectByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">selectByUserName</span><span class="params">(String userName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKeySelective</span><span class="params">(User record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKey</span><span class="params">(User record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建相应购物车表</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">createTrolleyTable</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str)</span>;</span><br><span class="line">    <span class="comment">//创建相应订单表</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">createOrderTable</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="UserMapper-xml"><a href="#UserMapper-xml" class="headerlink" title="UserMapper.xml"></a>UserMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.ujs.bookcitydemo.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;avatar&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;vip&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;vip&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    id, username, password, email, phone, address, avatar, vip</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from user</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from user</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByUserName&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from user</span><br><span class="line">    where username = #&#123;username,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">    delete from user</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user (id, username, password, </span><br><span class="line">      email, phone, address, </span><br><span class="line">      avatar, vip)</span><br><span class="line">    values (#&#123;id,jdbcType=VARCHAR&#125;, #&#123;username,jdbcType=VARCHAR&#125;, #&#123;password,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;email,jdbcType=VARCHAR&#125;, #&#123;phone,jdbcType=VARCHAR&#125;, #&#123;address,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;avatar,jdbcType=VARCHAR&#125;, #&#123;vip,jdbcType=INTEGER&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">        username,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">        password,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">        email,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">        avatar,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;vip != null&quot;</span>&gt;</span></span><br><span class="line">        vip,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;vip != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;vip,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    update user</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">        username = #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span></span><br><span class="line">        password = #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">        email = #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span></span><br><span class="line">        phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span></span><br><span class="line">        address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;avatar != null&quot;</span>&gt;</span></span><br><span class="line">        avatar = #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;vip != null&quot;</span>&gt;</span></span><br><span class="line">        vip = #&#123;vip,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.User&quot;</span>&gt;</span></span><br><span class="line">    update user</span><br><span class="line">    set username = #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      password = #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      email = #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      avatar = #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      vip = #&#123;vip,jdbcType=INTEGER&#125;</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;createTrolleyTable&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> &gt;</span></span><br><span class="line">    CREATE TABLE $&#123;tableName&#125; (</span><br><span class="line">      `id` varchar(64) NOT NULL  COMMENT &#x27;书籍id&#x27;,</span><br><span class="line">      `booknumber` varchar(255) DEFAULT NULL COMMENT &#x27;书籍编号&#x27;,</span><br><span class="line">      `bookname` varchar(255) DEFAULT NULL COMMENT &#x27;书籍名称&#x27;,</span><br><span class="line">      `author` varchar(255) DEFAULT NULL COMMENT &#x27;作者&#x27;,</span><br><span class="line">      `category` varchar(255) DEFAULT NULL COMMENT &#x27;书籍类别&#x27;,</span><br><span class="line">      `price` double DEFAULT NULL COMMENT &#x27;书籍价格&#x27;,</span><br><span class="line">      `number` int(50) DEFAULT NULL COMMENT &#x27;书籍数量&#x27;,</span><br><span class="line">      `soldoutnumber` int(50) DEFAULT NULL COMMENT &#x27;书籍已购数量&#x27;,</span><br><span class="line">      `description` varchar(255) DEFAULT NULL COMMENT &#x27;书籍描述&#x27;,</span><br><span class="line">      `time` varchar(255) DEFAULT NULL COMMENT &#x27;上架时间&#x27;,</span><br><span class="line">      `picture` varchar(255) DEFAULT NULL COMMENT &#x27;书籍图片地址&#x27;,</span><br><span class="line">      `putintime` varchar(255) DEFAULT NULL COMMENT &#x27;放入购物车时间&#x27;,</span><br><span class="line">      `purchasenumber` int(50) DEFAULT NULL COMMENT &#x27;购买数量&#x27;,</span><br><span class="line">      `note` varchar(255) DEFAULT NULL COMMENT &#x27;备注&#x27;</span><br><span class="line">    );</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;createOrderTable&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">    CREATE TABLE $&#123;tableName&#125; (</span><br><span class="line">    `id` varchar(64) NOT NULL  COMMENT &#x27;订单id&#x27;,</span><br><span class="line">    `orderid` varchar(64) NOT NULL  COMMENT &#x27;订单编号&#x27;,</span><br><span class="line"></span><br><span class="line">    `bookid` varchar(64) NOT NULL  COMMENT &#x27;书籍id&#x27;,</span><br><span class="line">    `booknumber` varchar(255) DEFAULT NULL COMMENT &#x27;书籍编号&#x27;,</span><br><span class="line">    `bookname` varchar(255) DEFAULT NULL COMMENT &#x27;书籍名称&#x27;,</span><br><span class="line">    `author` varchar(255) DEFAULT NULL COMMENT &#x27;作者&#x27;,</span><br><span class="line">    `category` varchar(255) DEFAULT NULL COMMENT &#x27;书籍类别&#x27;,</span><br><span class="line">    `price` double DEFAULT NULL COMMENT &#x27;书籍价格&#x27;,</span><br><span class="line">    `number` int(50) DEFAULT NULL COMMENT &#x27;书籍数量&#x27;,</span><br><span class="line">    `soldoutnumber` int(50) DEFAULT NULL COMMENT &#x27;书籍已购数量&#x27;,</span><br><span class="line">    `description` varchar(255) DEFAULT NULL COMMENT &#x27;书籍描述&#x27;,</span><br><span class="line">    `time` varchar(255) DEFAULT NULL COMMENT &#x27;上架时间&#x27;,</span><br><span class="line">    `picture` varchar(255) DEFAULT NULL COMMENT &#x27;书籍图片地址&#x27;,</span><br><span class="line"></span><br><span class="line">    `userid` varchar(64) NOT NULL  COMMENT &#x27;用户id&#x27;,</span><br><span class="line">    `username` varchar(100) DEFAULT NULL COMMENT &#x27;用户名&#x27;,</span><br><span class="line">    `password` varchar(100) DEFAULT NULL COMMENT &#x27;密码&#x27;,</span><br><span class="line">    `email` varchar(50) DEFAULT NULL COMMENT &#x27;用户邮箱&#x27;,</span><br><span class="line">    `phone` varchar(50) DEFAULT NULL COMMENT &#x27;用户电话&#x27;,</span><br><span class="line">    `address` varchar(255) DEFAULT NULL COMMENT &#x27;用户地址&#x27;,</span><br><span class="line">    `avatar` varchar(255) DEFAULT NULL COMMENT &#x27;用户头像地址&#x27;,</span><br><span class="line">    `vip` int(1) DEFAULT NULL COMMENT &#x27;VIP信息&#x27;,</span><br><span class="line"></span><br><span class="line">    `purchasetime` varchar(255) DEFAULT NULL COMMENT &#x27;购买时间&#x27;,</span><br><span class="line">    `purchasenumber` int(50) DEFAULT NULL COMMENT &#x27;购买数量&#x27;,</span><br><span class="line">    `note` varchar(255) DEFAULT NULL COMMENT &#x27;备注&#x27;,</span><br><span class="line">    PRIMARY KEY (`id`)</span><br><span class="line">    );</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="BookMapper"><a href="#BookMapper" class="headerlink" title="BookMapper"></a>BookMapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Book record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(Book record)</span>;</span><br><span class="line"></span><br><span class="line">    Book <span class="title function_">selectByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKeySelective</span><span class="params">(Book record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKey</span><span class="params">(Book record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据书名查询</span></span><br><span class="line">    List&lt;Book&gt; <span class="title function_">selectByBookName</span><span class="params">(String bookName)</span>;</span><br><span class="line">    <span class="comment">//根据类别查询</span></span><br><span class="line">    List&lt;Book&gt; <span class="title function_">selectByCategory</span><span class="params">(String category)</span>;</span><br><span class="line">    <span class="comment">//查询所有数据</span></span><br><span class="line">    List&lt;Book&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">//查询指定页面数据</span></span><br><span class="line">    List&lt;Book&gt; <span class="title function_">selectAllLimit</span><span class="params">(<span class="meta">@Param(&quot;start&quot;)</span> <span class="type">int</span> start, <span class="meta">@Param(&quot;size&quot;)</span><span class="type">int</span> size)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="BookMapper-xml"><a href="#BookMapper-xml" class="headerlink" title="BookMapper.xml"></a>BookMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.ujs.bookcitydemo.mapper.BookMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;booknumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;booknumber&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;bookname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;bookname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;author&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;category&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;category&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;price&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;DOUBLE&quot;</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;number&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;number&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;soldoutnumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;soldoutnumber&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;description&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;description&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;time&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;time&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;picture&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;picture&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    id, booknumber, bookname, author, category, price, number, soldoutnumber, description, </span><br><span class="line">    time, picture</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select </span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from book</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByBookName&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from book</span><br><span class="line">    where bookname = #&#123;bookname,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCategory&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from book</span><br><span class="line">    where category = #&#123;category,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from book</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllLimit&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">    from book</span><br><span class="line">    limit #&#123;start&#125;,#&#123;size&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">    delete from book</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Book&quot;</span>&gt;</span></span><br><span class="line">    insert into book (id, booknumber, bookname, </span><br><span class="line">      author, category, price, </span><br><span class="line">      number, soldoutnumber, description, </span><br><span class="line">      time, picture)</span><br><span class="line">    values (#&#123;id,jdbcType=VARCHAR&#125;, #&#123;booknumber,jdbcType=VARCHAR&#125;, #&#123;bookname,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;author,jdbcType=VARCHAR&#125;, #&#123;category,jdbcType=VARCHAR&#125;, #&#123;price,jdbcType=DOUBLE&#125;, </span><br><span class="line">      #&#123;number,jdbcType=INTEGER&#125;, #&#123;soldoutnumber,jdbcType=INTEGER&#125;, #&#123;description,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;time,jdbcType=VARCHAR&#125;, #&#123;picture,jdbcType=VARCHAR&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Book&quot;</span>&gt;</span></span><br><span class="line">    insert into book</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;booknumber != null&quot;</span>&gt;</span></span><br><span class="line">        booknumber,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bookname != null&quot;</span>&gt;</span></span><br><span class="line">        bookname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        author,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;category != null&quot;</span>&gt;</span></span><br><span class="line">        category,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span></span><br><span class="line">        price,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;number != null&quot;</span>&gt;</span></span><br><span class="line">        number,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;soldoutnumber != null&quot;</span>&gt;</span></span><br><span class="line">        soldoutnumber,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span></span><br><span class="line">        description,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;time != null&quot;</span>&gt;</span></span><br><span class="line">        time,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;picture != null&quot;</span>&gt;</span></span><br><span class="line">        picture,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;booknumber != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bookname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;category != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;number != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;soldoutnumber != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;time != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;picture != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Book&quot;</span>&gt;</span></span><br><span class="line">    update book</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;booknumber != null&quot;</span>&gt;</span></span><br><span class="line">        booknumber = #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bookname != null&quot;</span>&gt;</span></span><br><span class="line">        bookname = #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        author = #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;category != null&quot;</span>&gt;</span></span><br><span class="line">        category = #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span></span><br><span class="line">        price = #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;number != null&quot;</span>&gt;</span></span><br><span class="line">        number = #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;soldoutnumber != null&quot;</span>&gt;</span></span><br><span class="line">        soldoutnumber = #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span></span><br><span class="line">        description = #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;time != null&quot;</span>&gt;</span></span><br><span class="line">        time = #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;picture != null&quot;</span>&gt;</span></span><br><span class="line">        picture = #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Book&quot;</span>&gt;</span></span><br><span class="line">    update book</span><br><span class="line">    set booknumber = #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      bookname = #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      author = #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      category = #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      price = #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      number = #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      soldoutnumber = #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      description = #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      time = #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      picture = #&#123;picture,jdbcType=VARCHAR&#125;</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="TrolleyMapper"><a href="#TrolleyMapper" class="headerlink" title="TrolleyMapper"></a>TrolleyMapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Trolley;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TrolleyMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Trolley record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(Trolley record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询所有数据</span></span><br><span class="line">    List&lt;Trolley&gt; <span class="title function_">selectAll</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str)</span>;</span><br><span class="line">    <span class="comment">//查询指定页面数据</span></span><br><span class="line">    List&lt;Trolley&gt; <span class="title function_">selectAllLimit</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str,<span class="meta">@Param(&quot;start&quot;)</span> <span class="type">int</span> start, <span class="meta">@Param(&quot;size&quot;)</span><span class="type">int</span> size)</span>;</span><br><span class="line">    <span class="comment">//插入数据到特定表</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertTrolley</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str,<span class="meta">@Param(&quot;record&quot;)</span>Trolley record)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="TrolleyMapper-xml"><a href="#TrolleyMapper-xml" class="headerlink" title="TrolleyMapper.xml"></a>TrolleyMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.ujs.bookcitydemo.mapper.TrolleyMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Trolley&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;booknumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;booknumber&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;bookname&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;bookname&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;author&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;category&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;category&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;price&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;DOUBLE&quot;</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;number&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;number&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;soldoutnumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;soldoutnumber&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;description&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;description&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;time&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;time&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;picture&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;picture&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;putintime&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;putintime&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;purchasenumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;purchasenumber&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;note&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;note&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select * from $&#123;tableName&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllLimit&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">    *</span><br><span class="line">    from $&#123;tableName&#125;</span><br><span class="line">    limit #&#123;start&#125;,#&#123;size&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertTrolley&quot;</span>&gt;</span></span><br><span class="line">    insert into $&#123;tableName&#125; (id, booknumber, bookname,</span><br><span class="line">      author, category, price,</span><br><span class="line">      number, soldoutnumber, description,</span><br><span class="line">      time, picture, putintime,</span><br><span class="line">      purchasenumber, note)</span><br><span class="line">    values (#&#123;record.id&#125;, #&#123;record.booknumber&#125;, #&#123;record.bookname&#125;,</span><br><span class="line">      #&#123;record.author&#125;, #&#123;record.category&#125;, #&#123;record.price&#125;,</span><br><span class="line">      #&#123;record.number&#125;, #&#123;record.soldoutnumber&#125;, #&#123;record.description&#125;,</span><br><span class="line">      #&#123;record.time&#125;, #&#123;record.picture&#125;, #&#123;record.putintime&#125;,</span><br><span class="line">      #&#123;record.purchasenumber&#125;, #&#123;record.note&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Trolley&quot;</span>&gt;</span></span><br><span class="line">    insert into trolley (id, booknumber, bookname,</span><br><span class="line">      author, category, price, </span><br><span class="line">      number, soldoutnumber, description, </span><br><span class="line">      time, picture, putintime, </span><br><span class="line">      purchasenumber, note)</span><br><span class="line">    values (#&#123;id,jdbcType=VARCHAR&#125;, #&#123;booknumber,jdbcType=VARCHAR&#125;, #&#123;bookname,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;author,jdbcType=VARCHAR&#125;, #&#123;category,jdbcType=VARCHAR&#125;, #&#123;price,jdbcType=DOUBLE&#125;, </span><br><span class="line">      #&#123;number,jdbcType=INTEGER&#125;, #&#123;soldoutnumber,jdbcType=INTEGER&#125;, #&#123;description,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;time,jdbcType=VARCHAR&#125;, #&#123;picture,jdbcType=VARCHAR&#125;, #&#123;putintime,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;purchasenumber,jdbcType=INTEGER&#125;, #&#123;note,jdbcType=VARCHAR&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertSelective&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ujs.bookcitydemo.entity.Trolley&quot;</span>&gt;</span></span><br><span class="line">    insert into trolley</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;booknumber != null&quot;</span>&gt;</span></span><br><span class="line">        booknumber,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bookname != null&quot;</span>&gt;</span></span><br><span class="line">        bookname,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        author,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;category != null&quot;</span>&gt;</span></span><br><span class="line">        category,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span></span><br><span class="line">        price,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;number != null&quot;</span>&gt;</span></span><br><span class="line">        number,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;soldoutnumber != null&quot;</span>&gt;</span></span><br><span class="line">        soldoutnumber,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span></span><br><span class="line">        description,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;time != null&quot;</span>&gt;</span></span><br><span class="line">        time,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;picture != null&quot;</span>&gt;</span></span><br><span class="line">        picture,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;putintime != null&quot;</span>&gt;</span></span><br><span class="line">        putintime,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;purchasenumber != null&quot;</span>&gt;</span></span><br><span class="line">        purchasenumber,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;note != null&quot;</span>&gt;</span></span><br><span class="line">        note,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;booknumber != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bookname != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;category != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;number != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;soldoutnumber != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;time != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;picture != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;putintime != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;putintime,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;purchasenumber != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;purchasenumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;note != null&quot;</span>&gt;</span></span><br><span class="line">        #&#123;note,jdbcType=VARCHAR&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="OrderMapper"><a href="#OrderMapper" class="headerlink" title="OrderMapper"></a>OrderMapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Trolley;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Order record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(Order record)</span>;</span><br><span class="line"></span><br><span class="line">    Order <span class="title function_">selectByPrimaryKey</span><span class="params">(String id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKeySelective</span><span class="params">(Order record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKey</span><span class="params">(Order record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询指定表的所有数据</span></span><br><span class="line">    List&lt;Order&gt; <span class="title function_">selectAll</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span>String str)</span>;</span><br><span class="line">    <span class="comment">//查询指定表指定页面的数据</span></span><br><span class="line">    List&lt;Order&gt; <span class="title function_">selectAllLimit</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str, <span class="meta">@Param(&quot;start&quot;)</span> <span class="type">int</span> start, <span class="meta">@Param(&quot;size&quot;)</span><span class="type">int</span> size)</span>;</span><br><span class="line">    <span class="comment">//插入数据到特定表</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertOrder</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String str,<span class="meta">@Param(&quot;record&quot;)</span> Order record)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="OrderMapper-xml"><a href="#OrderMapper-xml" class="headerlink" title="OrderMapper.xml"></a>OrderMapper.xml</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;com.ujs.bookcitydemo.mapper.OrderMapper&quot;&gt;</span><br><span class="line">  &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.ujs.bookcitydemo.entity.Order&quot;&gt;</span><br><span class="line">    &lt;id column=&quot;id&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;id&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;orderid&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;orderid&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;bookid&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;bookid&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;booknumber&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;booknumber&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;bookname&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;bookname&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;author&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;author&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;category&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;category&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;price&quot; jdbcType=&quot;DOUBLE&quot; property=&quot;price&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;number&quot; jdbcType=&quot;INTEGER&quot; property=&quot;number&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;soldoutnumber&quot; jdbcType=&quot;INTEGER&quot; property=&quot;soldoutnumber&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;description&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;description&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;time&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;time&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;picture&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;picture&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;userid&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;userid&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;username&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;username&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;password&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;password&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;email&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;email&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;phone&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;phone&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;address&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;address&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;avatar&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;avatar&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;vip&quot; jdbcType=&quot;INTEGER&quot; property=&quot;vip&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;purchasetime&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;purchasetime&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;purchasenumber&quot; jdbcType=&quot;INTEGER&quot; property=&quot;purchasenumber&quot; /&gt;</span><br><span class="line">    &lt;result column=&quot;note&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;note&quot; /&gt;</span><br><span class="line">  &lt;/resultMap&gt;</span><br><span class="line">  &lt;sql id=&quot;Base_Column_List&quot;&gt;</span><br><span class="line">    id, orderid, bookid, booknumber, bookname, author, category, price, number, soldoutnumber, </span><br><span class="line">    description, time, picture, userid, username, password, email, phone, address, avatar, </span><br><span class="line">    vip, purchasetime, purchasenumber, note</span><br><span class="line">  &lt;/sql&gt;</span><br><span class="line">  &lt;select id=&quot;selectAll&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">    select * from $&#123;tableName&#125;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">  &lt;select id=&quot;selectAllLimit&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">    select</span><br><span class="line">    *</span><br><span class="line">    from $&#123;tableName&#125;</span><br><span class="line">    limit #&#123;start&#125;,#&#123;size&#125;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">  &lt;select id=&quot;selectByPrimaryKey&quot; parameterType=&quot;java.lang.String&quot; resultMap=&quot;BaseResultMap&quot;&gt;</span><br><span class="line">    select </span><br><span class="line">    &lt;include refid=&quot;Base_Column_List&quot; /&gt;</span><br><span class="line">    from order</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">  &lt;delete id=&quot;deleteByPrimaryKey&quot; parameterType=&quot;java.lang.String&quot;&gt;</span><br><span class="line">    delete from order</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  &lt;/delete&gt;</span><br><span class="line">  &lt;insert id=&quot;insertOrder&quot;&gt;</span><br><span class="line">    insert into $&#123;tableName&#125; (id, orderid, bookid,</span><br><span class="line">      booknumber, bookname, author,</span><br><span class="line">      category, price, number,</span><br><span class="line">      soldoutnumber, description, time,</span><br><span class="line">      picture, userid, username,</span><br><span class="line">      password, email, phone,</span><br><span class="line">      address, avatar, vip,</span><br><span class="line">      purchasetime, purchasenumber, note</span><br><span class="line">      )</span><br><span class="line">    values (#&#123;record.id&#125;, #&#123;record.orderid&#125;, #&#123;record.bookid&#125;,</span><br><span class="line">      #&#123;record.booknumber&#125;, #&#123;record.bookname&#125;, #&#123;record.author&#125;,</span><br><span class="line">      #&#123;record.category&#125;, #&#123;record.price&#125;, #&#123;record.number&#125;,</span><br><span class="line">      #&#123;record.soldoutnumber&#125;, #&#123;record.description&#125;, #&#123;record.time&#125;,</span><br><span class="line">      #&#123;record.picture&#125;, #&#123;record.userid&#125;, #&#123;record.username&#125;,</span><br><span class="line">      #&#123;record.password&#125;, #&#123;record.email&#125;, #&#123;record.phone&#125;,</span><br><span class="line">      #&#123;record.address&#125;, #&#123;record.avatar&#125;, #&#123;record.vip&#125;,</span><br><span class="line">      #&#123;record.purchasetime&#125;, #&#123;record.purchasenumber&#125;, #&#123;record.note&#125;</span><br><span class="line">      )</span><br><span class="line">  &lt;/insert&gt;</span><br><span class="line">  &lt;insert id=&quot;insert&quot; parameterType=&quot;com.ujs.bookcitydemo.entity.Order&quot;&gt;</span><br><span class="line">    insert into order (id, orderid, bookid, </span><br><span class="line">      booknumber, bookname, author, </span><br><span class="line">      category, price, number, </span><br><span class="line">      soldoutnumber, description, time, </span><br><span class="line">      picture, userid, username, </span><br><span class="line">      password, email, phone, </span><br><span class="line">      address, avatar, vip, </span><br><span class="line">      purchasetime, purchasenumber, note</span><br><span class="line">      )</span><br><span class="line">    values (#&#123;id,jdbcType=VARCHAR&#125;, #&#123;orderid,jdbcType=VARCHAR&#125;, #&#123;bookid,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;booknumber,jdbcType=VARCHAR&#125;, #&#123;bookname,jdbcType=VARCHAR&#125;, #&#123;author,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;category,jdbcType=VARCHAR&#125;, #&#123;price,jdbcType=DOUBLE&#125;, #&#123;number,jdbcType=INTEGER&#125;, </span><br><span class="line">      #&#123;soldoutnumber,jdbcType=INTEGER&#125;, #&#123;description,jdbcType=VARCHAR&#125;, #&#123;time,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;picture,jdbcType=VARCHAR&#125;, #&#123;userid,jdbcType=VARCHAR&#125;, #&#123;username,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;password,jdbcType=VARCHAR&#125;, #&#123;email,jdbcType=VARCHAR&#125;, #&#123;phone,jdbcType=VARCHAR&#125;, </span><br><span class="line">      #&#123;address,jdbcType=VARCHAR&#125;, #&#123;avatar,jdbcType=VARCHAR&#125;, #&#123;vip,jdbcType=INTEGER&#125;, </span><br><span class="line">      #&#123;purchasetime,jdbcType=VARCHAR&#125;, #&#123;purchasenumber,jdbcType=INTEGER&#125;, #&#123;note,jdbcType=VARCHAR&#125;</span><br><span class="line">      )</span><br><span class="line">  &lt;/insert&gt;</span><br><span class="line">  &lt;insert id=&quot;insertSelective&quot; parameterType=&quot;com.ujs.bookcitydemo.entity.Order&quot;&gt;</span><br><span class="line">    insert into order</span><br><span class="line">    &lt;trim prefix=&quot;(&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;</span><br><span class="line">      &lt;if test=&quot;id != null&quot;&gt;</span><br><span class="line">        id,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;orderid != null&quot;&gt;</span><br><span class="line">        orderid,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookid != null&quot;&gt;</span><br><span class="line">        bookid,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;booknumber != null&quot;&gt;</span><br><span class="line">        booknumber,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookname != null&quot;&gt;</span><br><span class="line">        bookname,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;author != null&quot;&gt;</span><br><span class="line">        author,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;category != null&quot;&gt;</span><br><span class="line">        category,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;price != null&quot;&gt;</span><br><span class="line">        price,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;number != null&quot;&gt;</span><br><span class="line">        number,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;soldoutnumber != null&quot;&gt;</span><br><span class="line">        soldoutnumber,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;description != null&quot;&gt;</span><br><span class="line">        description,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;time != null&quot;&gt;</span><br><span class="line">        time,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;picture != null&quot;&gt;</span><br><span class="line">        picture,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;userid != null&quot;&gt;</span><br><span class="line">        userid,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;</span><br><span class="line">        username,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;password != null&quot;&gt;</span><br><span class="line">        password,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;email != null&quot;&gt;</span><br><span class="line">        email,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;phone != null&quot;&gt;</span><br><span class="line">        phone,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;address != null&quot;&gt;</span><br><span class="line">        address,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;avatar != null&quot;&gt;</span><br><span class="line">        avatar,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;vip != null&quot;&gt;</span><br><span class="line">        vip,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasetime != null&quot;&gt;</span><br><span class="line">        purchasetime,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasenumber != null&quot;&gt;</span><br><span class="line">        purchasenumber,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;note != null&quot;&gt;</span><br><span class="line">        note,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">    &lt;/trim&gt;</span><br><span class="line">    &lt;trim prefix=&quot;values (&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;</span><br><span class="line">      &lt;if test=&quot;id != null&quot;&gt;</span><br><span class="line">        #&#123;id,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;orderid != null&quot;&gt;</span><br><span class="line">        #&#123;orderid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookid != null&quot;&gt;</span><br><span class="line">        #&#123;bookid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;booknumber != null&quot;&gt;</span><br><span class="line">        #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookname != null&quot;&gt;</span><br><span class="line">        #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;author != null&quot;&gt;</span><br><span class="line">        #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;category != null&quot;&gt;</span><br><span class="line">        #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;price != null&quot;&gt;</span><br><span class="line">        #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;number != null&quot;&gt;</span><br><span class="line">        #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;soldoutnumber != null&quot;&gt;</span><br><span class="line">        #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;description != null&quot;&gt;</span><br><span class="line">        #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;time != null&quot;&gt;</span><br><span class="line">        #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;picture != null&quot;&gt;</span><br><span class="line">        #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;userid != null&quot;&gt;</span><br><span class="line">        #&#123;userid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;</span><br><span class="line">        #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;password != null&quot;&gt;</span><br><span class="line">        #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;email != null&quot;&gt;</span><br><span class="line">        #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;phone != null&quot;&gt;</span><br><span class="line">        #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;address != null&quot;&gt;</span><br><span class="line">        #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;avatar != null&quot;&gt;</span><br><span class="line">        #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;vip != null&quot;&gt;</span><br><span class="line">        #&#123;vip,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasetime != null&quot;&gt;</span><br><span class="line">        #&#123;purchasetime,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasenumber != null&quot;&gt;</span><br><span class="line">        #&#123;purchasenumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;note != null&quot;&gt;</span><br><span class="line">        #&#123;note,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">    &lt;/trim&gt;</span><br><span class="line">  &lt;/insert&gt;</span><br><span class="line">  &lt;update id=&quot;updateByPrimaryKeySelective&quot; parameterType=&quot;com.ujs.bookcitydemo.entity.Order&quot;&gt;</span><br><span class="line">    update order</span><br><span class="line">    &lt;set&gt;</span><br><span class="line">      &lt;if test=&quot;orderid != null&quot;&gt;</span><br><span class="line">        orderid = #&#123;orderid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookid != null&quot;&gt;</span><br><span class="line">        bookid = #&#123;bookid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;booknumber != null&quot;&gt;</span><br><span class="line">        booknumber = #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bookname != null&quot;&gt;</span><br><span class="line">        bookname = #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;author != null&quot;&gt;</span><br><span class="line">        author = #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;category != null&quot;&gt;</span><br><span class="line">        category = #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;price != null&quot;&gt;</span><br><span class="line">        price = #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;number != null&quot;&gt;</span><br><span class="line">        number = #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;soldoutnumber != null&quot;&gt;</span><br><span class="line">        soldoutnumber = #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;description != null&quot;&gt;</span><br><span class="line">        description = #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;time != null&quot;&gt;</span><br><span class="line">        time = #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;picture != null&quot;&gt;</span><br><span class="line">        picture = #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;userid != null&quot;&gt;</span><br><span class="line">        userid = #&#123;userid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;</span><br><span class="line">        username = #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;password != null&quot;&gt;</span><br><span class="line">        password = #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;email != null&quot;&gt;</span><br><span class="line">        email = #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;phone != null&quot;&gt;</span><br><span class="line">        phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;address != null&quot;&gt;</span><br><span class="line">        address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;avatar != null&quot;&gt;</span><br><span class="line">        avatar = #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;vip != null&quot;&gt;</span><br><span class="line">        vip = #&#123;vip,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasetime != null&quot;&gt;</span><br><span class="line">        purchasetime = #&#123;purchasetime,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;purchasenumber != null&quot;&gt;</span><br><span class="line">        purchasenumber = #&#123;purchasenumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;note != null&quot;&gt;</span><br><span class="line">        note = #&#123;note,jdbcType=VARCHAR&#125;,</span><br><span class="line">      &lt;/if&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  &lt;/update&gt;</span><br><span class="line">  &lt;update id=&quot;updateByPrimaryKey&quot; parameterType=&quot;com.ujs.bookcitydemo.entity.Order&quot;&gt;</span><br><span class="line">    update order</span><br><span class="line">    set orderid = #&#123;orderid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      bookid = #&#123;bookid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      booknumber = #&#123;booknumber,jdbcType=VARCHAR&#125;,</span><br><span class="line">      bookname = #&#123;bookname,jdbcType=VARCHAR&#125;,</span><br><span class="line">      author = #&#123;author,jdbcType=VARCHAR&#125;,</span><br><span class="line">      category = #&#123;category,jdbcType=VARCHAR&#125;,</span><br><span class="line">      price = #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      number = #&#123;number,jdbcType=INTEGER&#125;,</span><br><span class="line">      soldoutnumber = #&#123;soldoutnumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      description = #&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      time = #&#123;time,jdbcType=VARCHAR&#125;,</span><br><span class="line">      picture = #&#123;picture,jdbcType=VARCHAR&#125;,</span><br><span class="line">      userid = #&#123;userid,jdbcType=VARCHAR&#125;,</span><br><span class="line">      username = #&#123;username,jdbcType=VARCHAR&#125;,</span><br><span class="line">      password = #&#123;password,jdbcType=VARCHAR&#125;,</span><br><span class="line">      email = #&#123;email,jdbcType=VARCHAR&#125;,</span><br><span class="line">      phone = #&#123;phone,jdbcType=VARCHAR&#125;,</span><br><span class="line">      address = #&#123;address,jdbcType=VARCHAR&#125;,</span><br><span class="line">      avatar = #&#123;avatar,jdbcType=VARCHAR&#125;,</span><br><span class="line">      vip = #&#123;vip,jdbcType=INTEGER&#125;,</span><br><span class="line">      purchasetime = #&#123;purchasetime,jdbcType=VARCHAR&#125;,</span><br><span class="line">      purchasenumber = #&#123;purchasenumber,jdbcType=INTEGER&#125;,</span><br><span class="line">      note = #&#123;note,jdbcType=VARCHAR&#125;</span><br><span class="line">    where id = #&#123;id,jdbcType=VARCHAR&#125;</span><br><span class="line">  &lt;/update&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="Util"><a href="#Util" class="headerlink" title="Util"></a>Util</h4><h5 id="CodeGenerateUtil"><a href="#CodeGenerateUtil" class="headerlink" title="CodeGenerateUtil"></a>CodeGenerateUtil</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerateUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SYMBOLS</span> <span class="operator">=</span> <span class="string">&quot;0123456789&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Random</span> <span class="variable">RANDOM</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成6位随机数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回6位数字验证码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateVerCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] nonceChars = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">6</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; nonceChars.length; ++index) &#123;</span><br><span class="line">            nonceChars[index] = SYMBOLS.charAt(RANDOM.nextInt(SYMBOLS.length()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(nonceChars);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="BookSortBySoldOutNumber"><a href="#BookSortBySoldOutNumber" class="headerlink" title="BookSortBySoldOutNumber"></a>BookSortBySoldOutNumber</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookSortBySoldOutNumber</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;Book&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Book o1, Book o2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> number1= o1.getSoldoutnumber();</span><br><span class="line">        <span class="type">int</span> number2=o2.getSoldoutnumber();</span><br><span class="line">        <span class="keyword">if</span>(number1&gt;number2) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(number1&lt;number2) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="BookSortByTime"><a href="#BookSortByTime" class="headerlink" title="BookSortByTime"></a>BookSortByTime</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookSortByTime</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;Book&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Book o1, Book o2)</span> &#123;</span><br><span class="line">        String fullStr1=o1.getTime();</span><br><span class="line">        String fullStr2=o2.getTime();</span><br><span class="line">        <span class="comment">//使用正则表达式获取所有数字</span></span><br><span class="line">        String rule=<span class="string">&quot;[^0-9]&quot;</span>;</span><br><span class="line">        Pattern pattern=Pattern.compile(rule);</span><br><span class="line">        Matcher matcher1=pattern.matcher(fullStr1);</span><br><span class="line">        Matcher matcher2= pattern.matcher(fullStr2);</span><br><span class="line">        <span class="type">long</span> number1= Long.parseLong(matcher1.replaceAll(<span class="string">&quot;&quot;</span>).trim());</span><br><span class="line">        <span class="type">long</span> number2= Long.parseLong(matcher2.replaceAll(<span class="string">&quot;&quot;</span>).trim());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(number1&gt; number2) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(number1&lt;number2) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="DisplayByPages"><a href="#DisplayByPages" class="headerlink" title="DisplayByPages"></a>DisplayByPages</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Book;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DisplayByPages</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> pageSize=<span class="number">5</span>;<span class="comment">//每页显示数据项数量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getPageSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*分页方法*/</span></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;?&gt; pageInfo(<span class="type">int</span> currentPage, List&lt;?&gt; list,<span class="type">int</span> totalCount) &#123;</span><br><span class="line">        <span class="type">PageInfo</span> <span class="variable">pageInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageInfo</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> size=pageSize;</span><br><span class="line">        <span class="keyword">if</span>(totalCount==<span class="number">0</span>)&#123;</span><br><span class="line">            totalCount=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//向上取整得到totalPage</span></span><br><span class="line">        <span class="type">int</span> totalPage;</span><br><span class="line">        <span class="keyword">if</span> (totalCount%size!=<span class="number">0</span>)&#123;</span><br><span class="line">            totalPage = totalCount/size+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            totalPage=totalCount/size;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//页面号不小于1且小于最大页面号</span></span><br><span class="line">        <span class="keyword">if</span>(currentPage &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            currentPage = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(currentPage &gt; totalPage) &#123;</span><br><span class="line">            currentPage = totalPage;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pageInfo.setTotalCount(totalCount);</span><br><span class="line">        pageInfo.setSize(size);</span><br><span class="line">        pageInfo.setTotalPage(totalPage);</span><br><span class="line">        pageInfo.setCurrentPage(currentPage);</span><br><span class="line">        pageInfo.setList(list);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*添加相应数据到Model*/</span></span><br><span class="line">    <span class="keyword">public</span> Model <span class="title function_">pageModel</span><span class="params">(Model model, List&lt;?&gt; list, <span class="type">int</span> currentPage, <span class="type">int</span> pageCount, String str)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pagePrev=currentPage&gt;<span class="number">1</span>?currentPage-<span class="number">1</span>:<span class="number">1</span>;<span class="comment">//上一页</span></span><br><span class="line">        <span class="type">int</span> pageNext=currentPage&lt;pageCount?currentPage+<span class="number">1</span>:pageCount;<span class="comment">//下一页</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNo&quot;</span>, currentPage);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageCount&quot;</span>, pageCount);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pagePrev&quot;</span>, pagePrev);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNext&quot;</span>, pageNext);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;str&quot;</span>,str);</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ListUtil"><a href="#ListUtil" class="headerlink" title="ListUtil"></a>ListUtil</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List <span class="title function_">removeDuplicate</span><span class="params">(List list)</span> &#123;</span><br><span class="line">        <span class="type">HashSet</span> <span class="variable">h</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>(list);</span><br><span class="line">        list.clear();</span><br><span class="line">        list.addAll(h);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="UserRealm"><a href="#UserRealm" class="headerlink" title="UserRealm"></a>UserRealm</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.SimpleAuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义Realm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(UserRealm.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 执行授权逻辑</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arg0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection arg0)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行授权逻辑&quot;</span>);</span><br><span class="line">        <span class="comment">//给资源进行授权</span></span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line">        <span class="comment">//不授权先不写</span></span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 执行认证逻辑</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arg0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken arg0)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行认证逻辑&quot;</span>); <span class="comment">// 编写shiro判断逻辑，判断用户名和密码</span></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> (UsernamePasswordToken) arg0; <span class="comment">// 判断用户名</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getUserByName(token.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123; <span class="comment">// 该用户不存在</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// shiro底层会抛出UnKnowAccountException</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(user, user.getPassword(), <span class="string">&quot;&quot;</span>); <span class="comment">// 判断密码</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Apriori"><a href="#Apriori" class="headerlink" title="Apriori"></a>Apriori</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一种通过频繁项集来挖掘关联规则的算法，实现推荐书籍的功能</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.Order;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.OrderService;</span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Apriori</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> ArrayList&lt;ArrayList&lt;String&gt;&gt; D = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ArrayList&lt;String&gt;&gt;();<span class="comment">// 事务数据库</span></span><br><span class="line">    <span class="keyword">static</span> HashMap&lt;ArrayList&lt;String&gt;, Double&gt; C = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, Double&gt;();<span class="comment">// 项目集</span></span><br><span class="line">    <span class="keyword">static</span> HashMap&lt;ArrayList&lt;String&gt;, Double&gt; L = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, Double&gt;();<span class="comment">// 候选集</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> <span class="variable">min_support</span> <span class="operator">=</span> <span class="number">0.5</span>;<span class="comment">// 最小支持度</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> <span class="variable">min_confident</span> <span class="operator">=</span> <span class="number">0.7</span>;<span class="comment">// 最小置信度</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用于存取候选集每次计算结果，最后计算关联规则</span></span><br><span class="line">    <span class="keyword">static</span> HashMap&lt;ArrayList&lt;String&gt;, Double&gt; L_ALL = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, Double&gt;();</span><br><span class="line">    <span class="comment">// 关联规则</span></span><br><span class="line">    <span class="keyword">static</span> HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; RESULT = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 剪枝步，删去C少于最小支持度的元素，形成L</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pruning</span><span class="params">(HashMap&lt;ArrayList&lt;String&gt;, Double&gt; C,</span></span><br><span class="line"><span class="params">                        HashMap&lt;ArrayList&lt;String&gt;, Double&gt; L)</span> &#123;</span><br><span class="line">        L.clear();</span><br><span class="line">        <span class="comment">// 根据项目集生成候选集</span></span><br><span class="line">        L.putAll(C);</span><br><span class="line">        <span class="comment">// 删除少于最小支持度的元素</span></span><br><span class="line">        ArrayList&lt;ArrayList&lt;String&gt;&gt; delete_key = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ArrayList&lt;String&gt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (ArrayList&lt;String&gt; key : L.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (L.get(key) &lt; min_support) &#123;</span><br><span class="line">                delete_key.add(key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; delete_key.size(); i++) &#123;</span><br><span class="line">            L.remove(delete_key.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化事务数据库、项目集、候选集</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(List&lt;User&gt; userList,ArrayList&lt;List&lt;Order&gt;&gt; orderLists)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将所有用户的所有订单信息放到事务数据库中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; orderLists.size(); i++) &#123;</span><br><span class="line">            ArrayList&lt;String&gt; item = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; orderLists.get(i).size(); j++) &#123;</span><br><span class="line">                String e=orderLists.get(i).get(j).getBookid();</span><br><span class="line">                item.add(e);</span><br><span class="line">            &#125;</span><br><span class="line">            D.add(item);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 扫描事务数据库。生成项目集，支持度=改元素在事务数据库出现的次数/事务数据库的事务数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; D.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; D.get(i).size(); j++) &#123;</span><br><span class="line">                String[] e = &#123; D.get(i).get(j) &#125;;</span><br><span class="line">                ArrayList&lt;String&gt; item = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(Arrays.asList(e));</span><br><span class="line">                <span class="keyword">if</span> (!C.containsKey(item)) &#123;</span><br><span class="line">                    C.put(item, <span class="number">1.0</span> / D.size());</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    C.put(item, C.get(item) + <span class="number">1.0</span> / D.size());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pruning(C, L);<span class="comment">// 剪枝</span></span><br><span class="line"></span><br><span class="line">        L_ALL.putAll(L);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 两个整数集求并集</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title function_">arrayListUnion</span><span class="params">(</span></span><br><span class="line"><span class="params">            ArrayList&lt;String&gt; arraylist1, ArrayList&lt;String&gt; arraylist2)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; arraylist = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        arraylist.addAll(arraylist1);</span><br><span class="line">        arraylist.addAll(arraylist2);</span><br><span class="line">        arraylist = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;(arraylist));</span><br><span class="line">        <span class="keyword">return</span> arraylist;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 迭代求出最终的候选频繁集</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> C</span></span><br><span class="line"><span class="comment">     *            完成初始化的项目集</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> L</span></span><br><span class="line"><span class="comment">     *            完成初始化的候选集</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 最终的候选频繁集</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> HashMap&lt;ArrayList&lt;String&gt;, Double&gt; <span class="title function_">iteration</span><span class="params">(</span></span><br><span class="line"><span class="params">            HashMap&lt;ArrayList&lt;String&gt;, Double&gt; C,</span></span><br><span class="line"><span class="params">            HashMap&lt;ArrayList&lt;String&gt;, Double&gt; L)</span> &#123;</span><br><span class="line">        HashMap&lt;ArrayList&lt;String&gt;, Double&gt; L_temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;ArrayList&lt;String&gt;, Double&gt;();<span class="comment">// 用于判断是否结束剪枝的临时变量</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">// 迭代次数</span></span><br><span class="line">        <span class="keyword">while</span> (L.size() &gt; <span class="number">0</span>) &#123;<span class="comment">// 一旦被剪枝后剪干净，剪枝之前则是最终要求的结果。</span></span><br><span class="line">            t++;</span><br><span class="line">            L_temp.clear();</span><br><span class="line">            L_temp.putAll(L);</span><br><span class="line">            <span class="comment">// 一、连接步</span></span><br><span class="line">            C.clear();</span><br><span class="line">            <span class="comment">// 1.将L中的项以一定的规则两两匹配</span></span><br><span class="line">            ArrayList&lt;ArrayList&lt;String&gt;&gt; L_key = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ArrayList&lt;String&gt;&gt;(</span><br><span class="line">                    L.keySet());</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; L_key.size(); i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; L_key.size(); j++) &#123;</span><br><span class="line">                    ArrayList&lt;String&gt; C_item = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">                    C_item = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;(arrayListUnion(L_key.get(i),</span><br><span class="line">                            L_key.get(j)));</span><br><span class="line">                    <span class="keyword">if</span> (C_item.size() == t) &#123;</span><br><span class="line">                        C.put(C_item, <span class="number">0.0</span>);<span class="comment">// 频繁项集的所有非空子集都必须是频繁的</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 2.通过扫描D，计算此项的支持度</span></span><br><span class="line">            <span class="keyword">for</span> (ArrayList&lt;String&gt; key : C.keySet()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; D.size(); i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (D.get(i).containsAll(key)) &#123;</span><br><span class="line">                        C.put(key, C.get(key) + <span class="number">1.0</span> / D.size());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// System.out.println(C);</span></span><br><span class="line">            <span class="comment">// 二、剪枝步</span></span><br><span class="line">            pruning(C, L);</span><br><span class="line">            <span class="comment">// System.out.println(L);</span></span><br><span class="line">            <span class="comment">// System.out.println(&quot;===&quot;);</span></span><br><span class="line"></span><br><span class="line">            L_ALL.putAll(L);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> L_temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 求一个集合的所有子集</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;ArrayList&lt;String&gt;&gt; <span class="title function_">getSubset</span><span class="params">(ArrayList&lt;String&gt; L)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (L.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ArrayList&lt;ArrayList&lt;String&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ArrayList&lt;String&gt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Math.pow(<span class="number">2</span>, L.size()); i++) &#123;<span class="comment">// 集合子集个数=2的该集合长度的乘方</span></span><br><span class="line">                ArrayList&lt;String&gt; subSet = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">                <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> i;<span class="comment">// 索引从0一直到2的集合长度的乘方-1</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; L.size(); j++) &#123;</span><br><span class="line">                    <span class="comment">// 通过逐一位移，判断索引那一位是1，如果是，再添加此项</span></span><br><span class="line">                    <span class="keyword">if</span> ((index &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;<span class="comment">// 位与运算，判断最后一位是否为1</span></span><br><span class="line">                        subSet.add(L.get(j));</span><br><span class="line">                    &#125;</span><br><span class="line">                    index &gt;&gt;= <span class="number">1</span>;<span class="comment">// 索引右移一位</span></span><br><span class="line">                &#125;</span><br><span class="line">                result.add(subSet); <span class="comment">// 把子集存储起来</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断两个集合相交是否为空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">intersectionIsNull</span><span class="params">(ArrayList&lt;String&gt; l1,</span></span><br><span class="line"><span class="params">                                             ArrayList&lt;String&gt; l2)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; s1 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;(l1);</span><br><span class="line">        Set&lt;String&gt; s2 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;(l2);</span><br><span class="line"></span><br><span class="line">        s1.retainAll(s2);</span><br><span class="line">        <span class="keyword">if</span> (s1.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据最终的关联集，根据公式计算出各个关联事件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (ArrayList&lt;String&gt; key : L.keySet()) &#123;<span class="comment">// 对最终的关联集各个事件进行判断</span></span><br><span class="line">            ArrayList&lt;ArrayList&lt;String&gt;&gt; key_allSubset = getSubset(key);</span><br><span class="line">            <span class="comment">// System.out.println(key_allSubset);</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; key_allSubset.size(); i++) &#123;</span><br><span class="line">                ArrayList&lt;String&gt; item_pre = key_allSubset.get(i);</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> &lt; item_pre.size() &amp;&amp; item_pre.size() &lt; key.size()) &#123;<span class="comment">// 求其非空真子集</span></span><br><span class="line">                    <span class="comment">// 各个非空互补真子集之间形成关联事件</span></span><br><span class="line">                    <span class="type">double</span> <span class="variable">item_pre_support</span> <span class="operator">=</span> L_ALL.get(item_pre);</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; key_allSubset.size(); j++) &#123;</span><br><span class="line">                        ArrayList&lt;String&gt; item_post = key_allSubset.get(j);</span><br><span class="line">                        <span class="keyword">if</span> (<span class="number">0</span> &lt; item_post.size()</span><br><span class="line">                                &amp;&amp; item_post.size() &lt; key.size()</span><br><span class="line">                                &amp;&amp; arrayListUnion(item_pre, item_post).equals(key)</span><br><span class="line">                                &amp;&amp; intersectionIsNull(item_pre, item_post)) &#123;</span><br><span class="line"></span><br><span class="line">                            <span class="type">double</span> <span class="variable">item_post_support</span> <span class="operator">=</span> L_ALL.get(item_post);<span class="comment">// 互补真子集的支持度比则是事件的置信度</span></span><br><span class="line"><span class="comment">//                            double confident = item_pre_support / item_post_support; // 事件的置信度</span></span><br><span class="line">                            <span class="comment">//置信度理解有误，这里做出更改</span></span><br><span class="line">                            <span class="type">double</span> item_pre_num=<span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; D.size(); k++) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (D.get(k).containsAll(item_pre)) &#123;</span><br><span class="line">                                    item_pre_num++;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="type">double</span> item_post_num=<span class="number">0</span>;</span><br><span class="line">                            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; D.size(); k++) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (D.get(k).containsAll(item_pre)&amp;&amp;D.get(k).containsAll(item_post)) &#123;</span><br><span class="line">                                    item_post_num++;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="type">double</span> confident=item_post_num/item_pre_num;<span class="comment">// 事件的置信度</span></span><br><span class="line">                            <span class="comment">//更改结束</span></span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (confident &gt; min_confident) &#123;<span class="comment">// 如果事件的置信度大于最小置信度</span></span><br><span class="line">                                System.out.println(item_pre + <span class="string">&quot;==&gt;&quot;</span> + item_post);<span class="comment">// 则是一个关联事件</span></span><br><span class="line">                                <span class="comment">// 存放关联规则</span></span><br><span class="line">                                RESULT.put(item_pre,item_post);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取结果</span></span><br><span class="line">    <span class="keyword">public</span> HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; <span class="title function_">getResult</span><span class="params">(List&lt;User&gt; userList,ArrayList&lt;List&lt;Order&gt;&gt; orderLists)</span>&#123;</span><br><span class="line">        init(userList, orderLists);</span><br><span class="line">        L = iteration(C, L);</span><br><span class="line">        connection();</span><br><span class="line">        <span class="keyword">return</span> RESULT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2022/01/16/springboot-springmvc-mybatis%E5%AE%9E%E7%8E%B0%E7%BD%91%E4%B8%8A%E4%B9%A6%E5%9F%8E%E7%B3%BB%E7%BB%9F/Apriori.jpg" alt="Apriori算法"></p><h4 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h4><h5 id="KaptchaConfig"><a href="#KaptchaConfig" class="headerlink" title="KaptchaConfig"></a>KaptchaConfig</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.impl.DefaultKaptcha;</span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.util.Config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KaptchaConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DefaultKaptcha <span class="title function_">getDefaultKaptcha</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DefaultKaptcha</span> <span class="variable">defaultKaptcha</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultKaptcha</span>();</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">// 图片边框</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.border&quot;</span>, <span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        <span class="comment">// 边框颜色</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.border.color&quot;</span>, <span class="string">&quot;105,179,90&quot;</span>);</span><br><span class="line">        <span class="comment">// 字体颜色</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.textproducer.font.color&quot;</span>, <span class="string">&quot;black&quot;</span>);</span><br><span class="line">        <span class="comment">// 图片宽</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.image.width&quot;</span>, <span class="string">&quot;110&quot;</span>);</span><br><span class="line">        <span class="comment">// 图片高</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.image.height&quot;</span>, <span class="string">&quot;40&quot;</span>);</span><br><span class="line">        <span class="comment">// 字体大小</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.textproducer.font.size&quot;</span>, <span class="string">&quot;30&quot;</span>);</span><br><span class="line">        <span class="comment">// session key</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.session.key&quot;</span>, <span class="string">&quot;code&quot;</span>);</span><br><span class="line">        <span class="comment">// 验证码长度</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.textproducer.char.length&quot;</span>, <span class="string">&quot;4&quot;</span>);</span><br><span class="line">        <span class="comment">// 字体</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;kaptcha.textproducer.font.names&quot;</span>, <span class="string">&quot;宋体,楷体,微软雅黑&quot;</span>);</span><br><span class="line">        <span class="type">Config</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Config</span>(properties);</span><br><span class="line">        defaultKaptcha.setConfig(config);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> defaultKaptcha;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ShiroConfig"><a href="#ShiroConfig" class="headerlink" title="ShiroConfig"></a>ShiroConfig</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ujs.bookcitydemo.Util.UserRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shiro的配置类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> securityManager</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager securityManager)</span> &#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">shiroFilterFactoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">//设置安全管理器</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加Shiro内置过滤器</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Shiro内置过滤器，可以实现权限相关的拦截器</span></span><br><span class="line"><span class="comment">         *    常用的过滤器：</span></span><br><span class="line"><span class="comment">         *       anon: 无需认证（登录）可以访问</span></span><br><span class="line"><span class="comment">         *       authc: 必须认证才可以访问</span></span><br><span class="line"><span class="comment">         *       user: 如果使用rememberMe的功能可以直接访问</span></span><br><span class="line"><span class="comment">         *       perms： 该资源必须得到资源权限才可以访问</span></span><br><span class="line"><span class="comment">         *       role: 该资源必须得到角色权限才可以访问</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String, String&gt;();</span><br><span class="line">        <span class="comment">// 放行登录页面和主页</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/enterLogin&quot;</span>, <span class="string">&quot;anon&quot;</span>); <span class="comment">// 要将登陆的接口放出来，不然没权限访问登陆的接口</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;anon&quot;</span>);</span><br><span class="line">        <span class="comment">// 授权过滤器</span></span><br><span class="line">        <span class="comment">// 注意：当前授权拦截后，shiro会自动跳转到未授权页面</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/trolley/**&quot;</span>, <span class="string">&quot;authc&quot;</span>);</span><br><span class="line">        filterMap.put(<span class="string">&quot;/order/**&quot;</span>, <span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">&quot;/user/enterLogin&quot;</span>); <span class="comment">// 修改调整的登录页面</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">&quot;/404&quot;</span>); <span class="comment">// 设置未授权提示页面</span></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userRealm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;securityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span> &#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        securityManager.setRealm(userRealm); <span class="comment">// 关联realm</span></span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建Realm</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;userRealm&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">getRealm</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="AlipayConfig"><a href="#AlipayConfig" class="headerlink" title="AlipayConfig"></a>AlipayConfig</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AlipayConfigInfo</span> &#123;</span><br><span class="line">    <span class="comment">// 应用ID,您的APPID，收款账号既是您的APPID对应支付宝账号</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String app_id=<span class="string">&quot;2016102700771439&quot;</span>;</span><br><span class="line">    <span class="comment">// 商户私钥，您的PKCS8格式RSA2私钥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">merchant_private_key</span> <span class="operator">=</span> <span class="string">&quot;MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDS+95TLNSKyYxg28cPny9TNmtvGT1wPBGITclzkslUyFnNxKP9TG0NMXleigv92oDxelJW9kN5njX/ogIlX0SfDljxsT1eBoFdsqu73DnTpbNkNzX+SKl+XANKs0FA3ARAcvff+2JOXpB783V+OmPwXRS69gBRsLfh04gh8tp3tQ2gWYPPyquOSvieia1rk8G7Led9QLtT4PyZMihW4xQinRVDyWD6Eu8yINrN0llHspxJvJCz9fsbW1J4XpjXunHt+80PWb90V/BV7txHrX9XrW+QfH8lXFKQvLugAFX2VgYB+4bvaQcYqTS9VDJQWwz64A4qwh7VlEhqGWY/IpkBAgMBAAECggEANsN/stE5Hgkwsdd6NPjZvNysSDsh8mb1Gg8u0hvwvFwAy2NWOaJD0B/eZAarFCpKO+PHSaFEZGYHmCICMpcm5a5AsgOSbTx9CcgdwXZpYCFrjgCyuB0+OXlCtXoP3vj89YmiA3ZpzvPGxxWrkqcvV62heuHttUaMhEZ22HED+fwA7GW+hQgPLAQLzRehlM/eu9oKV5gDOt79ixPu/Bqk4DV7bIOLwzxYjUUfCrXeymwNb5VuDIQdZlD8//laKxYXaZKJohrkaeG1yDbv30uYBfWgiJlVYYOfex5Lxt/KxxGS4zqzw9n81qzzcNzauYcVDvZ5HkbsVpWNfZ5sr8JrQQKBgQD5CtwaZGDY9NJBuf3FiHYJP9yzUlpyGqshE8W82P9oid7jztFe5ngGcl5oEyFftTT+x41zt2V2J5HEiEI1eOAjl7r7UDgO5ffeuHJ4QJUBEveSFos1kY2I/+b48ESiX16AhGmKEkxfnUyXZ+0zldBC/MtthTYsrdYsr+GbOxYIaQKBgQDY4NDI9F3LnZd6Piwfj+ck+YmLbXyGEZUzyHXDsaI43Vipm98B5jcm6FY5udHdWc2acamDUjixs6hGsjVtffC04u7MeEHum2A1lWilIGa2rdk89ZpVh1T+xKcBKu53ouFmYxMzBF0ZXQanByw4MgUN1UZF8xgPBtysABtvmtq42QKBgEtS+4uH/LriIY37oUPTqE/X3vrl17FXW5cfkdkykN2fhajFbxITBw58HQ3Ba4C1IBhHZwMu3yNDiJU22T+vFavuQoGsm6f16miUxRqV/ftbL0IiS2yiX3qmW8fDdB7gVYbthbZbHnp06yuIJXhKwbjhGO5BMkeFNJhDgisfTeSxAoGBAIpZh/bZpEfy5SGvLZiIxQwaP3r5QhmId+SLuUw4MeMSmK/B5lYg1Qf16KN0fYM1+WnPnjJOrin2EJ/gqSKK15WcuncnM/ARoCMuh43nCH76kf1IM8bhyP+o1VxyVaNt/VnCVAoUe4tlg4vjkHrctcqoRebzd2KGnxj+DIJ6h5KpAoGARRUMdK9NE3pmI+d4A0GeONG6/UXtIySc6SLMyjNueX7fvKmkcnhJUq+Fj4O/Nci6/dSUWKzQz5uJ5s1O878He+i+m3S/GUgDcKtvtvsNGdAwbQWuA4R2xguuPYAgfAaiucCrc8GhK4RDRNIJK/J2fbManqYidMMed0xZYwMaDec=&quot;</span>;</span><br><span class="line">    <span class="comment">// 支付宝公钥,查看地址：https://openhome.alipay.com/platform/keyManage.htm</span></span><br><span class="line">    <span class="comment">// 对应APPID下的支付宝公钥。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">alipay_public_key</span> <span class="operator">=</span> <span class="string">&quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmTYUWfgfso78O9iz4o250Wf7Ta1dgi85fjpCs/jYWzz3T+7OjtQNSiFY9GIxOZJbO35pvBt8oAn5ZwNB3dwLbsCSGd35E8bGa4tClrwyq6IuDgPyKnEz9F8z5lmhjCZQWmKQmNAY1+gnSdYhStyo2A95NPkdUjq7W/facMkRCfuy/JIOOd0w/2YL+4zxnEnkEaZQ2KzGCM5wKMopxCJW7dJVoRnEHhkmKE1xCULUhJz55CFuBbrdk6gPUhUQMuacREp0ggdk5RhCTXhMzhJ6Ld1VK1omv1ag9qqeijLomfiLLSg71y2TOHyfZVEjz5qJopH8YZQHI2srOFDrk0RZSwIDAQAB&quot;</span>;</span><br><span class="line">    <span class="comment">// 服务器异步通知页面路径 需http://格式的完整路径，不能加?id=123这类自定义参数，必须外网可以正常访问</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回的时候此页面不会返回到用户页面，只会执行你写到控制器里的地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String notify_url=<span class="string">&quot;http://localhost:8080/order/addToOrder&quot;</span>;</span><br><span class="line">    <span class="comment">// 页面跳转同步通知页面路径 需http://格式的完整路径，不能加?id=123这类自定义参数，必须外网可以正常访问</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此页面是同步返回用户页面，也就是用户支付后看到的页面，上面的notify_url是异步返回商家操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">return_url</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080&quot;</span>;</span><br><span class="line">    <span class="comment">// 签名方式</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">sign_type</span> <span class="operator">=</span> <span class="string">&quot;RSA2&quot;</span>;</span><br><span class="line">    <span class="comment">// 字符编码格式</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">charset</span> <span class="operator">=</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">    <span class="comment">// 支付宝网关</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String gatewayUrl=<span class="string">&quot;https://openapi.alipaydev.com/gateway.do&quot;</span>;</span><br><span class="line">    <span class="comment">// 日志地址,这里在d盘下要创建这个文件,不然会报错</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">log_path</span> <span class="operator">=</span> <span class="string">&quot;E:/logs/&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日志</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sWord</span></span><br><span class="line"><span class="comment">     *            要写入日志里的文本内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">logResult</span><span class="params">(String sWord)</span> &#123;</span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            writer = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(log_path + <span class="string">&quot;alipay_log_&quot;</span></span><br><span class="line">                    + System.currentTimeMillis() + <span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">            writer.write(sWord);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 应用名称</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">book-city-demo</span></span><br><span class="line"><span class="comment"># 应用服务 WEB 访问端口</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 日志配置</span></span><br><span class="line"><span class="attr">logging.config</span>=<span class="string">classpath:logback.xml</span></span><br><span class="line"><span class="attr">logging.file.path</span>=<span class="string">E:/logs</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># 默认路径</span></span><br><span class="line"><span class="attr">spring.thymeleaf.prefix</span>=<span class="string">classpath:/templates/</span></span><br><span class="line"><span class="comment"># 后缀</span></span><br><span class="line"><span class="attr">spring.thymeleaf.suffix</span>=<span class="string">.html</span></span><br><span class="line"><span class="comment"># 模板格式</span></span><br><span class="line"><span class="attr">spring.thymeleaf.mode</span>=<span class="string">HTML5</span></span><br><span class="line"><span class="attr">spring.thymeleaf.encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="attr">spring.thymeleaf.content-type</span>=<span class="string">text/html</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置数据库连接信息</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/bookcity?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">bookcity</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">lz2001031910167</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#邮件发送配置</span></span><br><span class="line"><span class="attr">spring.mail.default-encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">2382314021@qq.com</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">wowmojcnlrzgdjbi</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.auth</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.enable</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.starttls.required</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><h4 id="logback-xml"><a href="#logback-xml" class="headerlink" title="logback.xml"></a>logback.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;60 seconds&quot;</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 定义日志文件 输入位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;log_dir&quot;</span> <span class="attr">value</span>=<span class="string">&quot;E:/logs&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志最大的历史 30天 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxHistory&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger -%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log_dir&#125;/%d&#123;yyyy-MM-dd&#125;/error-log.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;maxHistory&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log_dir&#125;/%d&#123;yyyy-MM-dd&#125;/info-log.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;maxHistory&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log_dir&#125;/%d&#123;yyyy-MM-dd&#125;/debug-log.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;maxHistory&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.ujs&quot;</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="BookCityDemoApplication"><a href="#BookCityDemoApplication" class="headerlink" title="BookCityDemoApplication"></a>BookCityDemoApplication</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ujs.bookcitydemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.ujs.bookcitydemo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookCityDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(BookCityDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="前端实现"><a href="#前端实现" class="headerlink" title="前端实现"></a>前端实现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">导入Bootstrap和jQuery</span><br></pre></td></tr></table></figure><h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>黑大帅书城<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.js&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            integrity=&quot;sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/index.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/index.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    导航栏--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span> <span class="attr">th:fragment</span>=<span class="string">&quot;navbarIndex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>黑大帅书城<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/&#x27;&#125;&quot;</span>&gt;</span>主页<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>分类<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=文学&#x27;&#125;&quot;</span>&gt;</span>文学<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=心理&#x27;&#125;&quot;</span>&gt;</span>心理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=法律&#x27;&#125;&quot;</span>&gt;</span>法律<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=历史&#x27;&#125;&quot;</span>&gt;</span>历史<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=爱情&#x27;&#125;&quot;</span>&gt;</span>爱情<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=成长&#x27;&#125;&quot;</span>&gt;</span>成长<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=推理&#x27;&#125;&quot;</span>&gt;</span>推理<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=艺术&#x27;&#125;&quot;</span>&gt;</span>艺术<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=科幻&#x27;&#125;&quot;</span>&gt;</span>科幻<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=经济&#x27;&#125;&quot;</span>&gt;</span>经济<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=美食&#x27;&#125;&quot;</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=哲学&#x27;&#125;&quot;</span>&gt;</span>哲学<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--                            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--                            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--                            &lt;li role=&quot;separator&quot; class=&quot;divider&quot;&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--                            &lt;li&gt;&lt;a href=&quot;#&quot;&gt;其他&lt;/a&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=新品&#x27;&#125;&quot;</span>&gt;</span>新品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=热销&#x27;&#125;&quot;</span>&gt;</span>热销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;navbar-form navbar-left&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/book/queryBookList&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;inputBookMessage&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/trolley/enterTrolleyList&quot;</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.USER_INFO&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.USER_INFO.getUsername()&#125;&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/user/enterUserCenter&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.USER_INFO.getAvatar()&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/&#x27;+$&#123;session.USER_INFO.getAvatar()&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                         <span class="attr">width</span>=<span class="string">&quot;35&quot;</span> <span class="attr">height</span>=<span class="string">&quot;35&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/user/enterUserCenter&quot;</span> <span class="attr">th:unless</span>=<span class="string">&quot;$&#123;session.USER_INFO.getAvatar()&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/defaultAvatar.jpg&#x27;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                         <span class="attr">width</span>=<span class="string">&quot;35&quot;</span> <span class="attr">height</span>=<span class="string">&quot;35&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/order/enterOrderList&quot;</span>&gt;</span>订单<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/user/enterUserCenter&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/user/exitLogin&quot;</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">th:unless</span>=<span class="string">&quot;$&#123;session.USER_INFO&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/user/enterLogin&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    轮播图--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;customizeCarouselLocation&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myCarousel&quot;</span> <span class="attr">class</span>=<span class="string">&quot;carousel slide&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 轮播（Carousel）指标 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;carousel-indicators&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#myCarousel&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#myCarousel&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-target</span>=<span class="string">&quot;#myCarousel&quot;</span> <span class="attr">data-slide-to</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 轮播（Carousel）项目 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;carousel-inner&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item active&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/1.jpg&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/picture/1.jpg&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;First slide&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/2.jpg&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/picture/2.jpg&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Second slide&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/3.jpg&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/picture/3.jpg&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Third slide&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 轮播（Carousel）导航 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;left carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#myCarousel&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;prev&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Previous<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;right carousel-control&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#myCarousel&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">data-slide</span>=<span class="string">&quot;next&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Next<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--畅销榜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;customizeHotProduct&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(0).getBookname()&#125;&quot;</span>&gt;</span></span><br><span class="line">                            百年孤独</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(0).getAuthor()&#125;&quot;</span>&gt;</span>作者：马克吐温<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-8&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(0).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/hot1.jpg&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.HOTBOOK_LIST.get(0).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(1).getBookname()&#125;&quot;</span>&gt;</span></span><br><span class="line">                            百年孤独</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(1).getAuthor()&#125;&quot;</span>&gt;</span>作者：马克吐温<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-8&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(1).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/hot1.jpg&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.HOTBOOK_LIST.get(1).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>3<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(2).getBookname()&#125;&quot;</span>&gt;</span></span><br><span class="line">                            百年孤独</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(2).getAuthor()&#125;&quot;</span>&gt;</span>作者：马克吐温<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-8&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(2).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/hot1.jpg&quot;</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.HOTBOOK_LIST.get(2).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-6 col-md-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(3).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(3).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(4).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(4).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(5).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(5).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(6).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(6).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(7).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(7).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(8).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(8).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.HOTBOOK_LIST.get(9).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.HOTBOOK_LIST.get(9).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=热销&#x27;&#125;&quot;</span>&gt;</span>更多&gt;&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--新书上市--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;cta&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">th:style</span>=<span class="string">&quot;&#x27;background: linear-gradient(rgba(66, 84, 81, 0.5), rgba(43, 56, 54, 0.5)), url(/picture/new.jpg) fixed center center&#x27;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>新书上市<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;cta-btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=新品&#x27;&#125;&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--新书缩略图--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;more-services section-bg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(0).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new1.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                     <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.NEWBOOK_LIST.get(0).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(0).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(0).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(0).getId()&#125;&#125;&quot;</span>&gt;</span>查看详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(1).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new2.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                     <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.NEWBOOK_LIST.get(1).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(1).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(1).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(1).getId()&#125;&#125;&quot;</span>&gt;</span>查看详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(2).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new3.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                     <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.NEWBOOK_LIST.get(2).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(2).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.NEWBOOK_LIST.get(2).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.NEWBOOK_LIST.get(2).getId()&#125;&#125;&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.USER_INFO&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--为您推荐--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;cta&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">th:style</span>=<span class="string">&quot;&#x27;background: linear-gradient(rgba(66, 84, 81, 0.5), rgba(43, 56, 54, 0.5)), url(/picture/hot.jpg) fixed center center&#x27;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>为您推荐<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--                &lt;a class=&quot;cta-btn&quot; href=&quot;#&quot; th:href=&quot;@&#123;&#x27;/book/enterBookList?requestPage=新品&#x27;&#125;&quot;&gt;查看更多&lt;/a&gt;--&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--推荐书籍缩略图--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;more-services section-bg&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(0).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new1.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                         <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(0).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(0).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(0).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(0).getId()&#125;&#125;&quot;</span>&gt;</span>查看详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(1).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new2.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                         <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(1).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(1).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(1).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(1).getId()&#125;&#125;&quot;</span>&gt;</span>查看详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-1 d-flex align-items-stretch mb-5 mb-lg-0&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-md-12&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(2).getId()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/new3.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;card-img-top&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span></span></span><br><span class="line"><span class="tag">                                         <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(2).getPicture()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(2).getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.RECOMMENDBOOK_LIST.get(2).getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;session.RECOMMENDBOOK_LIST.get(2).getId()&#125;&#125;&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 页尾 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">th:fragment</span>=<span class="string">&quot;footerIndex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer-top&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-3 col-md-6 footer-info&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>黑大帅书城<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                            江苏镇江<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            江苏大学<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">strong</span>&gt;</span>电话<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> 18664966453<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">strong</span>&gt;</span>邮件<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> 2382314021@qq.com<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-2 col-md-6 footer-links&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>相关链接<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>隐私政策<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>已经不知道写什么了<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-3 col-md-6 footer-links&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>好耶<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>新品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>热销<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>订单信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bx bx-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>个人中心<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4 col-md-6 footer-newsletter&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>联系我<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span>&gt;</span>哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;copyright&quot;</span>&gt;</span></span><br><span class="line">                <span class="symbol">&amp;copy;</span> Copyright <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>黑大帅书城<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>. All Rights Reserved</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;credits&quot;</span>&gt;</span></span><br><span class="line">                Designed by <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>黑大帅<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="bookList-html"><a href="#bookList-html" class="headerlink" title="bookList.html"></a>bookList.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>新品书籍<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bookList.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/newBook.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;newBookTable&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--表格--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;list.size()&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>书名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>作者<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>类别<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>销售量<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>上架时间<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;book:$&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> &gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookMessage?requestBook=&#x27;+$&#123;book.getId()&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                    <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getCategory()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getSoldoutnumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;book.getTime()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--分页按钮--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-offset-3 col-lg-offset-4col-xl-offset-4&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=&#x27;+$&#123;str&#125;+&#x27;?pageNo=1&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=&#x27;+$&#123;str&#125;+&#x27;?pageNo=&#x27;+$&#123;pagePrev&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;laquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">&quot;i:$&#123;#numbers.sequence(1,pageCount)&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=&#x27;+$&#123;str&#125;+&#x27;?pageNo=&#x27;+$&#123;i&#125;&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;i&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                &gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=&#x27;+$&#123;str&#125;+&#x27;?pageNo=&#x27;+$&#123;pageNext&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;raquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/book/enterBookList?requestPage=&#x27;+$&#123;str&#125;+&#x27;?pageNo=&#x27;+$&#123;pageCount&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>尾页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="bookMessage-html"><a href="#bookMessage-html" class="headerlink" title="bookMessage.html"></a>bookMessage.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getBookname()&#125;+&#x27;-详情页&#x27;&quot;</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;thumbnail&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../static/picture/book/bainiangudu.jpg&quot;</span></span></span><br><span class="line"><span class="tag">                                     <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/book/&#x27;+$&#123;bookMessage.getPicture()&#125;&#125;&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>书名<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>作者<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>编号<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getBooknumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>类别<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getCategory()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>价格<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>数量<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getBooknumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>售出数量<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getSoldoutnumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>上架时间<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getTime()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span>&gt;</span>介绍<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;bookMessage.getDescription()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 50px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/order/createOrder&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">th:method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;purchaseNumber&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;需要购买的数量&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;note&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;备注&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;购买&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">formaction</span>=<span class="string">&quot;/trolley/addToTrolley&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">value</span>=<span class="string">&quot;添加至购物车&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="user-1"><a href="#user-1" class="headerlink" title="user"></a>user</h4><h5 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/login.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loginDiv&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎回来<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.open(&#x27;/user/enterRegister&#x27;)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="register-html"><a href="#register-html" class="headerlink" title="register.html"></a>register.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/register.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/register.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/register.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/register.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;registerDiv&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/register&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>加入我们<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">required</span> <span class="attr">pattern</span>=<span class="string">&quot;.&#123;3,16&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;poptip&quot;</span>&gt;</span>仅支持字母、数字和下划线组合！!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;confirmPassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;确认密码&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">required</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--            &lt;input type=&quot;tel&quot; placeholder=&quot;手机号码&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verifyCode&quot;</span> <span class="attr">id</span>=<span class="string">&quot;displayKaptcha&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;验证码&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;verifyCodeFrom&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;verifyCodeImg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;验证码&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;this.src=&#x27;defaultKaptcha?d=&#x27;+new Date()*1&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">src</span>=<span class="string">&quot;defaultKaptcha&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.open(&#x27;/user/enterLogin&#x27;)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="emailCode-html"><a href="#emailCode-html" class="headerlink" title="emailCode.html"></a>emailCode.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>邮箱验证码<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/login.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/login.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;emailCodeDiv&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/user/addUser&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;inputEmailCode&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱验证码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="userCenter-html"><a href="#userCenter-html" class="headerlink" title="userCenter.html"></a>userCenter.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户中心<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>用户名<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.USER_INFO.getUsername()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>邮箱<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.USER_INFO.getEmail()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>联系方式<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.USER_INFO.getPhone()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>联系地址<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.USER_INFO.getAddress()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-2 col-md-offset-5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 50px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/enterAlterUser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">th:method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改账号&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/alterUserAvatar&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;session.USER_INFO.getAvatar()&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;&#x27;/picture/&#x27;+$&#123;session.USER_INFO.getAvatar()&#125;&#125;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;...&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;50px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="alter-html"><a href="#alter-html" class="headerlink" title="alter.html"></a>alter.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>修改个人信息<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/login.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/login.css&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alterDiv&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user/alterUserData&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>修改信息<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">th:text</span>=<span class="string">&quot;&#x27;用户名：&#x27;+$&#123;session.USER_INFO.getUsername()&#125;&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;h4&gt;VIP等级&lt;/h4&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;邮箱&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;session.USER_INFO.getEmail()&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;电话&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;session.USER_INFO.getPhone()&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;session.USER_INFO.getAddress()&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;br&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;img th:src=&quot;@&#123;&#x27;/picture/&#x27;+$&#123;session.USER_INFO.getAvatar()&#125;&#125;&quot;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                 width=&quot;40&quot; height=&quot;40&quot; alt=&quot;avatar&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;input type=&quot;file&quot; name=&quot;avatar&quot; placeholder=&quot;头像&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;input type=&quot;text&quot; name=&quot;avatar&quot; placeholder=&quot;头像&quot;&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;返回&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.open(&#x27;/&#x27;)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="purchase"><a href="#purchase" class="headerlink" title="purchase"></a>purchase</h4><h5 id="trolley-html"><a href="#trolley-html" class="headerlink" title="trolley.html"></a>trolley.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bookList.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/newBook.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;newBookTable&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--表格--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;trolley : $&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trolley.getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trolley.getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trolley.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trolley.getPurchasenumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trolley.getNote()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/createOrder?trolleyData=&#x27;+$&#123;trolley.getId()&#125;+&#x27;,&#x27;+$&#123;trolley.getPurchasenumber()&#125;+&#x27;,&#x27;+$&#123;trolley.getNote()&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span>&gt;</span>购买<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--分页按钮--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-offset-4 col-lg-offset-4col-xl-offset-4&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/trolley/enterTrolleyList?pageNo=1&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/trolley/enterTrolleyList?pageNo=&#x27;+$&#123;pagePrev&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;laquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">&quot;i:$&#123;#numbers.sequence(1,pageCount)&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/trolley/enterTrolleyList?pageNo=&#x27;+$&#123;i&#125;&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;i&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                &gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/trolley/enterTrolleyList?pageNo=&#x27;+$&#123;pageNext&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;raquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/trolley/enterTrolleyList?pageNo=&#x27;+$&#123;pageCount&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>尾页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="order-html"><a href="#order-html" class="headerlink" title="order.html"></a>order.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>订单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bookList.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/newBook.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;newBookTable&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--表格--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;order : $&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;order.getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;order.getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;order.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;order.getPurchasenumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;order.getNote()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--分页按钮--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-offset-4 col-lg-offset-4col-xl-offset-4&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/enterOrderList?pageNo=1&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/enterOrderList?pageNo=&#x27;+$&#123;pagePrev&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;laquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">&quot;i:$&#123;#numbers.sequence(1,pageCount)&#125;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/enterOrderList?pageNo=&#x27;+$&#123;i&#125;&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;i&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                &gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/enterOrderList?pageNo=&#x27;+$&#123;pageNext&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;raquo;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span></span></span><br><span class="line"><span class="tag">                                   <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/order/enterOrderList?pageNo=&#x27;+$&#123;pageCount&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>尾页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="orderMessage-html"><a href="#orderMessage-html" class="headerlink" title="orderMessage.html"></a>orderMessage.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>订单详情页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/bootstrap.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/bootstrap.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../static/css/public.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/public.css&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/jquery.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/jquery.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../static/js/bootstrap.js&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/bootstrap.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入公共导航栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::navbarIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-6 col-md-6 col-md-offset-3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>书名<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getBookname()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>作者<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getAuthor()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>编号<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getBooknumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>价格<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>购买数量<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getPurchasenumber()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>联系方式<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getPhone()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>联系地址<span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getAddress()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span>&gt;</span>总计价格</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.ORDER_MESSAGE.getPurchasenumber()*session.ORDER_MESSAGE.getPrice()&#125;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-2 col-md-offset-5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 50px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/alipay/goAlipay&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">th:method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;支付宝支付&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入公共页尾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;index/index::footerIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><h5 id="public-css"><a href="#public-css" class="headerlink" title="public.css"></a>public.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*--------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 背景</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------*/</span></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ff2a2a</span>, <span class="number">#b6e5f8</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradientBG <span class="number">8s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradientBG&#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*--------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 导航栏相关</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------*/</span></span><br><span class="line"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*--------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 页尾部分</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------*/</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#4d635f</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">60px</span> <span class="number">0</span> <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-info</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-info</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-info</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Roboto&quot;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.social-links</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#58716d</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.social-links</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1bbca3</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#56e7d0</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-links</span> <span class="selector-tag">ul</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#40e4ca</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-newsletter</span> <span class="selector-tag">form</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-newsletter</span> <span class="selector-tag">form</span> <span class="selector-tag">input</span><span class="selector-attr">[type=email]</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">110px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-newsletter</span> <span class="selector-tag">form</span> <span class="selector-tag">input</span><span class="selector-attr">[type=submit]</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1bbca3</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.footer-top</span> <span class="selector-class">.footer-newsletter</span> <span class="selector-tag">form</span> <span class="selector-tag">input</span><span class="selector-attr">[type=submit]</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#158f7c</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.copyright</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> <span class="selector-class">.credits</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="index-css"><a href="#index-css" class="headerlink" title="index.css"></a>index.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.customizeCarouselLocation</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.customizeHotProduct</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.customizeHotProduct-Part</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.customizeHotProduct-picture</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.customizeNewProduct</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">200px</span> <span class="number">10px</span> <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="comment">/*border-top:2px solid black;*/</span></span><br><span class="line">    <span class="comment">/*border-bottom:2px solid black;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.customizeNewProduct-caption</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*--------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># cta</span></span><br><span class="line"><span class="comment">--------------------------------------------------------------*/</span></span><br><span class="line"><span class="selector-class">.cta</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="built_in">rgba</span>(<span class="number">66</span>, <span class="number">84</span>, <span class="number">81</span>, <span class="number">0.5</span>), <span class="built_in">rgba</span>(<span class="number">43</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">0.5</span>)), <span class="built_in">url</span>(<span class="string">&quot;../../static/picture/new.jpg&quot;</span>) fixed center center;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">60px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cta</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cta</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cta</span> <span class="selector-class">.cta-btn</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Poppins&quot;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#1bbca3</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cta</span> <span class="selector-class">.cta-btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1bbca3</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#1bbca3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.card-body</span> &#123;</span><br><span class="line">    -moz-<span class="attribute">text-align-last</span>: center;</span><br><span class="line">    <span class="attribute">text-align-last</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.card-title</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#334240</span>;</span><br><span class="line">    <span class="attribute">transition</span>: ease-in-out <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.card-title</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#1bbca3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">30px</span> <span class="number">6px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#1bbca3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.more-services</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1bbca3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="login-css"><a href="#login-css" class="headerlink" title="login.css"></a>login.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ff2a2a</span>, <span class="number">#b6e5f8</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradientBG <span class="number">8s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradientBG&#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.loginDiv</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">65%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FCFBFA</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*邮箱页面*/</span></span><br><span class="line"><span class="selector-class">.emailCodeDiv</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FCFBFA</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*修改用户信息页面*/</span></span><br><span class="line"><span class="selector-class">.alterDiv</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">5%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">750px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FCFBFA</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#c4c3ca</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid black;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">78</span>, <span class="number">73</span>, <span class="number">79</span>, .<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">25%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid white;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*.inputDiv input[type = &quot;submit&quot;]:focus,.inputDiv input[type = &quot;button&quot;]:focus&#123;*/</span></span><br><span class="line"><span class="comment">/*    color: black;*/</span></span><br><span class="line"><span class="comment">/*    background-color: white;*/</span></span><br><span class="line"><span class="comment">/*&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.loginDiv</span>&#123;</span><br><span class="line">        <span class="attribute">top</span>:<span class="number">10%</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">65%</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#FCFBFA</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">h1</span>&#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">form</span>&#123;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">input</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>: white;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#c4c3ca</span>;</span><br><span class="line">        <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">        <span class="attribute">outline</span>: none;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid black;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">78</span>, <span class="number">73</span>, <span class="number">79</span>, .<span class="number">5</span>);</span><br><span class="line">        <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background</span>: black;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">25%</span>;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid white;</span><br><span class="line">        <span class="attribute">color</span>: white;</span><br><span class="line">        <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="register-css"><a href="#register-css" class="headerlink" title="register.css"></a>register.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ff2a2a</span>, <span class="number">#b6e5f8</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradientBG <span class="number">8s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradientBG&#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.registerDiv</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">7%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">86%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FCFBFA</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#c4c3ca</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid black;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">78</span>, <span class="number">73</span>, <span class="number">79</span>, .<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkCode</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span>,<span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: black;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">25%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid white;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.25s</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;button&quot;</span>]</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type = <span class="string">&quot;submit&quot;</span>]</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:focus</span>) + <span class="selector-class">.poptip</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">animation</span>: elastic-dec .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> + <span class="selector-class">.poptip</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="attribute">animation</span>: elastic-grow .<span class="number">45s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.poptip</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">236px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">6em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fafafa</span>;</span><br><span class="line">    <span class="comment">/*position: relative;*/</span></span><br><span class="line">    <span class="comment">/*margin-left: -3px;*/</span></span><br><span class="line">    <span class="comment">/*margin-top: 3px;*/</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">23456</span>));</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">15px</span> -<span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.poptip</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="comment">/*top: -6px; */</span></span><br><span class="line">    <span class="comment">/*left: 10px;*/</span></span><br><span class="line">    <span class="comment">/*border: 9px solid transparent;*/</span></span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-right-color</span>: <span class="number">#fafafa</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.verifyCodeFrom</span>&#123;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.verifyCodeImg</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> elastic-grow &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">70%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(.<span class="number">1</span>, .<span class="number">25</span>, .<span class="number">1</span>, .<span class="number">25</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> elastic-dec &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>, .<span class="number">1</span>, .<span class="number">25</span>, .<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="bookList-css"><a href="#bookList-css" class="headerlink" title="bookList.css"></a>bookList.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ff2a2a</span>, <span class="number">#b6e5f8</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradientBG <span class="number">8s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradientBG&#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.newBookTable</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="js"><a href="#js" class="headerlink" title="js"></a>js</h4><h5 id="register-js"><a href="#register-js" class="headerlink" title="register.js"></a>register.js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> displayKaptchaBtn=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;displayKaptcha&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> verifyCodeFrom=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;verifyCodeFrom&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> registerForm=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;registerForm&quot;</span>);</span><br><span class="line"></span><br><span class="line">    displayKaptchaBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        verifyCodeFrom[<span class="number">0</span>].<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;visible&#x27;</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> Spring MVC </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSM框架实现增加、删除、查询、分页显示功能</title>
      <link href="/2021/12/10/ssm%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/"/>
      <url>/2021/12/10/ssm%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h3><p><img src="/2021/12/10/ssm%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/project-directory.png" alt="工程目录图片"></p><h3 id="搭建SSM框架"><a href="#搭建SSM框架" class="headerlink" title="搭建SSM框架"></a><a href="https://blog.csdn.net/yeyazhishang/article/details/86650053?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.highlightwordscore&spm=1001.2101.3001.4242.1">搭建SSM框架</a></h3><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p><em>主要描述项目的maven坐标，依赖关系，开发者需要遵循的规则，缺陷管理系统，组织和licenses，以及其他所有的项目相关因素。</em></p><span id="more"></span><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">srping.version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">srping.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.2.8<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">druid.version</span>&gt;</span>1.0.9<span class="tag">&lt;/<span class="name">druid.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- spring框架包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;srping.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- spring框架包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis框架包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis框架包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.35<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 导入dbcp的jar包，用来在applicationContext.xml中配置数据库 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- jstl标签类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 连接池 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 文件上传 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#日志输出级别</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">debug,stdout,D,E</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#设置stdout的日志输出控制台</span></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="comment">#输出日志到控制台的方式，默认为System.out</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="comment">#设置使用灵活布局</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="comment">#灵活定义输出格式</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; -[%p]  method:[%c (%rms)] - %m%n</span></span><br></pre></td></tr></table></figure><h4 id="jdbc-properties"><a href="#jdbc-properties" class="headerlink" title="jdbc.properties"></a>jdbc.properties</h4><p><em>数据库配置文件，设置数据库连接信息。</em></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/j2ee?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">J2EE</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">lz2001031910167</span></span><br><span class="line"><span class="comment">#定义初始连接数</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#定义最大连接数</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">20</span></span><br><span class="line"><span class="comment">#定义最大空闲</span></span><br><span class="line"><span class="attr">maxIdle</span>=<span class="string">20</span></span><br><span class="line"><span class="comment">#定义最小空闲</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">1</span></span><br><span class="line"><span class="comment">#定义最长等待时间</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">60000</span></span><br></pre></td></tr></table></figure><h4 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h4><p><em>Spring配置文件，借助IOC创建对象，引入数据库配置文件采用数据库连接池进行连接，实现MyBatis映射文件的扫描。</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">                        http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 加载properties文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;propertyConfigurer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;location&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置数据源 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mybatis和spring完美整合，不需要mybatis的配置映射文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描model包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.pojo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描sql配置文件:mapper需要的xml文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapping/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Mapper动态代理开发，扫描dao接口包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给出需要扫描Dao接口包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 事务管理 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库连接池--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="spring-mvc-xml"><a href="#spring-mvc-xml" class="headerlink" title="spring-mvc.xml"></a>spring-mvc.xml</h4><p><em>Spring MVC的配置文件，实现控制器的扫描和视图解析器的配置等操作。</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 扫描注解，这样com.xjt包下的文件都能被扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 开启SpringMVC注解模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 静态资源默认servlet配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置返回视图的路径，以及识别后缀是jsp文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 文件上传配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设定默认编码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 设定文件上传的最大值2MB， 2*1024*1024 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2097152&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h4><p><em>实现Spring的加载和Spring MVC前端控制器的配置以及编码自动转换过滤器等配置。</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--项目的欢迎页，项目运行起来后访问的页面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 注册ServletContext监听器，创建容器对象，并且将ApplicationContext对象放到Application域中 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 指定spring核心配置文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 解决乱码的过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置前端控制器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定配置文件位置和名称 如果不设置,默认找/WEB-INF/&lt;servlet-name&gt;-servlet.xml --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">async-supported</span>&gt;</span>true<span class="tag">&lt;/<span class="name">async-supported</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置Tomcat"><a href="#配置Tomcat" class="headerlink" title="配置Tomcat"></a>配置Tomcat</h3><h3 id="实现分页显示"><a href="#实现分页显示" class="headerlink" title="实现分页显示"></a><a href="https://www.freesion.com/article/15511054391/">实现分页显示</a></h3><h3 id="实现文件上传"><a href="#实现文件上传" class="headerlink" title="实现文件上传"></a><a href="https://www.cnblogs.com/yiyfang/p/14218804.html">实现文件上传</a></h3><h4 id="Commodity-java"><a href="#Commodity-java" class="headerlink" title="Commodity.java"></a>Commodity.java</h4><p><em>数据库表对应的映射类</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Commodity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> remainNumber;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> soldOutNumber;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> String picture;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemainNumber</span><span class="params">(<span class="type">int</span> remainNumber)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.remainNumber = remainNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRemainNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> remainNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSoldOutNumber</span><span class="params">(<span class="type">int</span> soldOutNumber)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.soldOutNumber = soldOutNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSoldOutNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> soldOutNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPicture</span><span class="params">(String picture)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.picture = picture;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPicture</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> picture;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="PageInfo-java"><a href="#PageInfo-java" class="headerlink" title="PageInfo.java"></a>PageInfo.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageInfo</span>&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalCount;  <span class="comment">//总数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;        <span class="comment">//每页显示数量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> totalPage;   <span class="comment">//总页数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> currentPage; <span class="comment">//当前页</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;    <span class="comment">//当前页显示</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">getList</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;T&gt; list)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalCount</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> totalCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalCount</span><span class="params">(<span class="type">int</span> totalCount)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalCount = totalCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSize</span><span class="params">(<span class="type">int</span> size)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getTotalPage</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> totalPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotalPage</span><span class="params">(<span class="type">int</span> totalPage)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.totalPage = totalPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCurrentPage</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentPage</span><span class="params">(<span class="type">int</span> currentPage)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.currentPage = currentPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;PageInfo&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;list=&quot;</span> + list +</span><br><span class="line">                <span class="string">&quot;, totalCount=&quot;</span> + totalCount +</span><br><span class="line">                <span class="string">&quot;, size=&quot;</span> + size +</span><br><span class="line">                <span class="string">&quot;, totalPage=&quot;</span> + totalPage +</span><br><span class="line">                <span class="string">&quot;, currentPage=&quot;</span> + currentPage +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CommodityDao-java"><a href="#CommodityDao-java" class="headerlink" title="CommodityDao.java"></a>CommodityDao.java</h4><p><em>操作数据库的接口</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pojo.Commodity;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CommodityDao</span> &#123;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">selectAllLimit</span><span class="params">(<span class="meta">@Param(&quot;start&quot;)</span> <span class="type">int</span> start, <span class="meta">@Param(&quot;size&quot;)</span><span class="type">int</span> size)</span>;</span><br><span class="line">    Commodity <span class="title function_">selectByPrimaryKey</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">selectByName</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">insert</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CommodityMapper-xml"><a href="#CommodityMapper-xml" class="headerlink" title="CommodityMapper.xml"></a>CommodityMapper.xml</h4><p><em>MyBatis映射文件</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dao.CommodityDao&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.pojo.Commodity&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;price&quot;</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;DOUBLE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;remainNumber&quot;</span> <span class="attr">property</span>=<span class="string">&quot;remainNumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;soldOutNumber&quot;</span> <span class="attr">property</span>=<span class="string">&quot;soldOutNumber&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;description&quot;</span> <span class="attr">property</span>=<span class="string">&quot;description&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;picture&quot;</span> <span class="attr">property</span>=<span class="string">&quot;picture&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span> &gt;</span></span><br><span class="line">    id, name, price, remainNumber, soldOutNumber, description, picture</span><br><span class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span> &gt;</span></span><br><span class="line">        select * from commodity_1029</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllLimit&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span> &gt;</span></span><br><span class="line">        select * from commodity_1029 limit #&#123;start&#125;,#&#123;size&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPrimaryKey&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> &gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">        from commodity_1029</span><br><span class="line">        where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByName&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> &gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">        from commodity_1029</span><br><span class="line">        where name like CONCAT(&quot;%&quot;,#&#123;name ,jdbcType=VARCHAR&#125;,&quot;%&quot;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByPrimaryKey&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> &gt;</span></span><br><span class="line">    delete from commodity_1029</span><br><span class="line">    where id = #&#123;id,jdbcType=INTEGER&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.pojo.Commodity&quot;</span> &gt;</span></span><br><span class="line">    insert into commodity_1029 (id, name, price,remainNumber,soldOutNumber,</span><br><span class="line">      description,picture)</span><br><span class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;name,jdbcType=VARCHAR&#125;, #&#123;price,jdbcType=DOUBLE&#125;,</span><br><span class="line">      #&#123;remainNumber,jdbcType=INTEGER&#125;,#&#123;soldOutNumber,jdbcType=INTEGER&#125;,#&#123;description,jdbcType=VARCHAR&#125;,</span><br><span class="line">      #&#123;picture,jdbcType=VARCHAR&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="TestService-java"><a href="#TestService-java" class="headerlink" title="TestService.java"></a>TestService.java</h4><p><em>业务逻辑层接口</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pojo.Commodity;</span><br><span class="line"><span class="keyword">import</span> com.pojo.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestService</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">insert</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">queryOne</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line">    PageInfo&lt;Commodity&gt; <span class="title function_">queryByPage</span><span class="params">(<span class="type">int</span> currentPage)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TestServiceImpl-java"><a href="#TestServiceImpl-java" class="headerlink" title="TestServiceImpl.java"></a>TestServiceImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pojo.Commodity;</span><br><span class="line"><span class="keyword">import</span> com.pojo.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestService</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">insert</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">queryOne</span><span class="params">(Commodity commodity)</span>;</span><br><span class="line">    List&lt;Commodity&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line">    PageInfo&lt;Commodity&gt; <span class="title function_">queryByPage</span><span class="params">(<span class="type">int</span> currentPage)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CommodityController-java"><a href="#CommodityController-java" class="headerlink" title="CommodityController.java"></a>CommodityController.java</h4><p><em>控制器类</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pojo.Commodity;</span><br><span class="line"><span class="keyword">import</span> com.service.TestService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/commodity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommodityController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TestService testService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">display</span><span class="params">(Model model, <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="type">int</span> currentPage,</span></span><br><span class="line"><span class="params">                          HttpServletRequest request)</span>&#123;</span><br><span class="line">        String str=request.getParameter(<span class="string">&quot;pageNo&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (str!=<span class="literal">null</span>)&#123;</span><br><span class="line">            currentPage= Integer.parseInt(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> pageCount=testService.queryByPage(currentPage).getTotalPage();</span><br><span class="line">        <span class="type">int</span> pagePrev=currentPage&gt;<span class="number">1</span>?currentPage-<span class="number">1</span>:<span class="number">1</span>;<span class="comment">//上一页</span></span><br><span class="line">        <span class="type">int</span> pageNext=currentPage&lt;pageCount?currentPage+<span class="number">1</span>:pageCount;<span class="comment">//下一页</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;commoditys&quot;</span>,testService.queryByPage(currentPage).getList());</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNo&quot;</span>, currentPage);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageCount&quot;</span>, pageCount);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNow&quot;</span>, currentPage);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pagePrev&quot;</span>, pagePrev);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;pageNext&quot;</span>, pageNext);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/query&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">queryOne</span><span class="params">(Commodity commodity,Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;queryCommoditys&quot;</span>,testService.queryOne(commodity));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;queryResult&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/delete&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(Commodity commodity,Model model)</span>&#123;</span><br><span class="line">        testService.delete(commodity);</span><br><span class="line"><span class="comment">//        model.addAttribute(&quot;deleteFlag&quot;,testService.delete(commodity));</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/commodity/index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/insert&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">insert</span><span class="params">(Commodity commodity, Model model,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile pictureFile, HttpServletRequest request)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置图片名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">picName</span> <span class="operator">=</span> pictureFile.getOriginalFilename();</span><br><span class="line">        commodity.setPicture(picName);</span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/Java Project/SSMProject/&quot;</span> +</span><br><span class="line">                <span class="string">&quot;Commodity_Message_Query/src/main/resources/picture&quot;</span>,picName);</span><br><span class="line">        <span class="keyword">if</span>(!dir.exists())&#123;</span><br><span class="line">            dir.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//开始上传</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pictureFile.transferTo(dir);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException exception) &#123;</span><br><span class="line">            exception.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        testService.insert(commodity);</span><br><span class="line"><span class="comment">//        model.addAttribute(&quot;insertFlag&quot;,testService.insert(commodity));</span></span><br><span class="line">        <span class="comment">//跳转到主页面(控制器之间的跳转)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/commodity/index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h4><p><em>主页面</em></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">         pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;商品主页&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/commodity/query&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span> placeholder=<span class="string">&quot;输入需要查询的商品ID&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submits&quot;</span> value=<span class="string">&quot;查询商品&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/commodity/query&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> placeholder=<span class="string">&quot;输入需要查询的商品名称&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submits&quot;</span> value=<span class="string">&quot;查询商品&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/commodity/delete&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;id&quot;</span> placeholder=<span class="string">&quot;输入需要删除的商品ID&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submits&quot;</span> value=<span class="string">&quot;删除商品&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/commodity/insert&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> placeholder=<span class="string">&quot;商品名称&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;price&quot;</span> placeholder=<span class="string">&quot;商品价格&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;remainNumber&quot;</span> placeholder=<span class="string">&quot;商品数量&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;description&quot;</span> placeholder=<span class="string">&quot;商品描述&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span> value=<span class="string">&quot;上传商品图片&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submits&quot;</span> value=<span class="string">&quot;增加商品&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h2&gt;商品列表&lt;/h2&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;c:forEach items=<span class="string">&quot;$&#123;commoditys&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;s&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">                    &lt;img src=<span class="string">&quot;picture/$&#123;s.picture&#125;&quot;</span> alt=<span class="string">&quot;图片&quot;</span> width=<span class="string">&quot;200px&quot;</span> height=<span class="string">&quot;150px&quot;</span>&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.id&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.name&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.price&#125;元&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.remainNumber&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.soldOutNumber&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.description&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;!--分页链接 --&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/commodity/index?pageNo=1&quot;</span>&gt;首页&lt;/a&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/commodity/index?pageNo=$&#123;pagePrev&#125;&quot;</span>&gt;上一页&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">    &lt;c:forEach begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;$&#123;pageCount&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;/commodity/index?pageNo=$&#123;i&#125;&quot;</span>&gt;$&#123;i&#125;&lt;/a&gt; &amp;nbsp;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/commodity/index?pageNo=$&#123;pageNext&#125;&quot;</span>&gt;下一页&lt;/a&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/commodity/index?pageNo=$&#123;pageCount&#125;&quot;</span>&gt;尾页&lt;/a&gt;</span><br><span class="line">    &lt;!--选择菜单--&gt;</span><br><span class="line">    &lt;select onchange=<span class="string">&quot;window.location=this.value;&quot;</span>&gt;</span><br><span class="line">        &lt;c:forEach begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;$&#123;pageCount&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">            &lt;c:choose&gt;</span><br><span class="line">                &lt;c:<span class="keyword">when</span> test=<span class="string">&quot;$&#123;pageNow == i &#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;option value=<span class="string">&quot;/commodity/index?pageNo=$&#123;i&#125;&quot;</span></span><br><span class="line">                            selected=<span class="string">&quot;selected&quot;</span>&gt;$&#123;i&#125;&lt;/option&gt;</span><br><span class="line">                &lt;/c:<span class="keyword">when</span>&gt;</span><br><span class="line">                &lt;c:otherwise&gt;</span><br><span class="line">                    &lt;option value=<span class="string">&quot;/commodity/index?pageNo=$&#123;i&#125;&quot;</span>&gt;$&#123;i&#125;&lt;/option&gt;</span><br><span class="line">                &lt;/c:otherwise&gt;</span><br><span class="line">            &lt;/c:choose&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="queryResult-jsp"><a href="#queryResult-jsp" class="headerlink" title="queryResult.jsp"></a>queryResult.jsp</h4><p><em>查询结果显示页面</em></p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Lenovo</span><br><span class="line">  Date: <span class="number">2021</span>/<span class="number">12</span>/<span class="number">9</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">42</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">         pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/html4/loose.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;查询结果&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h2&gt;商品列表&lt;/h2&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;c:forEach items=<span class="string">&quot;$&#123;queryCommoditys&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;s&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">                    &lt;img src=<span class="string">&quot;picture/$&#123;s.picture&#125;&quot;</span> alt=<span class="string">&quot;图片&quot;</span> width=<span class="string">&quot;200px&quot;</span> height=<span class="string">&quot;150px&quot;</span>&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.id&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.name&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.price&#125;元&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.remainNumber&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.soldOutNumber&#125;&lt;/td&gt;</span><br><span class="line">                &lt;td align=<span class="string">&quot;center&quot;</span>&gt;$&#123;s.description&#125;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">400错误 - Required MultipartFile parameter &#x27;files&#x27; is not present</span><br><span class="line">1.检查spring-mvc.xml配置中有没有添加文件上传解析，没有的话需要加上。</span><br><span class="line">2.控制器方法参数加上@RequestParam(&quot;&quot;) 并加上名称，名称不能方法中的参数名相同，但是要与提交上的数据的key相同，即@RequestParam(&quot;file&quot;)与index.jsp中&lt;input type=&quot;file&quot; name=&quot;file&quot; value=&quot;上传商品图片&quot;&gt;对应</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">400错误 - 由于被认为是客户端对错误（例如：畸形的请求语法、无效的请求信息帧或者虚拟的请求路由），服务器无法或不会处理当前请求。</span><br><span class="line">参数需要对应，参考https://blog.csdn.net/qq_43639081/article/details/109511868</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
            <tag> Spring </tag>
            
            <tag> Spring MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis</title>
      <link href="/2021/11/16/mybatis/"/>
      <url>/2021/11/16/mybatis/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="新建Maven项目"><a href="#新建Maven项目" class="headerlink" title="新建Maven项目"></a><a href="https://www.cnblogs.com/zzvar/articles/14596785.html">新建Maven项目</a></h3><p><em>添加配置项信息</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DarchetypeCatalog=internal</span><br></pre></td></tr></table></figure><p><em>新建文件夹进行关联</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src/main/java -&gt; Sources Root</span><br><span class="line">src/main/resources -&gt; Resources Root</span><br><span class="line">src/test/java -&gt; Test Sources Root</span><br><span class="line">src/test/resources -&gt; Test Resources Root</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="添加相关依赖"><a href="#添加相关依赖" class="headerlink" title="添加相关依赖"></a>添加相关依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--mybatis--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.4.6&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--数据库相关 jar 包--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.3.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="数据库配置文件"><a href="#数据库配置文件" class="headerlink" title="数据库配置文件"></a>数据库配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- 环境配置 --&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;!-- 数据库连接相关配置 --&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;!-- 映射文件路径配置 --&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource=&quot;&quot;/&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><h3 id="映射文件"><a href="#映射文件" class="headerlink" title="映射文件"></a>映射文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line"> PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line"> &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;&quot;&gt;</span><br><span class="line">&lt;select id=&quot;&quot;&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;insert id=&quot;&quot;&gt;</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line">&lt;update id=&quot;&quot;&gt;</span><br><span class="line">&lt;/update&gt;</span><br><span class="line">&lt;delete id=&quot;&quot;&gt;</span><br><span class="line">&lt;/delete&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tomcat</title>
      <link href="/2021/09/30/tomcat/"/>
      <url>/2021/09/30/tomcat/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><a href="https://blog.csdn.net/weixin_45193229/article/details/114323970">安装</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意JDK版本与Tomcat版本</span><br></pre></td></tr></table></figure><h4 id="通过startup-bat启动时窗口出现乱码"><a href="#通过startup-bat启动时窗口出现乱码" class="headerlink" title="通过startup.bat启动时窗口出现乱码"></a>通过startup.bat启动时窗口出现乱码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">命令行输入chcp(显示&quot;活动代码页: 936&quot;则表示系统编码格式为GB2312编码)</span><br><span class="line">打开文件D:\apache-tomcat-8.5.64-windows-x64\apache-tomcat-8.5.64\conf\logging.properties</span><br><span class="line">查找java.util.logging.ConsoleHandler.encoding</span><br><span class="line">将UTF-8改成GBK</span><br></pre></td></tr></table></figure><p>注：在IDEA文件编码格式中也要一致，否则运行中出现乱码</p><span id="more"></span><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:8080</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a><a href="https://blog.csdn.net/qq_43487456/article/details/110123493">配置</a></h3><p>IDEA2020创建JavaWeb工程，需要注意如下方面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.编辑配置Tomcat部署栏添加构建</span><br><span class="line">2.项目结构中库(Libraries)添加Tomcat安装位置下lib文件夹中servlet-api.jar包(Maven项目不需要)</span><br><span class="line">3.新建servlet添加映射路径(例：@WebServlet(name = “Servlet”,urlPatterns = “/Servlet”))</span><br><span class="line">4.如需配置图片文件夹，在Deployment中添加External Source即可</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo主题界面美化</title>
      <link href="/2021/09/19/hexo%E4%B8%BB%E9%A2%98%E7%95%8C%E9%9D%A2%E7%BE%8E%E5%8C%96/"/>
      <url>/2021/09/19/hexo%E4%B8%BB%E9%A2%98%E7%95%8C%E9%9D%A2%E7%BE%8E%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="CSS更改"><a href="#CSS更改" class="headerlink" title="CSS更改"></a>CSS更改</h3><h4 id="样式参考"><a href="#样式参考" class="headerlink" title="样式参考"></a><a href="https://blog.luzy.top/">样式参考</a></h4><h4 id="成果参考"><a href="#成果参考" class="headerlink" title="成果参考"></a><a href="https://blog.liiz.top/">成果参考</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件目录:myblog\themes\yilia\source\main.0cf68a.css</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">左边侧边栏</span><br><span class="line">.left-col&#123;</span><br><span class="line">侧边栏菜单</span><br><span class="line">.left-col #header .profilepic(头像)</span><br><span class="line">.left-col #header .header-menu(主页菜单)</span><br><span class="line">.left-col #header .header-smart-menu(所有文章等项目菜单)</span><br><span class="line">#header .header-nav .social(社交按钮菜单)</span><br><span class="line">自己添加部分</span><br><span class="line">#header .header-nav .music(网易云音乐)</span><br><span class="line">#poem_sentence(每日一句诗歌)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">右侧文章(註：在2194行)</span><br><span class="line">.article&#123;</span><br><span class="line">文章区域右上角日期</span><br><span class="line">.archive-article-date</span><br><span class="line">文章标题</span><br><span class="line">.article-inner h1.article-title,.article-title</span><br><span class="line">文章右下角展开全文</span><br><span class="line">.article-more-link a</span><br><span class="line">文章下方分割线</span><br><span class="line">.article-info-index.article-info</span><br><span class="line">文章中超链接</span><br><span class="line">.article-entry a</span><br><span class="line">&#125;</span><br><span class="line">回到顶部按钮</span><br><span class="line">.mod-side-operation__jump-to-top .icon-back</span><br><span class="line">.jump-container:hover .icon-back</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">颜色渐变动画</span><br><span class="line">@keyframes gradientBG</span><br><span class="line">淡出淡入动画</span><br><span class="line">@keyframes load_music</span><br><span class="line">横拉动画</span><br><span class="line">@keyframes before_Load_Left_col</span><br><span class="line">@keyframes after_Load_Left_col</span><br><span class="line">缩放动画</span><br><span class="line">@keyframes before_load_article</span><br><span class="line">@keyframes after_load_arricle</span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">手机端首部背景</span><br><span class="line">#mobile-nav .overlay</span><br><span class="line">手机端部分设置</span><br><span class="line">@media screen and (max-width:800px)</span><br></pre></td></tr></table></figure><h5 id="打字效果"><a href="#打字效果" class="headerlink" title="打字效果"></a><a href="https://lhammer.cn/You-need-to-know-css/#/zh-cn/typing">打字效果</a></h5><h5 id="抖动效果"><a href="#抖动效果" class="headerlink" title="抖动效果"></a><a href="https://lhammer.cn/You-need-to-know-css/#/zh-cn/shake">抖动效果</a></h5><h5 id="边框动画"><a href="#边框动画" class="headerlink" title="边框动画"></a><a href="https://qishaoxuan.github.io/css_tricks/hover/#%E8%BE%B9%E6%A1%86%E5%8A%A8%E7%94%BB">边框动画</a></h5><h5 id="鼠标点击出现爱心效果"><a href="#鼠标点击出现爱心效果" class="headerlink" title="鼠标点击出现爱心效果"></a><a href="https://blog.csdn.net/qq_43827595/article/details/100177617">鼠标点击出现爱心效果</a></h5><h5 id="雪花飘落效果"><a href="#雪花飘落效果" class="headerlink" title="雪花飘落效果"></a><a href="https://blog.csdn.net/weixin_41287260/article/details/103050877?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163186087316780357272525%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=163186087316780357272525&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-1-103050877.pc_v2_rank_blog_default&utm_term=hexo&spm=1018.2226.3001.4450">雪花飘落效果</a></h5><h3 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h3><h4 id="1-Chrome浏览器访问显示三个滚动条"><a href="#1-Chrome浏览器访问显示三个滚动条" class="headerlink" title="1. Chrome浏览器访问显示三个滚动条"></a>1. Chrome浏览器访问显示三个滚动条</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">调整::-webkit-scrollbar选择器display:none，Chrome浏览器一个滚动条也没有</span><br></pre></td></tr></table></figure><h4 id="2-文章标题抖动"><a href="#2-文章标题抖动" class="headerlink" title="2. 文章标题抖动"></a>2. <del>文章标题抖动</del></h4><p>在CSS文件的选择器.article-inner h1.article-title,.article-title添加抖动功能,但出现以整一行中心为锚点抖动的情况<br>目前处理办法(改变锚点)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform-origin: 5%;</span><br></pre></td></tr></table></figure><hr><p>已解决</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display:flex-&gt;display: inline-flex;</span><br></pre></td></tr></table></figure><h4 id="3-每日一句功能"><a href="#3-每日一句功能" class="headerlink" title="3. 每日一句功能"></a>3. 每日一句功能</h4><p>侧边栏部分</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yilia\layout\_partial\left-col.ejs(26-40);</span><br><span class="line">CSS:width: 21ch;-&gt;???</span><br></pre></td></tr></table></figure><p>页脚部分(可不进行修改)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yilia\layout\_partial\footer.ejs(10-11);</span><br></pre></td></tr></table></figure><h4 id="4-添加隐藏侧边栏功能"><a href="#4-添加隐藏侧边栏功能" class="headerlink" title="4. 添加隐藏侧边栏功能"></a>4. 添加隐藏侧边栏功能</h4><p>参考文章:<a href="https://blog.csdn.net/weixin_41287260/article/details/103050753">秦时明月之君临天下</a><br>问题在于JavaScript代码无法获取对于CSS选择器<br>原代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> hide = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        x.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;change&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(hide == <span class="literal">false</span>)&#123;</span><br><span class="line">            $(<span class="string">&quot;.left-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">            $(<span class="string">&quot;.mid-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;left&quot;</span>, <span class="number">6</span>);</span><br><span class="line">            $(<span class="string">&quot;.tools-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">            $(<span class="string">&quot;.tools-col.hide&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">            hide = <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">&quot;.left-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            $(<span class="string">&quot;.mid-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;left&quot;</span>, <span class="number">300</span>);</span><br><span class="line">            $(<span class="string">&quot;.tools-col&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            $(<span class="string">&quot;.tools-col.hide&quot;</span>).<span class="title function_">css</span>(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            hide = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>改代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> hide = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">x</span>) &#123;</span><br><span class="line">        x.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;change&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(hide == <span class="literal">false</span>)&#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;left-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;mid-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">left</span>=<span class="string">&quot;6&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;tools-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;hide&quot;</span>)[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span><br><span class="line">            hide = <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;left-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;block&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;mid-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">left</span>=<span class="string">&quot;300&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;tools-col&quot;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;block&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;hide&quot;</span>)[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;block&quot;</span>;</span><br><span class="line">            hide = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>改完问题在于document.getElementsByClassName(“hide”)[1]无法获取CSS选择器<br>查看网页源代码发现.tools-col.hide类对应HTML代码如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;tools-col&quot; q-class=&quot;show:isShow,hide:isShow|isFalse&quot; q-on=&quot;click:stop(e)&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>仍然无法解决…</p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> yilia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ThinkPHP</title>
      <link href="/2021/08/28/thinkphp/"/>
      <url>/2021/08/28/thinkphp/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://www.kancloud.cn/manual/thinkphp6_0/1037479">ThinkPHP6.0完全开发手册</a><br><a href="https://www.bilibili.com/video/BV12E411y7u8">ThinkPHP6.0学习视频</a></p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="URL正确跳转"><a href="#URL正确跳转" class="headerlink" title="URL正确跳转"></a>URL正确跳转</h3><p>两种方法</p><h4 id="1-设置伪静态，即URL重写"><a href="#1-设置伪静态，即URL重写" class="headerlink" title="1.设置伪静态，即URL重写"></a>1.设置伪静态，即<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037488">URL重写</a></h4><p>将以下内容保存为.htaccess文件放到应用入口文件的同级目录下（ThinkPHP自动创建，在public文件下）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Apache</span><br><span class="line">&lt;IfModule mod_rewrite.c&gt;</span><br><span class="line">  Options +FollowSymlinks -Multiviews</span><br><span class="line">  RewriteEngine On</span><br><span class="line"></span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">  RewriteRule ^(.*)$ index.php/<span class="variable">$1</span> [QSA,PT,L]</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">Nginx</span><br><span class="line"><span class="keyword">if</span> (!-e <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">rewrite ^(.*)$ /index.php?s=<span class="variable">$1</span> last; <span class="built_in">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-跳转地址加入-s"><a href="#2-跳转地址加入-s" class="headerlink" title="2.跳转地址加入?s="></a>2.跳转地址加入?s=</h4><p>如HTML中的&#60;a&#62;标签的属性href=”Index/main”在未设置伪静态时访问出现404错误，改成href=”?s=Index/main”即可正常访问</p><h5 id="关于验证码问题，未设置伪静态时图片无法显示（同样404错误）"><a href="#关于验证码问题，未设置伪静态时图片无法显示（同样404错误）" class="headerlink" title="关于验证码问题，未设置伪静态时图片无法显示（同样404错误）"></a>关于验证码问题，未设置伪静态时图片无法显示（同样404错误）</h5><p>在vendor\topthink\think-captcha\src\helper.php的captcha_img方法中更改return语句</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">return</span> <span class="string">&quot;&lt;img src=&#x27;?s=&#123;<span class="variable">$src</span>&#125;&#x27; alt=&#x27;captcha&#x27; &quot;</span> . <span class="variable">$domid</span> . <span class="string">&quot; onclick=&#x27;this.src=\&quot;?s=&#123;<span class="variable">$src</span>&#125;?\&quot;+Math.random();&#x27; /&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="开启Session"><a href="#开启Session" class="headerlink" title="开启Session"></a>开启Session</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app目录下全局中间件文件middleware.php将&#x27;think\middleware\SessionInit&#x27;注释取消</span><br></pre></td></tr></table></figure><h3 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require topthink/think-captcha</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;:captcha_img()&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="phpmailer"><a href="#phpmailer" class="headerlink" title="phpmailer"></a>phpmailer</h3><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require phpmailer/phpmailer</span><br></pre></td></tr></table></figure><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><h5 id="邮箱发送验证码"><a href="#邮箱发送验证码" class="headerlink" title="邮箱发送验证码"></a>邮箱发送验证码</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">function</span> <span class="function"><span class="title">sendMail</span></span>()&#123;</span><br><span class="line">  <span class="variable">$mailCode</span>=<span class="variable">$this</span>-&gt;createMailCheckCode();</span><br><span class="line">  session(<span class="string">&quot;mailCode&quot;</span>,<span class="variable">$mailCode</span>);</span><br><span class="line">  <span class="variable">$username</span>=session(<span class="string">&quot;registerData&quot;</span>)[<span class="string">&quot;username&quot;</span>];</span><br><span class="line">  <span class="variable">$receiveMailAddress</span>=session(<span class="string">&quot;registerData&quot;</span>)[<span class="string">&quot;email&quot;</span>];</span><br><span class="line">  try &#123;</span><br><span class="line">    <span class="variable">$mail</span> = new PHPMailer();</span><br><span class="line">    <span class="variable">$mail</span>-&gt;isSMTP();</span><br><span class="line">    <span class="variable">$mail</span>-&gt;CharSet = <span class="string">&quot;utf8&quot;</span>;</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Host = <span class="string">&quot;smtp.163.com&quot;</span>;// 发送方的SMTP服务器地址</span><br><span class="line">    <span class="variable">$mail</span>-&gt;SMTPAuth = <span class="literal">true</span>;// 是否使用身份验证</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Username = <span class="string">&quot;&quot;</span>;// 发送方的163邮箱用户名</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Password = <span class="string">&quot;&quot;</span>;// 发送方的邮箱密码,客户端授权密码</span><br><span class="line">    <span class="variable">$mail</span>-&gt;SMTPSecure = <span class="string">&quot;ssl&quot;</span>;// 使用ssl协议方式</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Port = 465;// 163邮箱的ssl协议方式端口号是465/994</span><br><span class="line">    <span class="variable">$mail</span>-&gt;setFrom(<span class="string">&quot;&quot;</span>,<span class="string">&quot;Ori官方&quot;</span>);// 设置发件人信息</span><br><span class="line">    <span class="variable">$mail</span>-&gt;addAddress(<span class="variable">$receiveMailAddress</span>,<span class="string">&#x27;用户&#x27;</span>);// 设置收件人信息</span><br><span class="line">    //<span class="variable">$mail</span>-&gt;addReplyTo(<span class="string">&quot;***@qq.com&quot;</span>,<span class="string">&quot;回复人姓名&quot;</span>);//</span><br><span class="line">    //<span class="variable">$mail</span>-&gt;addCC(<span class="string">&quot;xxx@163.com&quot;</span>);// 设置邮件抄送人</span><br><span class="line">    //<span class="variable">$mail</span>-&gt;addBCC(<span class="string">&quot;xxx@163.com&quot;</span>);// 设置秘密抄送人</span><br><span class="line">    //<span class="variable">$mail</span>-&gt;addAttachment(<span class="string">&quot;bug0.jpg&quot;</span>);// 添加附件</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Subject = <span class="string">&quot;Ori验证码邮件&quot;</span>;// 邮件标题</span><br><span class="line">    <span class="variable">$mail</span>-&gt;isHTML(<span class="literal">true</span>);// 邮件正文为html格式</span><br><span class="line">    // 邮件正文</span><br><span class="line">    <span class="variable">$mail</span>-&gt;Body = ;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$mail</span>-&gt;send())&#123;// 发送邮件</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Mailer Error: &quot;</span>.<span class="variable">$mail</span>-&gt;ErrorInfo;// 输出错误信息</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">return</span> \view(<span class="string">&quot;mailCode&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;catch (ValidateException <span class="variable">$exception</span>)&#123;</span><br><span class="line">  dump(<span class="variable">$exception</span>-&gt;getError());</span><br><span class="line">&#125;</span><br><span class="line">alerts(<span class="string">&quot;发送失败，请稍后再试!&quot;</span>);</span><br><span class="line"><span class="built_in">return</span> \view(<span class="string">&quot;register&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">//生成随机验证码</span><br><span class="line">public <span class="keyword">function</span> createMailCheckCode(<span class="variable">$length</span> = 6)&#123;</span><br><span class="line">  <span class="variable">$min</span> = pow(10 , (<span class="variable">$length</span> - 1));</span><br><span class="line">  <span class="variable">$max</span> = pow(10, <span class="variable">$length</span>) - 1;</span><br><span class="line">  <span class="built_in">return</span> rand(<span class="variable">$min</span>, <span class="variable">$max</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>哒哒哒</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ThinkPHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBlog</title>
      <link href="/2021/08/19/myblog/"/>
      <url>/2021/08/19/myblog/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>参考文章:<a href="https://blog.csdn.net/wapchief/article/details/54602515?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162935875116780366584586%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=162935875116780366584586&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-54602515.first_rank_v2_pc_rank_v29&utm_term=hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99&spm=1018.2226.3001.4187">hexo+github</a>.</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="注册域名"><a href="#注册域名" class="headerlink" title="注册域名"></a>注册域名</h3><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><h3 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装<a href="https://nodejs.org/en/">nodejs</a></h3><p>验证安装是否成功(其中npm为安装nodejs时附带,git安装自行百度)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">$ npm -v</span><br><span class="line">$ git --version</span><br></pre></td></tr></table></figure><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br><span class="line">$ hexo -v</span><br></pre></td></tr></table></figure><h3 id="初始化Hexo"><a href="#初始化Hexo" class="headerlink" title="初始化Hexo"></a><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029">初始化Hexo</a></h3><p>新建文件夹myblog，右键git bash here</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br><span class="line">$ npm install</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>此时在浏览器输入localhost:4000就可以看到生成的博客页面</p><h3 id="修改内容"><a href="#修改内容" class="headerlink" title="修改内容"></a>修改内容</h3><p>参考<a href="https://hexo.io/zh-cn/docs/">官方文档</a><br>注意需要如下修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/Alucard-9/Alucard-9.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><h3 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">安装部署工具，方便以后更新</span><br><span class="line">$ npm install hexo-deployer-git -save</span><br><span class="line">初始化本地仓库</span><br><span class="line">$ git init</span><br><span class="line">连接远程仓库</span><br><span class="line">$ git remote add origin https://github.com/Alucard-9/Alucard-9.github.io.git</span><br><span class="line">发布hexo到github page(清空、刷新、部署)</span><br><span class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="Github-Pages设置"><a href="#Github-Pages设置" class="headerlink" title="Github Pages设置"></a>Github Pages<a href="https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site">设置</a></h3><h3 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h3><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><h3 id="设置yilia背景"><a href="#设置yilia背景" class="headerlink" title="设置yilia背景"></a>设置yilia背景</h3><p><a href="https://blog.csdn.net/qq_45857922/article/details/113545469?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.control&spm=1001.2101.3001.4242">甦傑</a><br><a href="https://blog.csdn.net/weixin_41287260/article/details/103050813">秦时</a><br>(註：article在2029行)</p><h3 id="设置鼠标点击出现爱心效果"><a href="#设置鼠标点击出现爱心效果" class="headerlink" title="设置鼠标点击出现爱心效果"></a><a href="https://blog.csdn.net/qq_43827595/article/details/100177617">设置鼠标点击出现爱心效果</a></h3><h3 id="背景雪花飘落效果"><a href="#背景雪花飘落效果" class="headerlink" title="背景雪花飘落效果"></a><a href="https://blog.csdn.net/weixin_41287260/article/details/103050877?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163186087316780357272525%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=163186087316780357272525&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-1-103050877.pc_v2_rank_blog_default&utm_term=hexo&spm=1018.2226.3001.4450">背景雪花飘落效果</a></h3><h3 id="Github图床设置"><a href="#Github图床设置" class="headerlink" title="Github图床设置"></a><a href="https://blog.csdn.net/allen_csdns/article/details/103389093">Github图床设置</a></h3><h3 id="文章置顶"><a href="#文章置顶" class="headerlink" title="文章置顶"></a><a href="https://blog.csdn.net/weixin_41287260/article/details/97693850">文章置顶</a></h3><h3 id="添加评论"><a href="#添加评论" class="headerlink" title="添加评论"></a><a href="https://blog.csdn.net/qq_43827595/article/details/101450966?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163015460316780271581026%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=163015460316780271581026&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-5-101450966.pc_v2_rank_blog_default&utm_term=hexo&spm=1018.2226.3001.4450">添加评论</a></h3>]]></content>
      
      
      <categories>
          
          <category> Base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown</title>
      <link href="/2021/08/19/markdown/"/>
      <url>/2021/08/19/markdown/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h3><p><a href="https://www.typora.io/">Typora</a><br><a href="https://www.sublimetext.com/">Sublime Text</a></p><span id="more"></span><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><h4 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"><span class="section">###### 六级标题</span></span><br></pre></td></tr></table></figure><h4 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*斜体文本*</span></span><br><span class="line"><span class="emphasis">_斜体文本_</span></span><br><span class="line"><span class="strong">**粗体文本**</span></span><br><span class="line"><span class="strong">__粗体文本__</span></span><br><span class="line"><span class="strong">**<span class="emphasis">*粗斜体文本*</span>**</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_粗斜体文本_</span>__</span></span><br><span class="line">~ ~删除线文本~ ~</span><br></pre></td></tr></table></figure><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 第一项</span><br><span class="line"><span class="bullet">*</span> 第二项</span><br><span class="line"><span class="bullet">*</span> 第三项</span><br><span class="line"><span class="bullet">+</span> 第一项</span><br><span class="line"><span class="bullet">-</span> 第一项</span><br><span class="line"><span class="bullet">1.</span> 第一项</span><br><span class="line"><span class="bullet">2.</span> 第二项</span><br><span class="line"><span class="bullet">3.</span> 第三项</span><br><span class="line">列表嵌套只需在子列表中的选项前面添加四个空格</span><br><span class="line"><span class="bullet">1.</span> 第一项：</span><br><span class="line"><span class="bullet">    -</span> 第一项嵌套的第一个元素</span><br><span class="line"><span class="bullet">    -</span> 第一项嵌套的第二个元素</span><br></pre></td></tr></table></figure><h4 id="区块"><a href="#区块" class="headerlink" title="区块"></a>区块</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 最外层</span></span><br><span class="line"><span class="quote">&gt; &gt; 第一层嵌套</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; 第二层嵌套</span></span><br></pre></td></tr></table></figure><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;RUNOOB&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">链接名称</span>](<span class="link">链接地址</span>)</span><br><span class="line">或</span><br><span class="line">&lt;链接地址&gt;</span><br></pre></td></tr></table></figure><h4 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">alt 属性文本</span>](<span class="link">图片地址</span>)</span><br><span class="line">![<span class="string">alt 属性文本</span>](<span class="link">图片地址 &quot;可选标题&quot;</span>)</span><br><span class="line">表格</span><br><span class="line">| 左对齐 | 右对齐 | 居中对齐 |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br></pre></td></tr></table></figure><h4 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><h4 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">使用 <span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Ctrl<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Alt<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Del<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span> 重启电脑</span><br><span class="line">以下符号前面加反斜杠帮助插入普通符号</span><br><span class="line">\   反斜线</span><br><span class="line">`   反引号</span><br><span class="line"><span class="bullet">*</span>   星号</span><br><span class="line">_   下划线</span><br><span class="line">&#123;&#125;  花括号</span><br><span class="line">[]  方括号</span><br><span class="line">()  小括号</span><br><span class="line"><span class="section">#   井字号</span></span><br><span class="line"><span class="bullet">+</span>   加号</span><br><span class="line"><span class="bullet">-</span>   减号</span><br><span class="line">.   英文句点</span><br><span class="line">!   感叹号</span><br></pre></td></tr></table></figure><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
      
      
      <categories>
          
          <category> Base </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
