---
title: SplaTAM
date: 2026-01-29 15:27:24
updated:
tags: ["3DGS"]
categories: 3D Reconstruction
keywords:
description:
top_img:
comments:
cover:
toc:
toc_number:
toc_style_simple:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
mathjax:
katex:
aplayer:
highlight_shrink:
aside:
abcjs:
noticeOutdate:
---

## æµç¨‹

### ç®€åŒ–3DGS

åªä½¿ç”¨äº†è§†å›¾æ— å…³æ€§é¢œè‰²ï¼Œå¹¶å¼ºåˆ¶é«˜æ–¯æ˜¯å„å‘åŒæ€§çš„ã€‚è¿™æ„å‘³ç€æ¯ä¸ªé«˜æ–¯ä»…ç”±8ä¸ªå€¼å‚æ•°åŒ–ï¼š3ä¸ªä¸ºå…¶RGBé¢œè‰²ï¼Œ3ä¸ªä¸ºå…¶ä¸­å¿ƒä½ç½®ï¼Œ1ä¸ªä¸ºå…¶åŠå¾„ï¼Œ1ä¸ªä¸ºå…¶ä¸é€æ˜åº¦

### å¯å¾®æ¸²æŸ“

ç»™å®šä¸€ç»„3Dé«˜æ–¯å’Œç›¸æœºä½å§¿ï¼Œé¦–å…ˆå°†æ‰€æœ‰é«˜æ–¯ä»å‰åˆ°åæ’åºã€‚ ç„¶åï¼Œé€šè¿‡å°†æ¯ä¸ªé«˜æ–¯çš„äºŒç»´æŠ•å½±æŒ‰é¡ºåºåœ¨åƒç´ ç©ºé—´è¿›è¡Œalphaç»„åˆï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ¸²æŸ“RGBå›¾åƒ

### SLAMç³»ç»Ÿ

- åˆå§‹åŒ–

  - å¯¹äºç¬¬ä¸€å¸§ï¼Œå¯¹äºæ¯ä¸ªåƒç´ ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„é«˜æ–¯ï¼Œå…¶é¢œè‰²ä¸ºè¯¥åƒç´ çš„é¢œè‰²ï¼Œä¸­å¿ƒåœ¨è¯¥åƒç´ æ·±åº¦çš„æœªæŠ•å½±ä½ç½®ï¼Œä¸é€æ˜åº¦ä¸º0.5ï¼ŒæŠ•å½±åˆ°äºŒç»´å›¾åƒä¸Šçš„åŠå¾„ç­‰äºä¸€åƒç´ åŠå¾„ï¼Œç”¨æ·±åº¦é™¤ä»¥ç„¦è·å¾—åˆ°

- ç›¸æœºè¿½è¸ª

  - ç›¸æœºå‚æ•°åˆå§‹åŒ– $$ Et+1 = Et + (Et - Et-1) $$
  - åŸºäºæ¢¯åº¦çš„ä¼˜åŒ–è¿­ä»£æ›´æ–°ç›¸æœºä½å§¿ï¼Œé€šè¿‡å·®åˆ†æ¸²æŸ“RGBï¼Œæ·±åº¦å’Œå‰ªå½±å›¾ï¼Œå¹¶æ›´æ–°ç›¸æœºå‚æ•°ï¼Œä»¥æœ€å°åŒ–ä»¥ä¸‹æŸå¤±ï¼ŒåŒæ—¶ä¿æŒé«˜æ–¯å‚æ•°å›ºå®š
  - åªä½¿ç”¨æˆ‘ä»¬æ¸²æŸ“çš„å¯è§æ€§å‰ªå½±æ¥åº”ç”¨ä»åœ°å›¾çš„ä¼˜åŒ–éƒ¨åˆ†æ¸²æŸ“çš„åƒç´ çš„æŸå¤±ï¼Œè¯¥å‰ªå½±æ•æ‰äº†åœ°å›¾çš„è®¤çŸ¥ä¸ç¡®å®šæ€§ã€‚è¿™å¯¹äºè·Ÿè¸ªæ–°çš„ç›¸æœºå§¿æ€éå¸¸é‡è¦ï¼Œå› ä¸ºé€šå¸¸æ–°çš„å¸§åŒ…å«æ–°çš„ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯åœ¨æˆ‘ä»¬çš„åœ°å›¾ä¸­å°šæœªè¢«æ•è·æˆ–å¾ˆå¥½åœ°ä¼˜åŒ–ã€‚å¦‚æœä¸€ä¸ªåƒç´ æ²¡æœ‰çœŸå€¼æ·±åº¦ï¼ŒL1æŸå¤±ä¹Ÿä¸º0
  
- è‡´å¯†åŒ–

  - åœ¨è·Ÿè¸ªä¹‹åï¼Œæˆ‘ä»¬å¯¹è¿™ä¸€å¸§çš„ç›¸æœºä½å§¿æœ‰ä¸€ä¸ªå‡†ç¡®çš„ä¼°è®¡ï¼Œå¹¶ä¸”é€šè¿‡ä¸€å¹…æ·±åº¦å›¾åƒï¼Œæˆ‘ä»¬å¯¹åœºæ™¯ä¸­çš„é«˜æ–¯åº”è¯¥åœ¨å“ªé‡Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä¼°è®¡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›åœ¨å½“å‰é«˜æ–¯å·²ç»ç²¾ç¡®è¡¨ç¤ºåœºæ™¯å‡ ä½•çš„æƒ…å†µä¸‹æ·»åŠ é«˜æ–¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè‡´å¯†åŒ–æ©è†œæ¥ç¡®å®šå“ªäº›åƒç´ åº”è¯¥è¢«è‡´å¯†åŒ–

- é«˜æ–¯åœ°å›¾æ›´æ–°

  - è¿™ä¸€æ­¥æ˜¯åœ¨å·²çŸ¥ä¼°è®¡çš„åœ¨çº¿ç›¸æœºå§¿æ€é›†åˆçš„æƒ…å†µä¸‹ï¼Œæ›´æ–°3Dé«˜æ–¯æ˜ å°„çš„å‚æ•°ã€‚è¿™åˆæ˜¯é€šè¿‡å¯å¾®æ¸²æŸ“å’ŒåŸºäºæ¢¯åº¦çš„ä¼˜åŒ–æ¥å®Œæˆçš„ï¼Œç„¶è€Œä¸è·Ÿè¸ªä¸åŒçš„æ˜¯ï¼Œåœ¨è¿™ç§è®¾ç½®ä¸­ï¼Œç›¸æœºçš„å§¿æ€æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”é«˜æ–¯çš„å‚æ•°æ˜¯æ›´æ–°çš„
  - è¿™ç›¸å½“äºå°†è¾å°„åœºæ‹Ÿåˆåˆ°å·²çŸ¥å§¿æ€çš„å›¾åƒçš„"ç»å…¸"é—®é¢˜ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åšäº†ä¸¤ä¸ªé‡è¦çš„ä¿®æ”¹ã€‚è€Œä¸æ˜¯ä»å¤´å¼€å§‹ï¼Œæˆ‘ä»¬ä»æœ€è¿‘æ„å»ºçš„åœ°å›¾ä¸­çƒ­å¯åŠ¨ä¼˜åŒ–ã€‚æˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¯¹æ‰€æœ‰ä»¥å‰çš„(å…³é”®)å¸§è¿›è¡Œä¼˜åŒ–ï¼Œè€Œæ˜¯é€‰æ‹©å¯èƒ½å½±å“æ–°æ·»åŠ çš„é«˜æ–¯çš„å¸§ã€‚æˆ‘ä»¬å°†æ¯ç¬¬nå¸§ä¿å­˜ä¸ºä¸€ä¸ªå…³é”®å¸§ï¼Œå¹¶é€‰æ‹©kä¸ªå…³é”®å¸§è¿›è¡Œä¼˜åŒ–ï¼ŒåŒ…æ‹¬å½“å‰å¸§ã€æœ€è¿‘å…³é”®å¸§ä»¥åŠä¸å½“å‰å¸§é‡å åº¦æœ€é«˜çš„å‰k-2ä¸ªå…³é”®å¸§ã€‚é‡å åº¦é€šè¿‡å–å½“å‰å¸§æ·±åº¦å›¾çš„ç‚¹äº‘ï¼Œå¹¶ç¡®å®šæ¯ä¸ªå…³é”®å¸§è§†é”¥ä½“å†…éƒ¨çš„ç‚¹æ•°æ¥ç¡®å®š
  - è¿™ä¸ªé˜¶æ®µä¼˜åŒ–äº†ä¸è·Ÿè¸ªè¿‡ç¨‹ä¸­ç±»ä¼¼çš„æŸå¤±ï¼Œé™¤äº†æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨è½®å»“æ©æ¨¡ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³åœ¨æ‰€æœ‰åƒç´ ä¸Šä¼˜åŒ–ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨RGBæ¸²æŸ“ä¸­æ·»åŠ äº†SSIMæŸå¤±ï¼Œå¹¶åˆ é™¤äº†æ— ç”¨çš„é«˜æ–¯ï¼Œè¿™äº›é«˜æ–¯å…·æœ‰æ¥è¿‘0çš„ä¸é€æ˜åº¦æˆ–å¤ªå¤§

## æ€»ç»“

é¦–å…ˆå¯¹3DGSçš„å‚æ•°è¿›è¡Œç®€åŒ–ï¼Œæ¯ä¸ªé«˜æ–¯ä»…8ä¸ªå‚æ•°ï¼ˆ3ä¸ªä¸ºå…¶RGBé¢œè‰²ï¼Œ3ä¸ªä¸ºå…¶ä¸­å¿ƒä½ç½®ï¼Œ1ä¸ªä¸ºå…¶åŠå¾„ï¼Œ1ä¸ªä¸ºå…¶ä¸é€æ˜åº¦ï¼‰ï¼Œå¯¹ç¬¬ä¸€å¸§çš„æ¯ä¸ªåƒç´ æ·»åŠ ä¸€ä¸ªé«˜æ–¯ï¼›
æ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªå¾ªç¯çš„è¿‡ç¨‹ï¼š
1.è¾“å…¥æ˜¯ä¸Šä¸€æ—¶åˆ»å»ºå¥½çš„é«˜æ–¯æ¨¡å‹å’Œç›¸æœºæ¸²æŸ“å‡ºçš„ç…§ç‰‡ï¼Œä»¥åŠæ­¤åˆ»ç›¸æœºæ‹å‡ºçš„å›¾ç‰‡ï¼ˆå½©è‰²å›¾+æ·±åº¦å›¾ï¼‰
2.ç›¸æœºè¿½è¸ª
å…ˆå¯¹ç›¸æœºå‚æ•°è¿›è¡Œåˆå§‹åŒ–ï¼ˆé€šè¿‡ä¸Šä¸€æ—¶åˆ»ä¸ä¸Šä¸Šæ—¶åˆ»ç›¸æœºä½å§¿çš„å…³ç³»å’Œä¸Šä¸€æ—¶åˆ»çš„ä½å§¿å¾—å‡ºè¿™ä¸€æ—¶åˆ»çš„ç›¸æœºå‚æ•°ï¼‰ï¼Œç„¶åé€šè¿‡è®¡ç®—å‡ºæ¥çš„ä½å§¿æ¸²æŸ“å‡ºç…§ç‰‡ã€‚
å°†è¿™ä¸ªæ¨¡å‹å’Œè¾“å…¥çš„ç›¸æœºæ‹å‡ºæ¥çš„å›¾ç‰‡è¿›è¡Œé®ç½©æ“ä½œï¼Œsplatamåªåœ¨å·²çŸ¥åŒºåŸŸï¼ˆå³é»‘è‰²åŒºåŸŸï¼‰è¿›è¡Œè®¡ç®—ï¼ˆå› ä¸ºå®ƒçŸ¥é“ç™½è‰²åŒºåŸŸæ˜¯æ–°ä¸œè¥¿ï¼Œå¦‚æœå¼ºè¡Œå¯¹æ¯”ä¼šå¯¼è‡´å®šä½è·‘åï¼‰ã€‚**ï¼ˆGeminiè®¤ä¸ºç™½è‰²æ˜¯å·²çŸ¥åŒºåŸŸï¼Œé»‘è‰²æ˜¯æœªçŸ¥åŒºåŸŸï¼Œå› ä¸ºS(p)=1è¡¨ç¤ºç™½è‰²ï¼Œè€ŒS(p)=0è¡¨ç¤ºé»‘è‰²ï¼‰**
æ³¨ï¼šè¿™é‡Œçš„$Sil$æ˜¯å¯è§åº¦ï¼ˆä¸“ä¸šæœ¯è¯­æ˜¯Silhouetteï¼Œè½®å»“/ä¸é€æ˜åº¦ç´¯ç§¯å›¾ã€‚è¿™æ˜¯é«˜æ–¯çƒçš„ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœæŸä¸ªåƒç´ ä½ç½®ä¸Šæœ‰å¾ˆå¤šé«˜æ–¯çƒï¼Œ$Sil \approx 1$ï¼›å¦‚æœæŸä¸ªåƒç´ ä½ç½®æ˜¯ç©ºçš„ï¼Œ$Sil \approx 0$ï¼‰ï¼Œ$\lambda$æ˜¯é˜ˆå€¼ï¼ˆè®ºæ–‡ä¸­è®¾ç½®ä¸º0.99ï¼‰ï¼Œå› æ­¤ï¼Œ$(Sil > \lambda)$å°±æ˜¯åªæœ‰é‚£äº›åœ°å›¾é‡Œéå¸¸ç¡®ä¿¡å­˜åœ¨çš„ã€å®å®åœ¨åœ¨çš„åŒºåŸŸï¼Œæ‰ç®—æ•°ï¼ˆä¸º1ï¼‰ï¼›åŠé€æ˜çš„ã€æ²¡æ¢ç´¢è¿‡çš„åŒºåŸŸï¼Œç»Ÿç»Ÿä¸ç®—ï¼ˆä¸º0ï¼‰ã€‚æ•…$(Sil > \lambda)$ä¹˜ä»¥ $F_t$ å’Œ Renderå°±ç›¸å½“äºé®ç½©æ“ä½œã€‚
ç„¶åè°ƒæ•´ç›¸æœºä½ç½® $E'$ï¼Œè®©æ¸²æŸ“å‡ºæ¥çš„å›¾å’ŒçœŸå®ç…§ç‰‡ $F_t$ åœ¨å·²çŸ¥åŒºåŸŸè¿›è¡Œå¯¹æ¯”ï¼Œåå‘ä¼˜åŒ–ç›¸æœºçš„ä½å§¿ï¼Œæœ€ç»ˆå¾—åˆ°ç²¾ç¡®çš„ä½å§¿ã€‚è¿™é‡Œçš„å…¬å¼ä¸ºï¼ˆè¿™é‡Œçš„æ·±åº¦ï¼ˆå‡ ä½•ä¿¡æ¯ï¼‰å¯¹äºå®šä½æ¯”é¢œè‰²æ›´é‡è¦æƒå€¼æ›´é«˜ï¼ˆé¢œè‰²å®¹æ˜“å—å…‰ç…§å½±å“ï¼‰ï¼‰ï¼š$$E_t = \text{argmin} \| (Sil > \lambda) * (\text{Render}(G_{t-1}, E') - F_t) \|_1$$

3.é«˜æ–¯è‡´å¯†åŒ–
å…ˆæ ¹æ®ä¸Šä¸€æ­¥å¾—åˆ°çš„ç²¾ç¡®ä½å§¿å¯¹ä¸Šä¸€æ—¶åˆ»æ¸²æŸ“å‡ºçš„é«˜æ–¯æ¨¡å‹ä¸Šæ¸²æŸ“å‡ºä¸€ä¸ªå›¾ç‰‡ï¼Œç„¶ååšä¸€ä¸ªå¯†é›†åŒ–æ©ç ï¼Œæ ‡è®°å‡ºâ€œéœ€è¦æ·»åŠ æ–°ç‚¹â€çš„åŒºåŸŸã€‚è¿™é‡Œå¯†é›†åŒ–æ©ç çš„å…¬å¼ä¸ºï¼š$$M(p) = (S(p) < 0.5) + (D_{GT}(p) < D(p))(L_1(D(p)) > \lambda \text{MDE})$$
æ³¨ï¼š
1ï¼‰$M(p)$ æ˜¯ Densification Maskï¼ˆè‡´å¯†åŒ–æ©è†œï¼‰ï¼Œå¦‚æœæŸä¸ªåƒç´  $p$ è®¡ç®—ç»“æœä¸º 1 ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿™é‡Œç”Ÿæˆæ–°çš„é«˜æ–¯çƒã€‚
2ï¼‰$S(p)$è¡¨ç¤ºä¸é€æ˜åº¦ã€‚å¦‚æœ $S(p) \approx 1$ï¼šè¯´æ˜è¿™é‡Œæœ‰å¾ˆåšå®çš„å¢™æˆ–ç‰©ä½“ã€‚å¦‚æœ $S(p) \approx 0$ï¼šè¯´æ˜è¿™é‡Œæ˜¯ç©ºæ°”ï¼Œæˆ–è€…è¿˜æ²¡å»ºè¿‡å›¾ã€‚
3ï¼‰$D_{GT}(p)$ï¼šçœŸå®æ·±åº¦ï¼ˆGround Truthï¼‰ã€‚æ— äººæœºåˆšæ‹åˆ°çš„æ·±åº¦å›¾ã€‚$D(p)$ï¼šæ¸²æŸ“æ·±åº¦ï¼ˆRendered Depthï¼‰ã€‚æ¯”å¦‚çœŸå®åœ°å›¾æµ‹å¾—å‰æ–¹ 1 ç±³å¤„æœ‰ä¸œè¥¿ï¼Œæ—§åœ°å›¾è®¤ä¸ºå‰æ–¹ 3 ç±³å¤„æ‰æ˜¯å¢™ï¼Œ1ç±³ < 3ç±³ï¼Œè¯´æ˜çœŸå®ä¸–ç•Œé‡Œï¼Œæœ‰ä¸ªæœªçŸ¥çš„ä¸œè¥¿åœ¨å‰æ–¹1ç±³å¤„ï¼ˆè€Œä¸”ä¸æ˜¯å¢™ï¼‰ã€‚
4ï¼‰$L_1(D(p))$ï¼šæ·±åº¦è¯¯å·®ï¼Œå³ $|D_{GT} - D_{Render}|$ã€‚$\text{MDE}$ï¼šä¸­ä½æ•°æ·±åº¦è¯¯å·® (Median Depth Error)ï¼Œè¿™æ˜¯å½“å‰è¿™ä¸€å¸§ç”»é¢çš„å¹³å‡è¯¯å·®æ°´å¹³ã€‚$\lambda$ï¼šæ•æ„Ÿåº¦ç³»æ•°ã€‚è®ºæ–‡ä¸­è®¾ä¸º 50 ã€‚å› æ­¤è¿™é‡Œå…¬å¼çš„æ„æ€æ˜¯åªæœ‰å½“è¿™ä¸ªç‚¹çš„æ·±åº¦è¯¯å·®ï¼Œæ¯”å…¨å›¾ä¸­ä½æ•°è¯¯å·®è¿˜è¦å¤§ 50 å€æ—¶ï¼Œæˆ‘æ‰æ‰¿è®¤å®ƒæ˜¯çœŸçš„â€œæ–°ç‰©ä½“â€ï¼Œè€Œä¸æ˜¯ä¼ æ„Ÿå™¨æŠ–åŠ¨ï¼Œé˜²æ­¢å› ä¸ºä¼ æ„Ÿå™¨çš„ä¸€ç‚¹ç‚¹è¯¯å·®å°±ç–¯ç‹‚åŠ ç‚¹ã€‚

ç„¶åæ·»åŠ é«˜æ–¯ç‚¹ï¼ˆå³çº¢è‰²åŒºåŸŸï¼‰ã€‚è®ºæ–‡ä¸­å…¬å¼å¦‚ä¸‹ï¼š$$G_t^d = \text{Densify}(G_{t-1}, F_t, E_t, Sil)$$
æ³¨ï¼šåœ¨å‡½æ•° Densify å†…éƒ¨ï¼Œé¦–å…ˆåˆ©ç”¨ä¸Šä¸€å…¬å¼ç­›é€‰åƒç´ ï¼Œéå† $F_t$ çš„æ¯ä¸€ä¸ªåƒç´ ï¼Œå¦‚æœæ˜¯ç©ºçš„æˆ–æœ‰æ–°ç‰©ä½“åˆ™é€‰ä¸­è¯¥åƒç´ ï¼›ç„¶ååˆ©ç”¨ç›¸æœºå†…å‚ $K$ å’Œä½å§¿ $E_t$ è®¡ç®— 3D åæ ‡ $\mu$ï¼ˆä»ç›¸æœºä½ç½® $E_t$ å‡ºå‘ï¼Œæ²¿ç€åƒç´  $(u,v)$ çš„æ–¹å‘ï¼Œå°„å‡ºä¸€é“å…‰ï¼Œé£è¡Œ $D_{GT}$ï¼ˆçœŸå®æ·±åº¦ï¼‰è¿™ä¹ˆè¿œï¼Œé‚£ä¸ªè½ç‚¹å°±æ˜¯æ–°é«˜æ–¯çƒçš„çƒå¿ƒï¼‰ï¼›ç„¶ååˆå§‹åŒ–é«˜æ–¯çƒçš„å±æ€§ï¼Œé¢œè‰² ($c$)ç›´æ¥å–åƒç´ çš„ RGB é¢œè‰²ï¼Œå¤§å° ($r$)å°±æ ¹æ®æ·±åº¦ä¼°ç®—ï¼ˆç¦»å¾—è¶Šè¿œï¼Œåƒç´ ä»£è¡¨çš„ç‰©ç†èŒƒå›´è¶Šå¤§ï¼ŒçƒåŠå¾„ $r = \frac{D_{GT}}{f}$ï¼ˆæ·±åº¦é™¤ä»¥ç„¦è·ï¼‰ï¼‰ï¼Œé€æ˜åº¦ ($o$)ä¼šåˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸­é—´å€¼ï¼ˆä¾‹å¦‚ 0.5ï¼‰ï¼Œè¡¨ç¤ºâ€œæˆ‘ä¸ç¡®å®šæˆ‘æ˜¯ä¸æ˜¯å®ä½“ï¼Œå…ˆæ”¾è¿™é‡Œï¼Œç­‰ä¸‹ä¸€æ­¥ä¼˜åŒ–æ¥å†³å®šå»ç•™â€ã€‚
4.åœ°å›¾æ›´æ–°
å…ˆæ ¹æ®ç²¾ç¡®ä½å§¿å¯¹ä¸Šä¸€æ­¥å¾—åˆ°çš„ç²—ç•¥é«˜æ–¯æ¨¡å‹æ¸²æŸ“å‡ºæ–°å›¾ç‰‡ï¼Œ
ç„¶ååˆ©ç”¨å¯å¾®æ¸²æŸ“ï¼ŒåŒæ—¶è°ƒæ•´æ–°ç‚¹å’Œæ—§ç‚¹çš„å‚æ•°ï¼ˆé¢œè‰²ã€ä½ç½®ã€å¤§å°ã€é€æ˜åº¦ï¼‰ï¼Œè®©å®ƒä»¬æ¸²æŸ“å‡ºæ¥çš„å›¾åƒä¸çœŸå®å›¾åƒæ— ç¼è¡”æ¥ï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡å›¾ç‰‡çš„å¯¹æ¯”åå‘ä¼˜åŒ–å„é«˜æ–¯å…ƒå‚æ•°ï¼‰ï¼Œè¿™é‡Œå…¬å¼å¦‚ä¸‹ï¼š$$G_t = \text{argmin} \sum \| \text{Render}(G', E_k) - F_k \|_1$$
æ³¨ï¼šè¿™é‡Œä¸ä»…ä½¿ç”¨å½“å‰å¸§ï¼Œè¿˜ä¼šé€‰å– $k$ ä¸ªå…³é”®å¸§ (Keyframes) ä¸€èµ·å‚ä¸ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å½“å‰å¸§ + æœ€è¿‘çš„ä¸€ä¸ªå…³é”®å¸§ + $k-2$ ä¸ªè§†é”¥é‡å åº¦æœ€é«˜çš„å†å²å…³é”®å¸§ã€‚
æœ€ç»ˆå¾—åˆ°æ–°çš„é«˜æ–¯æ¨¡å‹ï¼Œç”¨ä½œä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥ã€‚

---

### **å…¬å¼ 1ï¼š3D é«˜æ–¯çƒçš„å®šä¹‰ (The Atom)**

$$f(x) = o \cdot \exp\left(-\frac{||x - \mu||^2}{2r^2}\right)$$

**å«ä¹‰**ï¼šè¿™æ˜¯ SplaTAM ä¸­**æœ€åŸºæœ¬çš„å•å…ƒ**ã€‚

**ç®€åŒ–ç‰ˆé«˜æ–¯**ï¼šæ³¨æ„ï¼Œæ ‡å‡† 3DGS ä½¿ç”¨å„å‘å¼‚æ€§ï¼ˆæ¤­çƒï¼‰çš„é«˜æ–¯å‡½æ•°ï¼Œä½†è¿™ç¯‡è®ºæ–‡ä¸ºäº† SLAM çš„é€Ÿåº¦å’Œç¨³å®šæ€§ï¼Œå°†å…¶ç®€åŒ–ä¸º **å„å‘åŒæ€§ï¼ˆIsotropicï¼‰**ï¼Œä¹Ÿå°±æ˜¯æ­£çƒä½“ ã€‚

**å‚æ•°**ï¼š

- (Mu)ï¼šçƒå¿ƒçš„ 3D ä½ç½® ã€‚

- (Radius)ï¼šçƒçš„åŠå¾„ï¼ˆæ§åˆ¶å®ƒçš„å¤§å°ï¼‰ã€‚

- (Opacity)ï¼šä¸é€æ˜åº¦ï¼ˆ0~1ï¼‰ï¼Œæ§åˆ¶å®ƒæœ‰å¤šâ€œå®â€ã€‚

**ç‰©ç†æ„ä¹‰**ï¼šè¿™ä¸ªå…¬å¼è®¡ç®—çš„æ˜¯ç©ºé—´ä¸­ä»»æ„ä¸€ç‚¹  å—åˆ°çš„è¯¥é«˜æ–¯çƒçš„**å½±å“å€¼ï¼ˆå¯†åº¦/è´¡çŒ®åº¦ï¼‰**ã€‚ç¦»çƒå¿ƒ$\mu$ è¶Šè¿‘ï¼Œå€¼è¶Šå¤§ï¼›è¶Šè¿œï¼Œå€¼æŒ‰æŒ‡æ•°è¡°å‡ã€‚

---

### **å…¬å¼ 2ï¼šå¯å¾®æ¸²æŸ“ - é¢œè‰² (The Painter)**

$$C(p) = \sum_{i=1}^{n} c_i f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$

**å«ä¹‰**ï¼šè¿™æ˜¯ç»å…¸çš„**ä½“ç§¯æ¸²æŸ“å…¬å¼ï¼ˆVolumetric Renderingï¼‰**ï¼Œä¹Ÿå°±æ˜¯ alpha-blendingï¼ˆé€æ˜åº¦æ··åˆï¼‰ã€‚

**å¦‚ä½•è®¡ç®—ä¸€ä¸ªåƒç´   çš„é¢œè‰²ï¼Ÿ**

1. ä»ç›¸æœºå‘å°„ä¸€æ¡å…‰çº¿ç©¿è¿‡è¯¥åƒç´ ã€‚
2. å…‰çº¿ä¼šç©¿è¿‡ä¸€ä¸²é«˜æ–¯çƒï¼ˆæ’å¥½åºï¼š$1, 2, ..., n$ï¼‰ã€‚
3. $c_i f_i(p)$ï¼šç¬¬ $i$ ä¸ªçƒçš„é¢œè‰² $c_i$ ä¹˜ä»¥å®ƒåœ¨è¯¥ä½ç½®çš„å¯†åº¦ $f_i$ã€‚
4. $\prod (1 - f_j(p))$ï¼šè¿™æ˜¯é€å°„ç‡ï¼ˆTransmittanceï¼‰ã€‚æ„æ€æ˜¯ä½ è™½ç„¶æœ‰é¢œè‰²ï¼Œä½†ä½ çš„å¯è§åº¦è¦å–å†³äºæŒ¡åœ¨ä½ å‰é¢çš„çƒæœ‰å¤šé€æ˜ã€‚å¦‚æœå‰é¢çš„çƒå®Œå…¨ä¸é€æ˜ï¼ˆ$f=1$ï¼‰ï¼Œåé¢è¿™ä¸€é¡¹å°±å˜æˆ 0ï¼Œä½ å°±çœ‹ä¸è§äº†ã€‚

**ä½œç”¨**ï¼šç”Ÿæˆ RGB å›¾åƒï¼Œç”¨äºå’ŒçœŸå®ç…§ç‰‡å¯¹æ¯”ç®— Lossã€‚

---

### **å…¬å¼ 3ï¼š3D åˆ° 2D çš„æŠ•å½± (The Lens)**

$$\mu^{2D} = K \frac{E_t \mu}{d}, \quad r^{2D} = \frac{f r}{d}$$

**å«ä¹‰**ï¼šæŠŠ 3D ä¸–ç•Œé‡Œçš„çƒï¼Œæ‹æ‰åˆ° 2D å±å¹•ä¸Šã€‚

**$\mu^{2D}$ (å±å¹•ä½ç½®)ï¼š**

- $E_t \mu$ï¼šå…ˆæŠŠä¸–ç•Œåæ ‡è½¬ä¸ºç›¸æœºåæ ‡ã€‚
- é™¤ä»¥ $d$ï¼ˆæ·±åº¦ï¼‰ï¼šè¿‘å¤§è¿œå°ã€‚
- ä¹˜ $K$ï¼ˆå†…å‚ï¼‰ï¼šæ˜ å°„åˆ°åƒç´ åæ ‡ç³»ã€‚

**$r^{2D}$ (å±å¹•åŠå¾„)ï¼š**

- è¿™æ˜¯é«˜æ–¯çƒåœ¨å±å¹•ä¸Šçš„**æŠ•å½±åŠå¾„**ã€‚
- $f$ æ˜¯ç„¦è·ï¼Œ$r$ æ˜¯ç‰©ç†åŠå¾„ï¼Œ$d$ æ˜¯æ·±åº¦ã€‚
- **ç‰©ç†è§„å¾‹**ï¼šç‰©ä½“ç¦»ç›¸æœºè¶Šè¿œï¼ˆ è¶Šå¤§ï¼‰ï¼Œåœ¨å±å¹•ä¸Šçœ‹èµ·æ¥å°±è¶Šå°ã€‚

---

### **å…¬å¼ 4ï¼šå¯å¾®æ¸²æŸ“ - æ·±åº¦ (The Ruler)**

$$D(p) = \sum_{i=1}^{n} d_i f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$

**å«ä¹‰**ï¼šè¿™è·Ÿå…¬å¼ 2 çš„ç»“æ„ä¸€æ¨¡ä¸€æ ·ï¼Œåªä¸è¿‡æŠŠç´¯ç§¯çš„å¯¹è±¡ä»â€œé¢œè‰² $c_i$â€æ¢æˆäº†â€œæ·±åº¦ $d_i$â€ã€‚
**æ·±åº¦æ¸²æŸ“**ï¼šå®ƒè®¡ç®—çš„æ˜¯è¿™å…‰çº¿ç¢°åˆ°çš„æ‰€æœ‰ç‰©ä½“çš„**åŠ æƒå¹³å‡æ·±åº¦**ã€‚
**ä½œç”¨**ï¼šç”Ÿæˆ**æ¸²æŸ“æ·±åº¦å›¾**ã€‚è¿™æ˜¯ SplaTAM çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œå®ƒèƒ½ç›´æ¥é’ˆå¯¹æ·±åº¦è¯¯å·®è¿›è¡Œä¼˜åŒ–ï¼ˆGeometric Lossï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯é¢œè‰²è¯¯å·®ã€‚

---

### **å…¬å¼ 5ï¼šè½®å»“æ©è†œ / å¯è§åº¦ (The Scout)**

$$S(p) = \sum_{i=1}^{n} f_i(p) \prod_{j=1}^{i-1} (1 - f_j(p))$$

**å«ä¹‰**ï¼šè¿™å°±æ˜¯ä½ è¦çš„ **Silhouette Mask**ã€‚
**ç»“æ„**ï¼šä¾ç„¶æ˜¯ä½“ç§¯æ¸²æŸ“å…¬å¼ï¼Œä½†å»æ‰äº†é¢œè‰²é¡¹å’Œæ·±åº¦é¡¹ï¼Œåªç´¯ç§¯**ä¸é€æ˜åº¦ï¼ˆOpacity/Densityï¼‰**ã€‚
**ç»“æœè§£è¯»**ï¼š

- $S(p) \approx 1$ï¼šå…‰çº¿æœ€ç»ˆæ’ä¸Šäº†åšå®çš„ä¸œè¥¿ï¼ˆå¢™å£ï¼‰ã€‚$\rightarrow$ å·²çŸ¥åŒºåŸŸã€‚
- $S(p) \approx 0$ï¼šå…‰çº¿ç©¿é€äº†æ‰€æœ‰ä¸œè¥¿ä¹Ÿæ²¡é‡åˆ°é˜»ç¢ï¼ˆçœ‹å‘è™šç©ºï¼‰ã€‚$\rightarrow$ æœªçŸ¥åŒºåŸŸã€‚

**ä½œç”¨**ï¼šåŒºåˆ†â€œæœ‰åœ°å›¾çš„åœ°æ–¹â€å’Œâ€œæ²¡åœ°å›¾çš„åœ°æ–¹â€ï¼Œç”¨äºè¿‡æ»¤ Lossã€‚

---

### **å…¬å¼ 6ï¼šåˆå§‹åŒ–åŠå¾„ (The Seed)**

$$r = \frac{D_{GT}}{f}$$

**å«ä¹‰**ï¼šå½“æˆ‘ä»¬è¦åœ¨æŸä¸ªä½ç½®æ–°ç”Ÿæˆä¸€ä¸ªé«˜æ–¯çƒæ—¶ï¼Œå®ƒåº”è¯¥å¤šå¤§ï¼Ÿ
**é€»è¾‘**ï¼šæ ¹æ®å…¬å¼ 3ï¼Œæˆ‘ä»¬å¸Œæœ›æ–°ç”Ÿæˆçš„çƒæŠ•å½±åˆ°å±å¹•ä¸Šæ—¶ï¼Œ**åŠå¾„åˆšå¥½å¯¹åº” 1 ä¸ªåƒç´ **ã€‚

- ä»¤å…¬å¼ 3 ä¸­çš„ $r^{2D} = 1$ã€‚
- æ¨å¯¼å‡º $1 = \frac{f \cdot r}{d}$ã€‚
- å¾—åˆ° $r = \frac{d}{f}$ï¼ˆè¿™é‡Œç”¨ $D_{GT}$ ä»£è¡¨æ·±åº¦ï¼‰ã€‚

**ä½œç”¨**ï¼šé˜²æ­¢æ–°åŠ çš„ç‚¹å¤ªå¤§ï¼ˆå¯¼è‡´æ¨¡ç³Šï¼‰æˆ–å¤ªå°ï¼ˆå¯¼è‡´ç©ºæ´/Aliasingï¼‰ã€‚

---

### **å…¬å¼ 8ï¼šç›¸æœºè¿½è¸ªæŸå¤±å‡½æ•° (The Judge)**

$$L_t = \sum_{p} (S(p) > 0.99) \cdot (L_1(D(p)) + 0.5 L_1(C(p)))$$

**å«ä¹‰**ï¼šè¿™æ˜¯ Step 1 (Camera Tracking) ç”¨æ¥ä¼˜åŒ–ç›¸æœºä½å§¿çš„ **Loss Function**ã€‚
**ç»„æˆéƒ¨åˆ†æ‹†è§£**ï¼š

- $L_1(D(p))$ï¼šæ·±åº¦è¯¯å·®ã€‚æ¸²æŸ“æ·±åº¦ vs çœŸå®æ·±åº¦ã€‚è¿™æ˜¯å®šä½æœ€ä¸»è¦çš„ä¾æ®ã€‚
- $L_1(C(p))$ï¼šé¢œè‰²è¯¯å·®ã€‚æ¸²æŸ“é¢œè‰² vs çœŸå®ç…§ç‰‡ã€‚
- $0.5$ï¼šæƒé‡ã€‚ä½œè€…ç»éªŒå‘ç°é¢œè‰²è¯¯å·®ä¸å¦‚æ·±åº¦è¯¯å·®å¯é ï¼ˆå®¹æ˜“å—å…‰ç…§å½±å“ï¼‰ï¼Œæ‰€ä»¥æ‰“ä¸ªäº”æŠ˜ã€‚
- $(S(p) > 0.99)$ï¼šæ ¸å¿ƒæ©è†œã€‚åªæœ‰åœ¨è½®å»“å›¾æ˜¾ç¤ºâ€œè¿™é‡Œéå¸¸å® ($>0.99$)â€çš„åƒç´ ï¼Œæ‰è®¡ç®—è¯¯å·®ã€‚å¦‚æœ $S(p) < 0.99$ï¼Œè¯´æ˜è¿™é‡Œå¯èƒ½æ˜¯è¾¹ç•Œæˆ–è€…æœªæ¢ç´¢åŒºåŸŸï¼Œæ¸²æŸ“ç»“æœä¸å¯ä¿¡ï¼Œç›´æ¥å¿½ç•¥ï¼Œä¸è®¡å…¥ Lossã€‚

---

è¿™ä¸€å¥—å…¬å¼ç¯ç¯ç›¸æ‰£ï¼šç”¨ **Eq 1** å®šä¹‰çƒï¼Œç”¨ **Eq 2/4/5** æ¸²æŸ“å‡ºå›¾åƒï¼Œç”¨ **Eq 8** å¯¹æ¯”å›¾åƒç®—å‡ºä½ç½®ï¼Œæœ€åç”¨ **Eq 6** åˆå§‹åŒ–æ–°çƒæ¥ä¿®è¡¥è¯¯å·®ã€‚è¿™æ„æˆäº† SplaTAM çš„æ•°å­¦é—­ç¯ã€‚

---

## ä»£ç 

### scripts/splatam.py

#### get_loss()

å®ƒæœ‰ä¸‰ä¸ªæ­¥éª¤ï¼šæŠ•å½±ï¼ˆProjectionï¼‰ã€å…‰æ …åŒ–ï¼ˆRasterizationï¼‰ å’Œ è¯„åˆ†ï¼ˆLoss Calculationï¼‰

ä¸€ã€æŠ•å½±

- è¾“å…¥æ˜¯ä¸–ç•Œåæ ‡ç³»ä¸‹çš„å‡ åä¸‡ä¸ªé«˜æ–¯çƒï¼Œè¾“å‡ºæ˜¯ç›¸æœºå¹³é¢ä¸Šçš„ 2D æ¤­åœ†ï¼ˆå› ä¸ºsplatamé‡Œé¢çš„é«˜æ–¯çƒæ˜¯å„å‘åŒæ€§ï¼Œåœ¨ 3D ç©ºé—´å®ƒæ˜¯æ­£çƒä½“ï¼ŒæŠ•å½±åˆ° 2D å¹³é¢å®ƒæ°¸è¿œæ˜¯ä¸€ä¸ªåœ†ï¼Œå› æ­¤è¿™é‡Œå…¶å®æ—¶å›­ï¼‰
- å¦‚æœä¸€ä¸ªçƒè·‘åˆ°äº†ç›¸æœºå±è‚¡åé¢ï¼ˆZ < 0ï¼‰ï¼Œæˆ–è€…è·‘å‡ºäº†å±å¹•è¾¹ç¼˜ï¼Œç›´æ¥æ‰”æ‰ï¼Œä¸å‚ä¸è®¡ç®—

é¦–å…ˆåˆ©ç”¨å½“å‰çš„ç›¸æœºä½å§¿ (curr_data['cam'])ï¼ŒæŠŠæ‰€æœ‰é«˜æ–¯çƒçš„ä¸­å¿ƒç‚¹ means3D ä»ä¸–ç•Œåæ ‡æ¬åˆ°ç›¸æœºåæ ‡ç³»ä¸‹ï¼›
ç„¶åé€šè¿‡ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µï¼ˆJacobianï¼‰ï¼ŒæŠŠ3D é«˜æ–¯çƒï¼ˆ 3x3 çš„åæ–¹å·®çŸ©é˜µï¼‰æŠ•å½±åˆ° 2D å›¾åƒå¹³é¢ä¸Šï¼Œå˜æˆä¸€ä¸ª 2x2 çš„ 2D åæ–¹å·®çŸ©é˜µ

äºŒã€å…‰æ …åŒ–

é¦–å…ˆæŠŠæ‰€æœ‰åœ¨å±å¹•å†…çš„é«˜æ–¯çƒï¼ŒæŒ‰ç…§æ·±åº¦ï¼ˆDepthï¼‰ä»è¿œåˆ°è¿‘æ’åºï¼Œç„¶åéå†æ¯ä¸ªåƒç´ ï¼Œä»è¿‘åˆ°è¿œï¼ˆæˆ–ä»è¿œåˆ°è¿‘ï¼‰ç´¯åŠ é¢œè‰²çš„è´¡çŒ®ï¼Œç„¶åè¿›è¡Œæ¸²æŸ“ï¼Œæ¸²æŸ“å‡ºæ·±åº¦å›¾å’Œé¢œè‰²å›¾

ä¸‰ã€è¯„åˆ†

å’ŒçœŸå®æ•°æ®è®¡ç®—è¯¯å·®

```python
# 1. é¢œè‰²è¯¯å·® (L1 Loss)
# çœ‹çœ‹ç”»å‡ºæ¥çš„å›¾å’Œç…§ç‰‡å·®å¤šå°‘
loss_im = torch.abs(gt_im - render_im).mean()

# 2. æ·±åº¦è¯¯å·® (L1 Depth Loss)
# SplaTAM çš„æ ¸å¿ƒï¼šä¸ä»…è¦çœ‹ç€åƒï¼Œå‡ ä½•ä½ç½®ä¹Ÿå¾—å¯¹ï¼
loss_depth = torch.abs(gt_depth - render_depth).mean()

# 3. æ€»åˆ†
loss = w_im * loss_im + w_depth * loss_depth
```

##### transform_to_frame()

ä½œç”¨ï¼š1ï¼‰æ¢¯åº¦æ§åˆ¶å¼€å…³ï¼Œå¦‚gaussians_grad=False, camera_grad=Trueå°±æ˜¯å½“åå‘ä¼ æ’­çš„æ—¶å€™ï¼Œåªæœ‰ç›¸æœºçš„ä½ç½®ä¼šæ›´æ–°ï¼Œè¿™æ ·å°±å¯ä»¥å†è¿½è¸ªé˜¶æ®µè®¡ç®—ç›¸æœºçš„ç²¾ç¡®ä½å§¿ï¼›2ï¼‰æ—¶é—´åˆ‡ç‰‡ä¸ä½å§¿æå–ï¼štransform_to_frame æ ¹æ®ä¼ å…¥çš„ iter_time_idxï¼ˆæ—¶é—´æˆ³ï¼‰ï¼Œä»å·¨å¤§çš„è½¨è¿¹æ•°ç»„ä¸­æå–å‡ºå½“å‰è¿™ä¸€å¸§å¯¹åº”çš„æ—‹è½¬ï¼ˆRotationï¼‰å’Œå¹³ç§»ï¼ˆTranslationï¼‰ï¼Œè¿˜ä¼šæŠŠå­˜å‚¨çš„å››å…ƒæ•°ï¼ˆQuaternionï¼‰è½¬æ¢ä¸ºæ¸²æŸ“å™¨éœ€è¦çš„æ—‹è½¬çŸ©é˜µï¼Œå…¶ä¸­params å­—å…¸é‡Œå­˜å‚¨çš„æ˜¯æ‰€æœ‰å¸§çš„ç›¸æœºè½¨è¿¹ã€‚å‡½æ•°çš„è¾“å‡ºä¸ºæ‰“åŒ…å¥½çš„ transformed_gaussiansï¼Œé‡Œé¢åŒ…å«ï¼šå½“å‰æ—¶åˆ»çš„ç›¸æœºä½å§¿ï¼ˆå¸¦æ¢¯åº¦æˆ–ä¸å¸¦ï¼‰ã€å½“å‰æ‰€æœ‰çš„é«˜æ–¯çƒï¼ˆå¸¦æ¢¯åº¦æˆ–ä¸å¸¦ï¼‰ï¼Œè¿™ä¸ªåŒ…ä¼šç›´æ¥å–‚ç»™ Renderer å»ç”Ÿæˆå›¾åƒã€‚

**ç¬¬ä¸€å¸§æ—¶æ‰“å°ï¼š**

---

ğŸ” DEBUG: params (æ€»ä»“åº“)

  [Key] means3D              [Shape] [255190, 3]

  [Key] rgb_colors           [Shape] [255190, 3]

  [Key] unnorm_rotations     [Shape] [255190, 4]

  [Key] logit_opacities      [Shape] [255190, 1]

  [Key] log_scales           [Shape] [255190, 1]

  [Key] cam_unnorm_rots      [Shape] [1, 4, 592]

  [Key] cam_trans            [Shape] [1, 3, 592]

ğŸ” DEBUG: transformed_gaussians (å½“å‰å¸§æ•°æ®åŒ…)

  [Key] means3D              [Shape] [255190, 3]

  [Key] unnorm_rotations     [Shape] [255190, 4]

---
**å„å‚æ•°è§£é‡Šï¼š**
255,190ï¼šåœ°å›¾é‡Œç›®å‰æ€»å…±æœ‰ 255,190 ä¸ªé«˜æ–¯çƒã€‚ç³»ç»ŸæŠŠç¬¬ 0 å¸§å›¾ç‰‡é‡Œæ¯ä¸€ä¸ªæœ‰æœ‰æ•ˆæ·±åº¦çš„åƒç´ ï¼Œéƒ½å˜æˆäº†ä¸€ä¸ª 3D é«˜æ–¯çƒã€‚å›¾ç‰‡åˆ†è¾¨ç‡æ˜¯ 640x480 = 307,200 åƒç´ ï¼Œå…¶ä¸­å¤§çº¦æœ‰ 5ä¸‡ä¸ªåƒç´ å¯èƒ½æ˜¯æ— æ•ˆæ·±åº¦ï¼ˆå¤ªè¿œæˆ–å¤ªè¿‘ï¼‰ï¼Œå‰©ä¸‹çš„ 255,190 ä¸ªåƒç´ è¢«æˆåŠŸè½¬æ¢æˆäº†ç¬¬ä¸€æ‰¹é«˜æ–¯çƒã€‚
592ï¼šTUM æ•°æ®é›†åºåˆ—ï¼ˆfreiburg1_deskï¼‰æ€»å…±æœ‰ 592 å¸§ã€‚

- means3D: [255190, 3]
  - ä½ç½®ï¼Œå³xã€yã€zåæ ‡
- rgb_colors: [255190, 3]
  - é¢œè‰²ï¼Œå³Rã€Gã€Bå‚æ•°
- unnorm_rotations: [255190, 4]
  - å§¿æ€ï¼Œæ—‹è½¬å››å…ƒæ•°(w, x, y, z)
  - æ³¨ï¼šæœªå½’ä¸€åŒ–
- logit_opacitiesï¼š[255190, 1]
  - ä¸é€æ˜åº¦ï¼Œå€¼å¤§ $\to$ å®å¿ƒå¢™å£ï¼Œå€¼å° $\to$ ç¨€è–„çš„çƒŸé›¾ï¼ˆæˆ–è€…å™ªå£°ï¼‰
  - $o = \text{Sigmoid}(\text{logit\_opacities})$ã€‚æˆ‘ä»¬åœ¨ params é‡Œå­˜ logit å€¼ï¼ˆå¯ä»¥æ˜¯ $-\infty$ åˆ° $+\infty$ï¼‰ï¼Œç®—çš„æ—¶å€™è¿‡ä¸€ä¸‹ Sigmoid å‡½æ•°å°±å˜æˆäº† $0 \sim 1$
- log_scales: [255190, 1]
  - åŠå¾„ï¼Œè®ºæ–‡é‡Œä¸ºäº†å¿«ï¼ŒæŠŠçƒç®€åŒ–æˆäº†æ­£çƒä½“ï¼Œåªæœ‰ä¸€ä¸ªåŠå¾„å‚æ•° $r$
  - æ³¨ï¼šè¿™é‡Œå­˜å‚¨çš„æ˜¯åŠå¾„çš„å¯¹æ•°ã€‚å› ä¸ºä¼˜åŒ–å™¨è°ƒæ•´å‚æ•°æ—¶å¯èƒ½ä¼šæŠŠæ•°å­—å‡æˆè´Ÿæ•°ï¼Œæ•…å­˜ log(r)ï¼Œå–å‡ºæ¥ç”¨çš„æ—¶å€™åš exp(log(r))ï¼Œå°±èƒ½ä¿è¯åŠå¾„æ°¸è¿œæ˜¯æ­£æ•°
- cam_unnorm_rotsï¼š[1, 4, 592]
  - å­˜çš„æ˜¯æ¯ä¸€å¸§ç›¸æœºçš„ æ—‹è½¬ï¼ˆå››å…ƒæ•°ï¼‰
- cam_trans: [1, 3, 592]
  - Batch Sizeï¼Œè¿™é‡Œæ°¸è¿œæ˜¯ 1
  - ç›¸æœºçš„ (x, y, z) åæ ‡
  - æ•°æ®é›†åºåˆ—å…±592å¸§
  - å­˜çš„æ˜¯æ¯ä¸€å¸§ç›¸æœºåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ å¹³ç§» $(x, y, z)$
  
å…·ä½“ä¾‹å­ï¼š

```python
{'means3D': Parameter containing:
tensor([[-0.9017, -0.7259,  1.4686],
        [-0.8988, -0.7259,  1.4686],
        [-0.5105, -0.3596,  0.8394],
        ...,
        [ 0.7847,  0.6526,  1.5068],
        [ 0.7876,  0.6526,  1.5068],
        [ 0.7905,  0.6526,  1.5068]], device='cuda:0', requires_grad=True), 'rgb_colors': Parameter containing:
tensor([[0.2353, 0.1176, 0.1608],
        [0.2353, 0.1176, 0.1176],
        [0.4824, 0.4118, 0.5137],
        ...,
        [0.0510, 0.0157, 0.0078],
        [0.0627, 0.0196, 0.0078],
        [0.0549, 0.0118, 0.0118]], device='cuda:0', requires_grad=True), 'unnorm_rotations': Parameter containing:
tensor([[1., 0., 0., 0.],
        [1., 0., 0., 0.],
        [1., 0., 0., 0.],
        ...,
        [1., 0., 0., 0.],
        [1., 0., 0., 0.],
        [1., 0., 0., 0.]], device='cuda:0', requires_grad=True), 'logit_opacities': Parameter containing:
tensor([[0.],
        [0.],
        [0.],
        ...,
        [0.],
        [0.],
        [0.]], device='cuda:0', requires_grad=True), 'log_scales': Parameter containing:
tensor([[-5.8635],
        [-5.8635],
        [-6.4229],
        ...,
        [-5.8379],
        [-5.8379],
        [-5.8379]], device='cuda:0', requires_grad=True), 'cam_unnorm_rots': Parameter containing:
tensor([[[1., 1., 1., 1., 1.],
         [0., 0., 0., 0., 0.],
         [0., 0., 0., 0., 0.],
         [0., 0., 0., 0., 0.]]], device='cuda:0', requires_grad=True), 'cam_trans': Parameter containing:
tensor([[[0., 0., 0., 0., 0.],
         [0., 0., 0., 0., 0.],
         [0., 0., 0., 0., 0.]]], device='cuda:0', requires_grad=True)}
```

**ç–‘é—®ï¼š**
1ï¼‰ä¸ºä»€ä¹ˆ transformed_gaussians è¦å­˜ 25ä¸‡ä¸ªçƒï¼Ÿ
ç­”ï¼štransform_to_frame åªæ˜¯æŠŠæ•°æ®ä»ä»“åº“é‡Œæ‹¿å‡ºæ¥ï¼Œå‡†å¤‡å–‚ç»™ GPUã€‚
Python æŠŠ 25ä¸‡ä¸ªçƒå…¨éƒ¨æ‰”ç»™ CUDA æ¸²æŸ“å™¨ï¼ˆRendererï¼‰ã€‚æ¸²æŸ“å™¨å†…éƒ¨ ä¼šè‡ªåŠ¨åˆ¤æ–­å“ªäº›çƒåœ¨ç›¸æœºè§†é‡é‡Œï¼Œå“ªäº›åœ¨èƒŒåã€‚
åœ¨ Python å±‚é¢æ‰‹åŠ¨ç®—â€œå“ªä¸ªçƒåœ¨è§†é‡é‡Œâ€å¤ªæ…¢äº†ï¼Œä¸å¦‚ç›´æ¥å…¨éƒ¨æ‰”ç»™ GPU ç®—ã€‚æ‰€ä»¥ transformed_gaussians é‡Œä¾ç„¶ä¿ç•™äº†æ‰€æœ‰çƒã€‚
2ï¼‰ä¸ºä½•å®ƒåªå­˜äº†â€œä½ç½®â€å’Œâ€œå§¿æ€â€ï¼ŒæŠŠâ€œé¢œè‰²â€å’Œâ€œåŠå¾„â€å¼„ä¸¢äº†
ç­”ï¼šå› ä¸ºè¿™åªæ˜¯ä¸ªâ€œä¸­è½¬åŒ…â€ï¼Œåªæœ‰ ä½ç½® (means3D) å’Œ æ—‹è½¬ (rotations) ä¼šå—åˆ°ç›¸æœºç§»åŠ¨çš„å½±å“ï¼Œæ‰€ä»¥éœ€è¦é‡ç‚¹å¤„ç†ï¼Œè€Œåé¢ä¼šè¿›è¡Œç»„è£…ï¼Œä» params (æ€»ä»“åº“) é‡Œç›´æ¥æ‹¿é¢œè‰²ã€åŠå¾„ã€ä¸é€æ˜åº¦ï¼ˆå› ä¸ºè¿™äº›å±æ€§ä¸ç®¡ç›¸æœºæ€ä¹ˆåŠ¨ï¼Œå®ƒä»¬æœ¬èº«æ˜¯ä¸å˜çš„ï¼Œä¸éœ€è¦å˜æ¢åæ ‡ç³»ï¼‰

### æ’é€Ÿè¿åŠ¨æ¨¡å‹(initialize_camera_pose å‡½æ•°)

è¿½è¸ªéƒ¨åˆ†ï¼Œæ ¹æ®è¿‡å»ä¸¤å¸§çš„è¿åŠ¨è¶‹åŠ¿ï¼Œè®¡ç®—å‡ºç›¸æœºçš„åˆå§‹ä½å§¿ï¼Œå¯¹åº”å…¬å¼ï¼š
$$Pose_{t} = Pose_{t-1} + (Pose_{t-1} - Pose_{t-2})$$

#### å¹³ç§»

```python
prev_tran1 = params['cam_trans'][..., curr_time_idx-1].detach() # ä½ç½® P_{t-1}
prev_tran2 = params['cam_trans'][..., curr_time_idx-2].detach() # ä½ç½® P_{t-2}
# é¢„æµ‹å½“å‰ä½ç½® P_t
new_tran = prev_tran1 + (prev_tran1 - prev_tran2)
```

è§£é‡Šï¼šparams['cam_trans'] çš„å½¢çŠ¶æ˜¯ [1, 3, 592]ï¼Œå› æ­¤[..., curr_time_idx-1]çš„æ„æ€æ˜¯ä¿æŒå‰é¢æ‰€æœ‰ç»´åº¦ï¼ˆBatch å’Œ xyzï¼‰ä¸å˜ï¼Œåªå–æœ€åä¸€ä¸ªç»´åº¦ï¼ˆæ—¶é—´è½´ï¼‰ä¸Šçš„ç¬¬ curr_time_idx-1 å¸§çš„æ•°æ®ã€‚.detach()çš„æ„æ€æ˜¯**åˆ‡æ–­æ¢¯åº¦æµ**ï¼Œå› ä¸ºä¸éœ€è¦åšåå‘ä¼ æ’­ã€‚

#### æ—‹è½¬

```python
# å–å‡ºå¹¶å½’ä¸€åŒ–å››å…ƒæ•°
prev_rot1 = F.normalize(params['cam_unnorm_rots'][..., curr_time_idx-1].detach()) # Q_{t-1}
prev_rot2 = F.normalize(params['cam_unnorm_rots'][..., curr_time_idx-2].detach()) # Q_{t-2}
# çº¿æ€§å¤–æ¨å¹¶é‡æ–°å½’ä¸€åŒ–
new_rot = F.normalize(prev_rot1 + (prev_rot1 - prev_rot2))
```

### slam_external.py/prune_gaussians()

#### ä½œç”¨

åœ¨å»ºå›¾ï¼ˆMappingï¼‰ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå®šæœŸæŠŠé‚£äº›æ²¡ç”¨çš„æˆ–è€…é”™è¯¯çš„é«˜æ–¯çƒæ¸…ç†æ‰ï¼Œä»¥ä¿æŒåœ°å›¾çš„å¹²å‡€å’Œæ˜¾å­˜çš„é«˜æ•ˆã€‚å…¶ä¸»è¦æ˜¯å®šæ—¶å‰ªæã€æŒ‰æ¡ä»¶ç­›é€‰ã€é‡ç½®é€æ˜åº¦ã€‚

#### å®šæ—¶å‰ªæ

```python
if iter <= prune_dict['stop_after']:
    if (iter >= prune_dict['start_after']) and (iter % prune_dict['prune_every'] == 0):
```

- å®ƒåªåœ¨è¿­ä»£æ¬¡æ•°å¤„äº start_after å’Œ stop_after ä¹‹é—´è¿›è¡Œã€‚

- æ¯éš” prune_every (20) æ¬¡è¿­ä»£æ‰æ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…é¢‘ç¹æ“ä½œæ‹–æ…¢é€Ÿåº¦ã€‚

#### æŒ‰æ¡ä»¶ç­›é€‰

æ¡ä»¶ä¸€:é€æ˜åº¦å¤ªä½

```python
if iter == prune_dict['stop_after']:
    remove_threshold = prune_dict['final_removal_opacity_threshold']
else:
    remove_threshold = prune_dict['removal_opacity_threshold']

# è®¡ç®—çœŸå®é€æ˜åº¦å¹¶åˆ¤æ–­
to_remove = (torch.sigmoid(params['logit_opacities']) < remove_threshold).squeeze()
```

è§£é‡Šï¼šlogit_opacities æ˜¯å­˜å‚¨çš„å‚æ•°ï¼Œé€šè¿‡ sigmoid å˜æˆ 0~1 çš„çœŸå®é€æ˜åº¦ ï¼Œ remove_threshold æ˜¯è®¾ç½®çš„é˜ˆå€¼ 0.005

æ¡ä»¶äºŒï¼šå¤ªå¤§äº†ï¼ˆé®æŒ¡è§†çº¿ï¼‰

```python
if iter >= prune_dict['remove_big_after']:
    # è®¡ç®—çœŸå®åŠå¾„ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡åœºæ™¯åŠå¾„çš„ 10%
    big_points_ws = torch.exp(params['log_scales']).max(dim=1).values > 0.1 * variables['scene_radius']
    to_remove = torch.logical_or(to_remove, big_points_ws)
```

è§£é‡Šï¼šexp(log_scales) è¿˜åŸå‡ºçœŸå®åŠå¾„ï¼Œå¦‚æœä¸€ä¸ªçƒè†¨èƒ€å¾—å·¨å¤§ï¼ˆè¶…è¿‡æ•´ä¸ªåœºæ™¯åŠå¾„çš„ 10%ï¼‰ï¼Œé€šå¸¸æ˜¯å› ä¸ºä¼˜åŒ–å¤±è´¥äº§ç”Ÿçš„ä¼ªå½±ï¼ˆArtifactï¼‰ï¼Œå°±åƒè´´åœ¨é•œå¤´å‰çš„ä¸€ä¸ªå¤§å…‰æ–‘ã€‚è¿™ç§çƒä¼šä¸¥é‡å¹²æ‰°åç»­å»ºå›¾

æœ€åæ‰§è¡Œåˆ é™¤æ“ä½œ

```python
params, variables = remove_points(to_remove, params, variables, optimizer)
```

#### é‡ç½®é€æ˜åº¦

```python
if iter > 0 and iter % prune_dict['reset_opacities_every'] == 0 and prune_dict['reset_opacities']:
    new_params = {'logit_opacities': inverse_sigmoid(torch.ones_like(params['logit_opacities']) * 0.01)}
    params = update_params_and_optimizer(new_params, params, optimizer)
```

è§£é‡Šï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå¼ºåˆ¶æŠŠæ‰€æœ‰é«˜æ–¯çƒçš„é€æ˜åº¦éƒ½è®¾ä¸ºæä½çš„å€¼ï¼ˆ0.01ï¼‰ï¼Œå…¶ç›®çš„æ˜¯

- å¦‚æœä¸€ä¸ªçƒæ˜¯çœŸçš„å¢™å£æˆ–ç‰©ä½“ï¼Œåœ¨æ¥ä¸‹æ¥çš„å‡ æ¬¡è¿­ä»£ä¸­ï¼Œä¸ºäº†å‡å° Lossï¼Œæ¢¯åº¦ä¼šè¿…é€ŸæŠŠå®ƒé‡æ–°â€œæ‹‰é»‘â€ï¼ˆå˜ä¸é€æ˜ï¼‰ã€‚

- å¦‚æœä¸€ä¸ªçƒæ˜¯æ—©æœŸçš„å™ªå£°æˆ–è¯¯åˆ¤ï¼Œé‡ç½®åå®ƒå°±å†ä¹Ÿâ€œç«™ä¸èµ·æ¥â€äº†ï¼ˆä¸€ç›´ä¿æŒé€æ˜ï¼‰ï¼Œç„¶ååœ¨ä¸‹ä¸€æ¬¡å‰ªæä¸­è¢«å½»åº•åˆ æ‰ã€‚

- è¿™èƒ½æœ‰æ•ˆé˜²æ­¢é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œå»æ‰é‚£äº›â€œåƒµå°¸â€é«˜æ–¯çƒã€‚

### slam_external.py/keyframe_selection_overlap

#### ç”¨å¤„

åœ¨åœ°å›¾æ›´æ–°æ—¶ä½¿ç”¨æŒ‘é€‰çš„å…³é”®å¸§çš„å›¾åƒä¸æ¸²æŸ“å‡ºçš„å›¾åƒå¯¹æ¯”ï¼Œè¿›è¡Œåå‘ä¼˜åŒ–ï¼Œè¿™ä¸ªå‡½æ•°æ­£æ˜¯ä¸ºäº†æŒ‘é€‰å…³é”®å¸§

#### é¦–å…ˆä»å½“å‰å¸§é‡ŒéšæœºæŒ‘äº†ä¸€äº›â€œæ¢é’ˆâ€ç‚¹

```python
# 1. æ‰¾åˆ°æ‰€æœ‰æœ‰æœ‰æ•ˆæ·±åº¦ï¼ˆ>0ï¼‰çš„åƒç´ åæ ‡
valid_depth_indices = torch.where(gt_depth[0] > 0)
valid_depth_indices = torch.stack(valid_depth_indices, dim=1)

# 2. éšæœºæŠ½å– pixels (é»˜è®¤1600) ä¸ªç‚¹ä½œä¸ºä»£è¡¨
indices = torch.randint(valid_depth_indices.shape[0], (pixels,))
sampled_indices = valid_depth_indices[indices]
```

#### æŠŠè¿™äº›é€‰å‡ºæ¥çš„ 2D åƒç´ ç‚¹ï¼Œå˜æˆ 3D ä¸–ç•Œåæ ‡ç‚¹

```python
# æŠŠ 2D åƒç´  + æ·±åº¦ -> 3D ä¸–ç•Œåæ ‡ç‚¹ (pts)
pts = get_pointcloud(gt_depth, intrinsics, w2c, sampled_indices)
```

#### æ‹¿ç€è¿™äº› 3D ä¸–ç•Œç‚¹ï¼Œå»è¯•æ¢æ¯ä¸€ä¸ªå†å²å…³é”®å¸§ï¼Œçœ‹çœ‹å†å²å¸§çš„ç›¸æœºèƒ½çœ‹åˆ°å¤šå°‘ç‚¹

```python
for keyframeid, keyframe in enumerate(keyframe_list):
    # 1. å–å‡ºå†å²å¸§çš„ä½å§¿ (World-to-Camera)
    est_w2c = keyframe['est_w2c']
    
    # 2. æŠŠä¸–ç•Œç‚¹è½¬åˆ°å†å²å¸§çš„ç›¸æœºåæ ‡ç³»ä¸‹
    pts4 = torch.cat([pts, torch.ones_like(pts[:, :1])], dim=1) # å˜æˆé½æ¬¡åæ ‡
    transformed_pts = (est_w2c @ pts4.T).T[:, :3]
    
    # 3. å†æŠ•å½±åˆ°å†å²å¸§çš„ 2D å›¾åƒå¹³é¢
    points_2d = torch.matmul(intrinsics, transformed_pts.transpose(0, 1))
    # ... (é€è§†é™¤æ³• /z) ...
    
    # 4. æ£€æŸ¥ç‚¹æ˜¯å¦åœ¨å›¾åƒèŒƒå›´å†… (åœ¨å±å¹•å†…ä¸”åœ¨ç›¸æœºå‰æ–¹)
    edge = 20 # è¾¹ç¼˜ç•™ä¸€ç‚¹ä½™é‡
    mask = (projected_pts[:, 0] < width-edge) * ... # x, y å‡åœ¨å›¾åƒèŒƒå›´å†…
    mask = mask & (points_z[:, 0] > 0) # æ·±åº¦å¿…é¡»å¤§äº0ï¼ˆåœ¨ç›¸æœºå‰é¢ï¼Œä¸èƒ½åœ¨è„‘åï¼‰
    
    # 5. è®¡ç®—é‡å ç‡ï¼šæœ‰å¤šå°‘ç‚¹è½åœ¨äº†è¿™å¸§å†å²å›¾åƒé‡Œï¼Ÿ
    percent_inside = mask.sum()/projected_pts.shape[0]
```

æ³¨ï¼šè¿™é‡Œçš„å†å²å…³é”®å¸§æ˜¯æ¯éš”5å¸§é€‰å–ä¸€ä¸ªï¼Œå¦å¤–å†å²å…³é”®å¸§å°äº5ä¸ªæ—¶ä¸ä¼šè§¦å‘è¿™é‡Œå…³é”®å¸§çš„é€‰æ‹©
åœ¨script/splatam.pyä¸­çš„Mappingé˜¶æ®µï¼š

```python
# Add frame to keyframe list
# è¿™é‡Œçš„ time_idx æ˜¯ 4
# config['keyframe_every'] æ˜¯ 5
if ((time_idx == 0) or ((time_idx+1) % config['keyframe_every'] == 0) ...):
    # (4 + 1) % 5 == 0ï¼Œæ¡ä»¶æˆç«‹ï¼
    keyframe_list.append(curr_keyframe)  <-- Frame 4 åœ¨è¿™é‡Œè¢«æ°¸ä¹…å­˜å…¥äº†å†å²åº“
```

#### ç­›é€‰ä¸éšæœºé€‰æ‹©

```python
# 1. å…ˆæŒ‰é‡å åº¦ä»é«˜åˆ°ä½æ’åº (è™½ç„¶è¿™ä¸€æ­¥åœ¨åé¢è¢«éšæœºæ‰“ä¹±å‰Šå¼±äº†ï¼Œä½†åœ¨é€»è¾‘ä¸Šæ˜¯å…ˆæ‰¾æœ€å¥½çš„)
list_keyframe = sorted(list_keyframe, key=lambda i: i['percent_inside'], reverse=True)

# 2. å‰”é™¤é‚£äº›å®Œå…¨æ²¡é‡å çš„ (percent > 0)
selected_keyframe_list = [ ... if keyframe_dict['percent_inside'] > 0.0]

# 3. ã€å…³é”®ã€‘éšæœºæ‰“ä¹±å¹¶å–å‰ k ä¸ª
selected_keyframe_list = list(np.random.permutation(np.array(selected_keyframe_list))[:k])
```

æ³¨ï¼šè¿™é‡Œä¸ºä»€ä¹ˆè¦éšæœºæ‰“ä¹±å†å–ï¼ŸæŒ‰ç†è¯´åº”è¯¥é€‰ é‡å åº¦æœ€é«˜çš„ k å¸§ï¼Œä½†å¦‚æœåªé€‰æœ€é«˜çš„ï¼Œå¾€å¾€é€‰å‡ºæ¥çš„éƒ½æ˜¯æœ€è¿‘çš„é‚£å‡ å¸§ï¼ˆå› ä¸ºåˆšæ‰èµ°è¿‡ï¼Œé‡å åº¦è‚¯å®šæœ€é«˜ï¼‰ï¼Œè€Œéšæœºæ‰“ä¹±å¹¶ä»æ‰€æœ‰æœ‰é‡å çš„å¸§é‡Œé€‰ï¼Œå¯ä»¥è®©ç³»ç»Ÿæœ‰æœºä¼šé€‰ä¸­å¾ˆä¹…ä»¥å‰çš„å¸§ï¼ˆåªè¦å®ƒå’Œå½“å‰æœ‰é‡å ï¼‰ã€‚è¿™å¯¹äº**å›ç¯æ£€æµ‹ï¼ˆLoop Closureï¼‰**éå¸¸é‡è¦â€”â€”å³ä½¿æ˜¯ 5 åˆ†é’Ÿå‰è·¯è¿‡çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰æœºä¼šè¢«é€‰è¿›æ¥ä¸€èµ·ä¼˜åŒ–ï¼Œä»è€Œæ¶ˆé™¤ç´¯ç§¯è¯¯å·®ã€‚

### splatam.py/add_new_gaussians()

#### åœ¨å½“å‰ç”»é¢ä¸­ï¼Œå¯»æ‰¾å“ªäº›åœ°æ–¹æ˜¯â€œç©ºçš„â€æˆ–è€…â€œç”»é”™äº†çš„â€

1) ä¸é€æ˜åº¦æ£€æŸ¥ (Silhouette Check)
2) æ·±åº¦æ£€æŸ¥ (Depth Check)

#### åæŠ•å½±

ç¡®å®šäº†ä½ç½®åï¼ŒæŠŠè¿™äº› 2D åƒç´ å˜å› 3D ç‚¹

```python
new_pt_cld, mean3_sq_dist = get_pointcloud(..., mask=non_presence_mask, ...)
```

ä¸€ã€ è¾“å…¥

- curr_data['im']ï¼šå½“å‰å¸§é¢œè‰²ï¼ˆç»™æ–°çƒä¸Šè‰²ï¼‰ã€‚

- curr_data['depth']ï¼šå½“å‰å¸§æ·±åº¦ï¼ˆå†³å®šæ–°çƒåœ¨ 3D ç©ºé—´çš„ Z è½´ä½ç½®ï¼‰ã€‚

- curr_w2cï¼šå½“å‰ç›¸æœºä½å§¿ï¼ˆæŠŠç‚¹ä»ç›¸æœºåæ ‡ç³»è½¬å›ä¸–ç•Œåæ ‡ç³»ï¼‰ã€‚

äºŒã€ åŠ¨ä½œ

åˆ©ç”¨ç›¸æœºå†…å‚å’Œæ·±åº¦å€¼ï¼ŒæŠŠ Mask ä¸º True çš„åƒç´ åå‘æŠ•å°„å› 3D ç©ºé—´

ä¸‰ã€ è¾“å‡º

new_pt_cld: ä¸€æ‰¹å…¨æ–°çš„ 3D åæ ‡ç‚¹ $(x, y, z)$

#### åˆ†é…é«˜æ–¯çƒçš„å±æ€§ï¼Œç„¶ååˆå¹¶åˆ°æ€»åœ°å›¾ä¸­

```python
# 1. åˆå§‹åŒ–å‚æ•° (ç»™æ–°ç‚¹åˆ†é…é¢œè‰²ã€å¤§å°ã€æ—‹è½¬)
new_params = initialize_new_params(new_pt_cld, ...)

# 2. åˆå¹¶åˆ°æ€»å‚æ•° (Cat)
for k, v in new_params.items():
    # æŠŠæ–°å‚æ•°æ‹¼æ¥åˆ°è€å‚æ•°åé¢
    params[k] = torch.nn.Parameter(torch.cat((params[k], v), dim=0).requires_grad_(True))

# 3. åˆå§‹åŒ–ä¼˜åŒ–å™¨çŠ¶æ€ (ç»™æ–°å…µå‘è£…å¤‡)
variables['means2D_gradient_accum'] = torch.zeros(...) # æ¢¯åº¦ç´¯è®¡æ¸…é›¶
# ...
```

## è¯„ä¼°æŒ‡æ ‡

### Final Average ATE RMSE

å…¨ç§°ï¼šAbsolute Trajectory Error (ç»å¯¹è½¨è¿¹è¯¯å·®) - Root Mean Square Error (å‡æ–¹æ ¹è¯¯å·®)
å«ä¹‰ï¼šè¡¡é‡â€œç”µè„‘ç®—å‡ºæ¥çš„ç›¸æœºä½ç½®â€å’Œâ€œçœŸå®ç›¸æœºä½ç½®â€å¹³å‡å·®äº†å¤šè¿œ

### ä»¥ä¸‹ä¸‰ä¸ªä¸ºä¸€ç»„ï¼ˆè¯„ä»·å»ºå‡ºæ¥çš„å›¾ï¼Œæ¸²æŸ“æˆç…§ç‰‡åï¼Œè·ŸçœŸå®ç…§ç‰‡åƒä¸åƒçš„å‚æ•°ï¼‰

#### Average PSNR

å…¨ç§°ï¼šPeak Signal-to-Noise Ratio (å³°å€¼ä¿¡å™ªæ¯”)
å«ä¹‰ï¼šåƒç´ çº§åˆ«çš„ç›¸ä¼¼åº¦ã€‚æ•°å€¼è¶Šå¤§è¶Šå¥½

#### Average MS-SSIM

å…¨ç§°ï¼šMulti-Scale Structural Similarity Index (å¤šå°ºåº¦ç»“æ„ç›¸ä¼¼æ€§)
å«ä¹‰ï¼šå®ƒæ¯” PSNR æ›´èªæ˜ï¼Œå®ƒçœ‹é‡â€œç»“æ„â€å’Œâ€œçº¹ç†â€æ˜¯å¦æ¸…æ™°ã€‚èŒƒå›´æ˜¯ 0~1ï¼Œè¶Šæ¥è¿‘ 1 è¶Šå¥½

#### Average LPIPS

å…¨ç§°ï¼šLearned Perceptual Image Patch Similarity (å­¦ä¹ æ„ŸçŸ¥å›¾åƒå—ç›¸ä¼¼åº¦)
å«ä¹‰ï¼šè¿™æ˜¯ä¸€ä¸ª AI æ‰“åˆ†å™¨ï¼ˆæ¨¡ä»¿äººç±»è§†è§‰ï¼‰ï¼Œæ•°å€¼è¶Šä½è¶Šå¥½ï¼ˆ0 è¡¨ç¤ºä¸€æ¨¡ä¸€æ ·ï¼‰

### Average Depth RMSE

å«ä¹‰ï¼šè¡¡é‡å»ºå‡ºæ¥çš„ 3D æ¨¡å‹è¡¨é¢ï¼Œè·ç¦»ç›¸æœºçš„æ·±æµ…å¯¹ä¸å¯¹ã€‚è¶Šå°è¶Šå¥½
